webpackJsonp([1],[,,,,,,,,,,,function(t,e,n){"use strict";var o=n(1),a=n(105);n.d(e,"a",function(){return i});var i=function(){function t(t){var e=this;this.animate=t,this.paused=!1,this.animationClass="active",this.message=null,this.defaultTimeout=2500,this._container=null,this._current=null,this._queue=[],this._dismissBinding=null,this._dismissBinding=function(t){e.dismiss()}}return Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(t){this._container&&this._container.removeEventListener("click",this._dismissBinding),this._container=t,this._container&&this._container.addEventListener("click",this._dismissBinding)},enumerable:!0,configurable:!0}),t.prototype.show=function(t,e,n){var o={message:t,done:e,duration:"undefined"==typeof n?this.defaultTimeout:n};return this.queue(o)},t.prototype.dismiss=function(){var t=this;this._current&&!this.paused&&(this.paused=!0,this.animate.leave(this.container,this.animationClass).then(function(){if(t._current){try{t._current.done&&t._current.done(t._current)}catch(t){console.warn(t)}t._current=null,t.message=null}t.paused=!1}),this._current&&(this._current.dismissed=!0))},t.prototype.queue=function(t){return t.elapsed=0,this._queue.push(t),t},t.prototype.processFrame=function(t){var e=this;if(this._current&&this.paused!==!0){var n=this._current,o=n.duration&&n.elapsed>n.duration,a=n.dismissed===!0;if(!o&&!a)return void(n.elapsed+=t);this.dismiss()}this.paused||0===this._queue.length||(this._current=this._queue.shift(),this.paused=!0,this.message=this._current.message,this.animate.enter(this.container,this.animationClass).then(function(){e.paused=!1}))},t}();i=__decorate([n.i(o.d)(),__metadata("design:paramtypes",[a.a])],i)},,function(t,e,n){"use strict";var o=n(70);n.d(e,"a",function(){return a});var a=function(){function t(t,e){t&&t.hasOwnProperty("x")&&t.hasOwnProperty("y")?this.set(t.x,t.y):"string"==typeof t&&"string"==typeof e?this.set(parseFloat(t),parseFloat(e)):"number"==typeof t&&"number"==typeof e?this.set(t,e):this.zero()}return t.prototype.toString=function(){return this.x+","+this.y},t.prototype.set=function(e,n){if(e instanceof t||e&&void 0!==e.x&&void 0!==e.y)this.x=e.x,this.y=e.y;else{if("number"!=typeof e||"number"!=typeof n)throw new Error(o.a.INVALID_ARGUMENTS);this.x=e,this.y=n}return this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.prototype.add=function(e,n){return e instanceof t?(this.x+=e.x,this.y+=e.y):"number"==typeof e&&"undefined"==typeof n?(this.x+=e,this.y+=e):(this.x+=e,this.y+=n),this},t.prototype.subtract=function(e,n){return e instanceof t?(this.x-=e.x,this.y-=e.y):"number"==typeof e&&"undefined"==typeof n?(this.x-=e,this.y-=e):(this.x-=e,this.y-=n),this},t.prototype.multiply=function(e,n){return e instanceof t?(this.x*=e.x,this.y*=e.y):"number"==typeof e&&"undefined"==typeof n?(this.x*=e,this.y*=e):(this.x*=e,this.y*=n),this},t.prototype.divide=function(e,n){if(e instanceof t){if(0===e.x||0===e.y)throw new Error(o.a.DIVIDE_ZERO);this.x/=e.x,this.y/=e.y}else if("number"==typeof e&&"undefined"==typeof n){if(0===e)throw new Error(o.a.DIVIDE_ZERO);this.x/=e,this.y/=e}else{if(0===e||0===n)throw new Error(o.a.DIVIDE_ZERO);this.x/=e,this.y/=n}return this},t.prototype.inverse=function(){return this.x*=-1,this.y*=-1,this},t.prototype.equal=function(t){return this.x===t.x&&this.y===t.y},t.equal=function(t,e){return e.x===t.x&&e.y===t.y},t.prototype.isZero=function(){return 0===this.x&&0===this.y},t.prototype.zero=function(){return this.x=this.y=0,this},t.interpolate=function(t,e,n,o){return o=Math.min(Math.max(o,0),1),t.x=e.x*(1-o)+n.x*o,t.y=e.y*(1-o)+n.y*o,t},t.prototype.interpolate=function(e,n,o){return t.interpolate(this,e,n,o)},t}()},,function(t,e,n){"use strict";var o=n(1),a=n(27),i=n(174),r=n(308),l=n(47),s=n(9),u=n(112),c=n(151),p=n(152),d=n(53),h=n(28),f=n(31);n.d(e,"a",function(){return _});var m=null,_=function(t){function e(e,n,o,a){var r=t.call(this)||this;return r.loader=e,r.store=n,r.sprites=o,r.gameStateService=a,r.input=new i.b,r.ready$=r.store.select(f.p).combineLatest(r.store.select(f.s),function(t,e){return t&&e}).filter(function(t){return t}).map(function(){}),m=r,r.gameStateService.hasSaveGame()?r.store.dispatch(new h.k):(r.store.dispatch(new p.d("assets/images/index.json")),r.store.dispatch(new c.a(u.c))),r}return __extends(e,t),e.get=function(){return m},e}(r.a);_=__decorate([n.i(o.d)(),__metadata("design:paramtypes",[a.a,s.a,l.a,d.a])],_)},,,,,,function(t,e,n){"use strict";var o=n(42);n.n(o);n.d(e,"a",function(){return a});var a=function(){function t(){this._loading$=new o.BehaviorSubject(!0),this.loading$=this._loading$,this._title$=new o.BehaviorSubject(""),this.title$=this._title$,this._message$=new o.BehaviorSubject(""),this.message$=this._message$}return Object.defineProperty(t.prototype,"loading",{set:function(t){this._loading$.next(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{set:function(t){this._title$.next(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{set:function(t){this._message$.next(t)},enumerable:!0,configurable:!0}),t}()},,,,function(t,e,n){"use strict";var o=n(1),a=n(42),i=(n.n(a),n(27)),r=n(80),l=n(4);n.n(l);n.d(e,"a",function(){return s});var s=function(){function t(t){this.resourceLoader=t,this._combatMap$=new a.ReplaySubject(1),this.combatMap$=this._combatMap$}return t.prototype.loadMap=function(t){var e=this,o=n.i(r.d)("combat");return a.Observable.fromPromise(this.resourceLoader.load(o).then(function(n){if(!n[0]||!n[0].data)return null;var o=n[0];return o.layers.forEach(function(e){e.visible=e.name===t}),e._combatMap$.next(o),o}))},t.prototype.loadEncounter=function(t){return this.loadMap(t.zone).map(function(){return t})},t.prototype.isDefeated=function(t){return!t||t.hp<=0},t.prototype.rollHit=function(t,e){var n=l.random(0,200),o=this.getEvasion(t),a=this.getEvasion(e),i=o<a,r=i?180:120;return 200!==n&&(0===n||n<=r)},t.prototype.getEvasion=function(t){return t.speed},t.prototype.attackCombatant=function(t,e){var n=this.getAttackStrength(t),o=this.varyDamage(n);return this.rollHit(t,e)?Math.ceil(o):0},t.prototype.getDefense=function(t,e){return void 0===e&&(e=!1),t.defense},t.prototype.getAttackStrength=function(t){return this.getWeaponStrength(t)+t.attack/2},t.prototype.getMagicStrength=function(t){return this.getWeaponStrength(t)+t.magic/2},t.prototype.getWeaponStrength=function(t){return 0},t.prototype.varyDamage=function(t){var e=1.2*t,n=.8*t;return Math.max(1,Math.floor(Math.random()*(e-n+1))+n)},t}();s=__decorate([n.i(o.d)(),__metadata("design:paramtypes",[i.a])],s)},function(t,e,n){"use strict";var o=n(27),a=n(1),i=n(9),r=n(28),l=n(4),s=(n.n(l),n(150)),u=n(53),c=n(58);n.n(c);n.d(e,"a",function(){return p});var p=d=function(){function t(t,e){this.loader=t,this.store=e}return t.getHPForLevel=function(t,e){return Math.floor(e.basedefense*Math.pow(t,1.1))+2*e.basedefense},t.create=function(t,e){var n={eid:"invalid-hero",type:t,name:e,level:1,exp:0,baseattack:0,basespeed:0,basemagic:0,basedefense:0},o=null;switch(t){case"warrior":o=l.extend({},n,{eid:"warrior-123",icon:"warrior-male.png",baseattack:10,basespeed:2,basemagic:1,basedefense:7});break;case"healer":o=l.extend({},n,{eid:"lifemage-123",icon:"magician-female.png",baseattack:1,basespeed:6,basemagic:9,basedefense:4});break;case"ranger":o=l.extend({},n,{eid:"ranger-123",icon:"ranger-female.png",baseattack:3,basespeed:10,basemagic:2,basedefense:5});break;case"mage":o=l.extend({},n,{eid:"deathmage-123",icon:"magician-male.png",baseattack:2,basespeed:10,basemagic:4,basedefense:4});break;default:throw new Error("Unknown character class: "+t)}var a=d.getHPForLevel(1,o);return o=l.extend(o,{maxhp:a,hp:a,defense:o.basedefense,speed:o.basespeed,attack:o.baseattack,magic:o.basemagic})},t.prototype.initGame=function(t){var e=this;return void 0===t&&(t=!!localStorage.getItem(u.a.STATE_KEY)),new Promise(function(n,o){if(t)e.store.dispatch(new r.k),n(!1);else{var a=d.create("warrior","Warrior"),i=d.create("ranger","Ranger"),l=d.create("healer","Mage"),u={party:c.List([a.eid,i.eid,l.eid]),inventory:c.List(),battleCounter:0,keyData:c.Map(),gold:200,combatZone:"",location:"town",position:{x:12,y:8},shipPosition:{x:0,y:0}};e.store.dispatch(new r.c(u)),e.store.dispatch(new s.a(a)),e.store.dispatch(new s.a(i)),e.store.dispatch(new s.a(l)),e.store.dispatch(new r.f(u.location,u.position)),n(!0)}})},t}();p=d=__decorate([n.i(a.d)(),__metadata("design:paramtypes",[o.a,i.a])],p);var d},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(70)),i=n(229),r=n(307),l=n(306),s=n(173),u=n(230),c=n(231),p=n(305),d=n(1),h=n(96);n.d(e,"a",function(){return f});var f=function(){function t(t){this.http=t,this._cache={},this._types={png:i.a,js:r.a,json:l.a,xml:s.a,tmx:u.a,tsx:c.a,"":p.a,mp3:p.a,m4a:p.a,aac:p.a,ogg:p.a,wav:p.a}}return t.prototype.registerType=function(t,e){this._types[t]=e},t.prototype.getResourceExtension=function(t){var e=t.lastIndexOf(".");return e===-1||e<=t.lastIndexOf("/")?"":t.substr(e+1)},t.prototype.create=function(t,e){if("function"!=typeof t)throw new Error(a.a.INVALID_ARGUMENTS);return new t(null,e)},t.prototype.loadAsType=function(t,e){var n=this;return new Promise(function(o,i){if(!t||!e)return i(a.a.INVALID_ARGUMENTS);var r=n._cache[t];return r&&r.data?o(r):(r||(r=n._cache[t]=new e(t,null)),void r.fetch(t).then(function(){return o(r)}).catch(function(t){return i(t)}))})},t.prototype.load=function(t){var e=this;return new Promise(function(n,a){function i(){if(0===l)return 0===s?n(r):a(s+" resources failed to load")}var r=[],l=0,s=0;o.isArray(t)||(t=[t]);for(var u=function(n){var o=t[n],a=e.getResourceExtension(o),u=e._types[a];return u?(l++,void e.loadAsType(o,e._types[a]).then(function(t){l--,i(),t.extension=a,r.push(t)}).catch(function(t){console.log("failed to load resource ("+o+") with error: "+t),s++,l--,i()})):(s++,"continue")},c=0;c<t.length;c++)u(c);i()})},t}();f=__decorate([n.i(d.d)(),__metadata("design:paramtypes",[h.k])],f)},function(t,e,n){"use strict";var o=n(35);n.d(e,"q",function(){return a}),n.d(e,"r",function(){return i}),n.d(e,"s",function(){return r}),n.d(e,"n",function(){return l}),n.d(e,"o",function(){return s}),n.d(e,"p",function(){return u}),n.d(e,"k",function(){return c}),n.d(e,"l",function(){return p}),n.d(e,"m",function(){return d}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return m}),n.d(e,"u",function(){return _}),n.d(e,"f",function(){return g}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return v}),n.d(e,"t",function(){return b}),n.d(e,"a",function(){return x}),n.d(e,"v",function(){return w}),n.d(e,"g",function(){return k}),n.d(e,"h",function(){return M}),n.d(e,"b",function(){return S}),n.d(e,"w",function(){return C});var a=function(){function t(){this.type=t.typeId,this.payload=null}return t}();a.typeId=n.i(o.a)("GAME_SAVE");var i=function(){function t(){this.type=t.typeId,this.payload=null}return t}();i.typeId=n.i(o.a)("GAME_SAVE_SUCCESS");var r=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();r.typeId=n.i(o.a)("GAME_SAVE_FAIL");var l=function(){function t(){this.type=t.typeId,this.payload=null}return t}();l.typeId=n.i(o.a)("GAME_SAVE_DELETE");var s=function(){function t(){this.type=t.typeId,this.payload=null}return t}();s.typeId=n.i(o.a)("GAME_SAVE_DELETE_SUCCESS");var u=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();u.typeId=n.i(o.a)("GAME_SAVE_DELETE_FAIL");var c=function(){function t(){this.type=t.typeId}return t}();c.typeId=n.i(o.a)("GAME_LOAD");var p=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();p.typeId=n.i(o.a)("GAME_LOAD_SUCCESS");var d=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();d.typeId=n.i(o.a)("GAME_LOAD_FAIL");var h=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();h.typeId=n.i(o.a)("GAME_NEW");var f=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();f.typeId=n.i(o.a)("GAME_NEW_SUCCESS");var m=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();m.typeId=n.i(o.a)("GAME_NEW_FAIL");var _=function(){function t(e,n){this.type=t.typeId,this.payload={key:e,value:n}}return t}();_.typeId=n.i(o.a)("GAME_SET_KEY_DATA");var g=function(){function t(e,n){this.type=t.typeId,this.payload={location:e,position:n}}return t}();g.typeId=n.i(o.a)("GAME_TRAVEL");var y=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();y.typeId=n.i(o.a)("GAME_TRAVEL_SUCCESS");var v=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();v.typeId=n.i(o.a)("GAME_TRAVEL_FAIL");var b=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();b.typeId=n.i(o.a)("GAME_MOVE");var x=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();x.typeId=n.i(o.a)("GAME_ADD_GOLD");var w=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();w.typeId=n.i(o.a)("GAME_HEAL_PARTY");var k=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();k.typeId=n.i(o.a)("GAME_EQUIP_ITEM");var M=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();M.typeId=n.i(o.a)("GAME_UNEQUIP_ITEM");var S=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();S.typeId=n.i(o.a)("GAME_ADD_INVENTORY");var C=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();C.typeId=n.i(o.a)("GAME_REMOVE_INVENTORY")},,,function(t,e,n){"use strict";var o=n(691),a=(n.n(o),n(211)),i=n(214),r=n(212),l=n(210),s=n(216);n.d(e,"c",function(){return u}),n.d(e,"b",function(){return c}),n.d(e,"a",function(){return p}),n.d(e,"p",function(){return h}),n.d(e,"r",function(){return y}),n.d(e,"j",function(){return v}),n.d(e,"g",function(){return w}),n.d(e,"n",function(){return k}),n.d(e,"k",function(){return M}),n.d(e,"q",function(){return S}),n.d(e,"o",function(){return C}),n.d(e,"h",function(){return O}),n.d(e,"i",function(){return P}),n.d(e,"s",function(){return E}),n.d(e,"d",function(){return F}),n.d(e,"e",function(){return D}),n.d(e,"f",function(){return z}),n.d(e,"m",function(){return U}),n.d(e,"l",function(){return Z});var u=function(t){return t.combat},c=(n.i(o.createSelector)(u,l.a),n.i(o.createSelector)(u,l.b)),p=n.i(o.createSelector)(u,l.c),d=function(t){return t.sprites},h=n.i(o.createSelector)(d,s.a),f=(n.i(o.createSelector)(d,s.b),function(t){return t.entities}),m=n.i(o.createSelector)(f,a.a),_=(n.i(o.createSelector)(f,a.b),function(t){return n.i(o.createSelector)(m,function(e){return e.get(t)})}),g=n.i(o.createSelector)(f,a.c),y=(n.i(o.createSelector)(f,a.d),function(t){return n.i(o.createSelector)(_(t),g,function(t,e){var n={armor:e.get(t.armor),helm:e.get(t.helm),shield:e.get(t.shield),accessory:e.get(t.accessory),boots:e.get(t.boots),weapon:e.get(t.weapon)};return Object.assign({},t,n)})}),v=function(t){return t.gameState},b=n.i(o.createSelector)(v,i.a),x=n.i(o.createSelector)(v,i.b),w=n.i(o.createSelector)(v,i.c),k=n.i(o.createSelector)(v,i.d),M=n.i(o.createSelector)(v,i.e),S=n.i(o.createSelector)(v,i.f),C=(n.i(o.createSelector)(v,i.g),n.i(o.createSelector)(v,i.h)),O=n.i(o.createSelector)(m,x,function(t,e){return e.map(function(e){return t.get(e)})}),P=n.i(o.createSelector)(g,b,function(t,e){return e.map(function(e){return t.get(e)})}),I=function(t){return t.gameData},E=n.i(o.createSelector)(I,r.a),T=function(t,e){return e.map(function(e){return t.get(e)})},A=n.i(o.createSelector)(I,r.c),R=n.i(o.createSelector)(I,r.d),F=n.i(o.createSelector)(A,R,T),$=n.i(o.createSelector)(I,r.e),L=n.i(o.createSelector)(I,r.f),D=n.i(o.createSelector)($,L,T),B=n.i(o.createSelector)(I,r.g),j=n.i(o.createSelector)(I,r.h),z=n.i(o.createSelector)(B,j,T),N=n.i(o.createSelector)(I,r.i),G=n.i(o.createSelector)(I,r.j),U=n.i(o.createSelector)(N,G,T),H=n.i(o.createSelector)(I,r.k),X=n.i(o.createSelector)(I,r.l),W=(n.i(o.createSelector)(H,X,T),n.i(o.createSelector)(I,r.m)),V=n.i(o.createSelector)(I,r.n),Y=(n.i(o.createSelector)(W,V,T),n.i(o.createSelector)(I,r.o)),K=n.i(o.createSelector)(I,r.p),q=(n.i(o.createSelector)(Y,K,T),n.i(o.createSelector)(I,r.q)),Q=n.i(o.createSelector)(I,r.r),Z=n.i(o.createSelector)(q,Q,T)},function(t,e,n){e=t.exports=n(672)(),e.push([t.i,"",""])},,,function(t,e,n){"use strict";function o(t){if(u[t])throw new Error('Action type "'+t+'" is not unique"');return u[t]=!0,t}function a(t){}function i(t,e){return n.i(s.makeTypedFactory)(t,e)}function r(t,e){if(!t)throw new Error("Assertion Failed: "+e)}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})}var s=n(956);n.n(s);e.a=o,e.e=a,e.d=i,e.b=r,e.c=l;var u={}},,,,function(t,e,n){"use strict";var o=n(1),a=n(174),i=n(26),r=n(15),l=n(11),s=n(13),u=n(54),c=n(119),p=n(236),d=n(21),h=n(9),f=n(117),m=n(156);n.d(e,"a",function(){return _});var _=function(t){function e(e,n,o,a,i){var r=t.call(this)||this;return r.game=e,r.notify=n,r.loadingService=o,r.store=a,r.world=i,r.combat=r,r.scene=new u.a,r.pointer=null,r.items=[],r.damages=[],r.mouse=null,r.world.mark(r.scene),r}return __extends(e,t),e.prototype.ngOnDestroy=function(){this.world.erase(this.scene),this.world.time.removeObject(this),this.scene.removeView(this),this.pointer=null,this.damages=[]},e.prototype.ngAfterViewInit=function(){var t=this;this.canvas=this.canvasElementRef.nativeElement,this.camera&&(this.camera.point.zero(),this.camera.extent.set(25,25)),this.scene.addView(this),setTimeout(function(){return t._onResize()},1),this.world.time.addObject(this),this._bindRenderCombat()},e.prototype.onAddToScene=function(e){t.prototype.onAddToScene.call(this,e),e.world&&e.world.input&&(this.mouse=e.world.input.mouseHook(this,"combat"))},e.prototype.onRemoveFromScene=function(t){t.world&&t.world.input&&t.world.input.mouseUnhook("combat")},e.prototype.tick=function(t){if(this&&this.pointer&&this.pointer.object){var e=new s.a(this.pointer.object.point);e.y=e.y-this.camera.point.y+this.pointer.offset.y,e.x=e.x-this.camera.point.x+this.pointer.offset.x;var n=this.worldToScreen(e,this.cameraScale),o=this.pointer.element.nativeElement;o.style.left=n.x+"px",o.style.top=n.y+"px"}},e.prototype.processCamera=function(){this.cameraComponent=this.map.camera,t.prototype.processCamera.call(this)},e.prototype.renderFrame=function(t){return this.clearRect(),this.map.renderFrame(this,t),this},e.prototype.applyDamage=function(t,e){var n=new s.a(t.point);n.y-=this.camera.point.y+1.25,n.x-=this.camera.point.x;var o=this.worldToScreen(n,this.cameraScale);o.add(this.canvasElementRef.nativeElement.offsetLeft,this.canvasElementRef.nativeElement.offsetTop),this.damages.push({timeout:(new Date).getTime()+5e3,value:Math.abs(e),classes:{miss:0===e,heal:e<0},position:o})},e.prototype._onClick=function(t){var e=[];if(a.b.mouseOnView(t,this,this.mouse),this.scene.db.queryPoint(this.mouse.world,c.a,e))return this.scene.trigger("click",this.mouse,e),t.stopImmediatePropagation(),!1},e.prototype._bindRenderCombat=function(){var t=this;this.machine.on("combat:attack",function(e){var n=t.machine.notifyWait(),o="",a=e.attacker.model.name,i=e.defender.model.name;o=e.damage>0?a+" attacked "+i+" for "+e.damage+" damage!":e.damage<0?a+" healed "+i+" for "+Math.abs(e.damage)+" hit points":a+" attacked "+i+", and MISSED!",t.applyDamage(e.defender,e.damage),t.notify.show(o,n)}),this.machine.on("combat:run",function(e){var n=t.machine.notifyWait(),o=e.player.model.name;o+=e.success?" bravely ran away!":" failed to escape!",t.notify.show(o,n)}),this.machine.on("combat:defeat",function(e){var n=t.machine.notifyWait();t.notify.show("Your entity was defeated...",function(){t.game.initGame().then(n)},0)})},e}(p.a);__decorate([n.i(o.M)(),__metadata("design:type",u.a)],_.prototype,"scene",void 0),__decorate([n.i(o.M)(),__metadata("design:type",Array)],_.prototype,"items",void 0),__decorate([n.i(o._21)(f.a),__metadata("design:type",f.a)],_.prototype,"machine",void 0),__decorate([n.i(o.M)(),__metadata("design:type",Array)],_.prototype,"damages",void 0),__decorate([n.i(o._21)("combatCanvas"),__metadata("design:type",o.K)],_.prototype,"canvasElementRef",void 0),__decorate([n.i(o._21)(m.b),__metadata("design:type",m.b)],_.prototype,"map",void 0),_=__decorate([n.i(o._24)({selector:"rpg-combat",styles:[n(949)],template:n(683),host:{"(window:resize)":"_onResize($event)","(click)":"_onClick($event)"}}),__metadata("design:paramtypes",[i.a,l.a,d.a,h.a,r.a])],_)},,,,,function(t,e,n){"use strict";var o=n(120),a=n(237),i=n(1),r=n(42),l=(n.n(r),n(15)),s=n(54),u=n(230);n.d(e,"b",function(){return c}),n.d(e,"a",function(){return p});var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._feature$=new r.BehaviorSubject(null),e.feature$=e._feature$,e._active$=new r.BehaviorSubject(!1),e.active$=e._active$,e}return __extends(e,t),Object.defineProperty(e.prototype,"feature",{set:function(t){this._feature$.next(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this._feature$.value?this._feature$.value.properties||{}:{}},enumerable:!0,configurable:!0}),e.prototype.assertFeature=function(){if(!this._feature$.value||!this.properties)throw new Error("feature lacks valid data or properties")},Object.defineProperty(e.prototype,"active",{set:function(t){this._active$.next(t)},enumerable:!0,configurable:!0}),e.prototype.enter=function(t){return this.assertFeature(),this.active=!0,!0},e.prototype.exit=function(t){return this.assertFeature(),this.active=!1,!0},e}(a.a);__decorate([n.i(i.M)(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],c.prototype,"active",null);var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onClose=new i.D,e._featureComponent$=new r.ReplaySubject(1),e._feature$=new r.BehaviorSubject(null),e.feature$=e._feature$,e.type$=e.feature$.map(function(t){return t.type}),e.gameFeatureObject$=e.feature$.combineLatest(e._featureComponent$,function(t,n){if(!t||!e.tiledMap)return null;var a=Object.assign({},t.properties||{},{type:t.type,x:Math.round(t.x/e.tiledMap.tilewidth),y:Math.round(t.y/e.tiledMap.tileheight)}),i=new o.a(a);return i.addBehavior(n),i}),e}return __extends(e,t),Object.defineProperty(e.prototype,"feature",{get:function(){return this._feature$.value},set:function(t){this._feature$.next(t)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){var e=this._feature$.value;return e?"[TiledTMXFeature] (name:"+e.name+") (id:"+e.properties.id+")":t.prototype.toString.call(this)},e.prototype.ngAfterViewInit=function(){var t=this;this.featureQuery.length>0&&this._featureComponent$.next(this.featureQuery.first),this._hostSubscription=this.gameFeatureObject$.do(function(e){t.disconnectHost(),t.host=e,l.a.get().mark(t.host),t.scene.addObject(t.host)}).subscribe()},e.prototype.disconnectHost=function(){this.host&&(this.scene&&this.scene.removeObject(this.host),l.a.get().erase(this.host),this.host.destroy(),this.host=null)},e.prototype.ngOnDestroy=function(){this._hostSubscription&&(this._hostSubscription.unsubscribe(),this._hostSubscription=null),this.disconnectHost()},e.prototype.connectBehavior=function(){return!!t.prototype.connectBehavior.call(this)&&(this.host.feature?(this.id=this.host.feature.id,!0):(console.log("Feature host missing feature data."),!1))},e.prototype.syncBehavior=function(){return!!t.prototype.syncBehavior.call(this)&&(this.host.visible=this.host.enabled=!this.getDataHidden(),!0)},e.prototype.setDataHidden=function(t){void 0===t&&(t=!0),console.warn("fix setDataHidden for hiding map features once they've been destroyed")},e.prototype.getDataHidden=function(){return console.warn("fix getDataHidden for hiding map features once they've been destroyed"),!1},e}(a.a);__decorate([n.i(i.M)(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],p.prototype,"feature",null),__decorate([n.i(i.M)(),__metadata("design:type",u.a)],p.prototype,"tiledMap",void 0),__decorate([n.i(i.M)(),__metadata("design:type",s.a)],p.prototype,"scene",void 0),__decorate([n.i(i._22)("comp"),__metadata("design:type",i._23)],p.prototype,"featureQuery",void 0),__decorate([n.i(i._17)(),__metadata("design:type",i.D)],p.prototype,"onClose",void 0),p=__decorate([n.i(i._24)({selector:"map-feature",changeDetection:i._25.OnPush,template:n(688)})],p)},,,function(t,e,n){"use strict";var o=n(80),a=n(48),i=n(1),r=n(27);n.d(e,"a",function(){return l});var l=s=function(){function t(t){this.loader=t,this.canvas=null,this.context=null,this.canvas=document.createElement("canvas"),this.sizeCanvas(s.SIZE,s.SIZE)}return t.getSpriteSheetUrl=function(t){return"assets/images/"+t+".png"},t.prototype.sizeCanvas=function(t,e){this.canvas.width=t,this.canvas.height=e,this.context=this.canvas.getContext("2d"),this.context.msImageSmoothingEnabled=!1,this.context.imageSmoothingEnabled=!1,this.context.webkitImageSmoothingEnabled=!1,this.context.mozImageSmoothingEnabled=!1},t.prototype.getSpriteSheet=function(t){return this.loader.load(s.getSpriteSheetUrl(t))},t.prototype.getSingleSprite=function(t,e){var n=this;void 0===e&&(e=0);var a=o.e.sprites[t];return a?new Promise(function(o,i){n.getSpriteSheet(a.source).then(function(a){var r=a[0],l=n.getSpriteRect(t,e);n.sizeCanvas(l.extent.x,l.extent.y),n.context.clearRect(0,0,n.canvas.width,n.canvas.height),n.context.drawImage(r.data,l.point.x,l.point.y,l.extent.x,l.extent.y,0,0,n.canvas.width,n.canvas.height);var s=n.canvas.toDataURL(),u=new Image;u.src=s,u.onload=function(){o(u)},u.onerror=function(t){i(t)}})}):Promise.reject("Unable to find sprite by name: "+t)},t.prototype.getSpriteRect=function(t,e){void 0===e&&(e=0);var n=this.getSpriteMeta(t),o=n.x,i=s.SIZE,r=s.SIZE,l=n.y;if(n.frames>1){n&&"undefined"!=typeof n.cellWidth&&"undefined"!=typeof n.cellHeight&&(i=n.cellWidth,r=n.cellHeight);var u=n.width/i,c=e%u,p=Math.floor((e-c)/u);o+=c*i,l+=p*r}else i=n.width,r=n.height;return new a.a(o,l,i,r)},t.prototype.getSpriteMeta=function(t){var e=o.e.sprites[t];return e},t}();l.SIZE=16,l=s=__decorate([n.i(i.d)(),__metadata("design:paramtypes",[r.a])],l);var s},function(t,e,n){"use strict";var o=n(70),a=n(13);n.d(e,"a",function(){return i});var i=function(){function t(e,n,o,i){return e instanceof t?(this.point=new a.a(e.point),this.extent=new a.a(e.extent)):"number"==typeof o&&"number"==typeof i?(this.point=new a.a(e,n),this.extent=new a.a(o,i)):e instanceof a.a&&n instanceof a.a?(this.point=new a.a(e),this.extent=new a.a(n)):(this.point=new a.a(0,0),this.extent=new a.a(1,1)),this}return t.prototype.toString=function(){return this.point.toString()+","+this.extent.toString()},t.prototype.set=function(e,n,i,r){if(e instanceof t)this.point.set(e.point),this.extent.set(e.extent);else if("number"==typeof i&&"number"==typeof r)this.point.set(e,n),this.extent.set(i,r);else{if(!(e instanceof a.a&&n instanceof a.a))throw new Error(o.a.INVALID_ARGUMENTS);this.point.set(e),this.extent.set(n)}return this},t.prototype.clone=function(){return new t(this.point.clone(),this.extent.clone())},t.prototype.clip=function(t){var e=this.point.x+this.extent.x,n=this.point.y+this.extent.y;return this.point.x=Math.max(t.point.x,this.point.x),this.extent.x=Math.min(t.point.x+t.extent.x,e)-this.point.x,this.point.y=Math.max(t.point.y,this.point.y),this.extent.y=Math.min(t.point.y+t.extent.y,n)-this.point.y,this},t.prototype.isValid=function(){return this.extent.x>0&&this.extent.y>0},t.prototype.intersect=function(t){return!(t.point.x>this.point.x+this.extent.x||t.point.x+t.extent.x<this.point.x||t.point.y>this.point.y+this.extent.y||t.point.y+t.extent.y<this.point.y)},t.prototype.pointInRect=function(t,e){var n=0;if(t instanceof a.a)n=t.x,e=t.y;else{if("number"!=typeof t||"number"!=typeof e)throw new Error(o.a.INVALID_ARGUMENTS);n=t}return!(n>=this.point.x+this.extent.x||e>=this.point.y+this.extent.y)&&!(n<this.point.x||e<this.point.y)},t.prototype.getCenter=function(){var t=parseFloat((this.point.x+.5*this.extent.x).toFixed(2)),e=parseFloat((this.point.y+.5*this.extent.y).toFixed(2));return new a.a(t,e)},t.prototype.setCenter=function(t,e){var n;return t instanceof a.a||t&&void 0!==t.x&&void 0!==t.y?(n=t.x,e=t.y):n=t,this.point.x=parseFloat((n-.5*this.extent.x).toFixed(2)),this.point.y=parseFloat((e-.5*this.extent.y).toFixed(2)),this},t.prototype.getLeft=function(){return this.point.x},t.prototype.getTop=function(){return this.point.y},t.prototype.getRight=function(){return this.point.x+this.extent.x},t.prototype.getBottom=function(){return this.point.y+this.extent.y},t.prototype.getHalfSize=function(){return new a.a(this.extent.x/2,this.extent.y/2)},t.prototype.addPoint=function(t){t.x<this.point.x&&(this.extent.x=this.extent.x-(t.x-this.point.x),this.point.x=t.x),t.y<this.point.y&&(this.extent.y=this.extent.y-(t.x-this.point.y),this.point.y=t.y),t.x>this.point.x+this.extent.x&&(this.extent.x=t.x-this.point.x),t.y>this.point.y+this.extent.y&&(this.extent.y=t.y-this.point.y)},t.prototype.inflate=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=1),this.point.x-=t,this.extent.x+=2*t,this.point.y-=e,this.extent.y+=2*e,this},t}()},function(t,e,n){"use strict";var o=n(304);n.d(e,"a",function(){return a});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(o.a)},,,,function(t,e,n){"use strict";var o=n(1),a=n(42),i=(n.n(a),n(27)),r=n(80),l=n(9);n.d(e,"a",function(){return s});var s=u=function(){function t(t,e){this.loader=t,this.store=e,this._worldMap$=new a.ReplaySubject(1),this.worldMap$=this._worldMap$}return t.prototype.loadMap=function(t){var e=this,o=n.i(r.d)(t);return a.Observable.fromPromise(this.loader.load(o).then(function(t){return e._worldMap$.next(t[0]),t[0]}))},t.prototype.resetGame=function(){return a.Observable.interval(10).take(1).map(function(){localStorage.removeItem(u.STATE_KEY)})},t.prototype.hasSaveGame=function(){return!!localStorage.getItem(u.STATE_KEY)},t.prototype.load=function(){return a.Observable.interval(10).take(1).map(function(){var t=JSON.parse(localStorage.getItem(u.STATE_KEY));return t})},t.prototype.save=function(){return this.store.take(1).map(function(t){var e=JSON.stringify(t);return localStorage.setItem(u.STATE_KEY,e),t})},t}();s.STATE_KEY="_angular2PowRPGState",s=u=__decorate([n.i(o.d)(),__metadata("design:paramtypes",[i.a,l.a])],s);var u},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(518)),i=n(172);n.d(e,"a",function(){return r});var r=function(t){function e(n){void 0===n&&(n={});var i=t.call(this)||this;return i.id="scene-"+e.sceneCount++,i.db=new a.a,i.options={},i._objects=[],i._views=[],i.world=null,i.fps=0,i.time=0,i.paused=!1,i.options=o.defaults(n||{},{debugRender:!1}),i}return __extends(e,t),e.prototype.destroy=function(){var t;this.world&&this.world.erase(this);var e=this._objects.length;for(t=0;t<e;t++)this.removeObject(this._objects[t],!0);for(e=this._views.length,t=0;t<e;t++)this.removeView(this._views[t]);this.paused=!0},e.prototype.onAddToWorld=function(t){t.time.addObject(this)},e.prototype.onRemoveFromWorld=function(t){t.time.removeObject(this)},e.prototype.tick=function(t){if(!this.paused)for(var e=this._objects.length,n=0;n<e;n++)this._objects[n]&&this._objects[n].tick(t)},e.prototype.processFrame=function(t){var e;if(!this.paused){this.time=this.world.time.time;var n=this._objects.length;for(e=0;e<n;e++){var o=this._objects[e];o.interpolateTick&&o.interpolateTick(t)}for(n=this._views.length,e=0;e<n;e++)this._views[e].render(t);var a=t?1e3/t:0;this.fps+=(a-this.fps)/10}},e.prototype.removeIt=function(t,e){var n=this,a=!1;return this[t]=o.filter(this[t],function(t){return e&&t&&t._uid===e._uid?(n.db.removeSpatialObject(t),t.onRemoveFromScene&&t.onRemoveFromScene(n),n.world&&n.world.erase(t),delete t.scene,a=!0,!1):!!t}),a},e.prototype.addIt=function(t,e){
if(e.scene&&e.scene.removeIt(t,e),o.where(this[t],{_uid:e._uid}).length>0)throw new Error("Object added to scene twice");return this[t].push(e),this.world&&this.world.mark(e),this.db.addSpatialObject(e),e.scene=this,e.onAddToScene&&e.onAddToScene(this),!0},e.prototype.findIt=function(t,e){return o.where(this[t],{_uid:e._uid})},e.prototype.addView=function(t){return this.addIt("_views",t)},e.prototype.removeView=function(t){return this.removeIt("_views",t)},e.prototype.findView=function(t){return!!this.findIt("_views",t)},e.prototype.getViewOfType=function(t){return o.find(this._views,function(e){return e instanceof t})},e.prototype.addObject=function(t){return this.addIt("_objects",t)},e.prototype.removeObject=function(t,e){e="undefined"==typeof e||!!e;var n=t,o=this.removeIt("_objects",t);return n&&e&&n.destroy&&n.destroy(),o},e.prototype.findObject=function(t){return!!this.findIt("_objects",t)},e.prototype.componentByType=function(t){for(var e=this._objects,n=this._objects.length,o=0;o<n;o++){var a=e[o],i=a.findBehavior(t);if(i)return i}return null},e.prototype.componentsByType=function(t){for(var e=this._objects,n=this._objects.length,o=[],a=0;a<n;a++){var i=e[a],r=i.findBehaviors(t);r&&(o=o.concat(r))}return o},e.prototype.objectsByName=function(t){for(var e=this._objects,n=this._objects.length,o=[],a=0;a<n;a++){var i=e[a];i.name===t&&o.push(i)}return o},e.prototype.objectByName=function(t){for(var e=this._objects,n=this._objects.length,o=0;o<n;o++){var a=e[o];if(a.name===t)return a}return null},e.prototype.objectsByType=function(t){for(var e=this._objects,n=this._objects.length,o=[],a=0;a<n;a++){var i=e[a];i instanceof t&&o.push(i)}return o},e.prototype.objectByType=function(t){for(var e=this._objects,n=this._objects.length,o=0;o<n;o++){var a=e[o];if(a instanceof t)return a}return null},e.prototype.objectsByComponent=function(t){for(var e=this._objects,n=this._objects.length,o=[],a=0;a<n;a++){var i=e[a];i.findBehavior(t)&&o.push(i)}return o},e.prototype.objectByComponent=function(t){for(var e=this._objects,n=this._objects.length,o=0;o<n;o++){var a=e[o];if(a.findBehavior(t))return a}return null},e.prototype.toString=function(){return this.constructor.name?this.constructor.name+" ("+this.id+")":this.id},e}(i.a);r.sceneCount=0},,,,,,function(t,e,n){"use strict";var o=n(1),a=n(47),i=n(42),r=(n.n(i),n(24));n.d(e,"a",function(){return l});var l=s=function(){function t(t,e){this.sanitizer=t,this.renderer=e,this._dataUrl$=new i.ReplaySubject(1),this.dataUrl$=this._dataUrl$,this._width$=new i.BehaviorSubject("64"),this.width$=this._width$,this._height$=new i.BehaviorSubject("64"),this.height$=this._height$,this._name$=new i.BehaviorSubject(s.INVALID_IMAGE),this.name$=this._name$,this._frame$=new i.BehaviorSubject(0),this.frame$=this._frame$,this.styleBackground="rgba(0,0,0,1)",this._canvasAcquired=!1,s._renderCanvas||(s._renderCanvas=document.createElement("canvas"),s._renderCanvas.width=s._renderCanvas.height=64,s._renderCanvas.style.position="absolute",s._renderCanvas.style.left=s._renderCanvas.style.top="-9000px")}return Object.defineProperty(t.prototype,"width",{set:function(t){this._width$.next(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{set:function(t){this._height$.next(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frame",{set:function(t){this._frame$.value!==t&&(this._frame$.next(t),this._get(this._name$.value))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{set:function(t){return t?(this._name$.next(t),void this._get(t)):void this._name$.next(s.INVALID_IMAGE)},enumerable:!0,configurable:!0}),t.prototype.getRenderContext=function(t,e){if(this._canvasAcquired)throw new Error("Only one rendering canvas is available at a time. Check for calls to this function without corresponding releaseCanvas() calls.");this._canvasAcquired=!0,s._renderCanvas.width=t,s._renderCanvas.height=e;var n=s._renderCanvas.getContext("2d");return n.webkitImageSmoothingEnabled=!1,n.mozImageSmoothingEnabled=!1,n.msImageSmoothingEnabled=!1,n.imageSmoothingEnabled=!1,n},t.prototype.releaseRenderContext=function(){return this._canvasAcquired=!1,s._renderCanvas.toDataURL()},t.prototype._get=function(t){var e=this;return t&&t!==s.INVALID_IMAGE?void this.renderer.getSingleSprite(t,this._frame$.value).then(function(t){var n=parseInt(e._width$.value,10),o=parseInt(e._height$.value,10),a=e.getRenderContext(n,o);a.clearRect(0,0,n,o),a.drawImage(t,0,0,n,o);var i=e.sanitizer.bypassSecurityTrustResourceUrl(e.releaseRenderContext());e._dataUrl$.next(i)}):void this._dataUrl$.next(s.INVALID_IMAGE)},t}();l.INVALID_IMAGE="assets/images/a/blank.gif",__decorate([n.i(o.M)(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],l.prototype,"width",null),__decorate([n.i(o.M)(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],l.prototype,"height",null),__decorate([n.i(o.M)(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],l.prototype,"frame",null),__decorate([n.i(o.M)(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],l.prototype,"name",null),l=s=__decorate([n.i(o._24)({selector:"rpg-sprite",styles:[n(946)],changeDetection:o._25.OnPush,template:'<img [style.width]="width$ | async" [style.height]="height$ | async" [src]="dataUrl$ | async">'}),__metadata("design:paramtypes",[r.r,a.a])],l);var s},,,,,,,,function(t,e,n){"use strict";var o=n(310);n.d(e,"a",function(){return a});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(o.a)},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(120)),i=n(288),r=n(82),l=n(28),s=n(1);n.d(e,"a",function(){return u});var u=c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.map=null,e}return __extends(e,t),e.prototype.collideMove=function(t,e,n){void 0===n&&(n=[]),this.host.scene&&!this.map&&(this.map=this.host.scene.objectByType(r.a));var i=0,l=this.collider&&this.collider.collide(t,e,a.a,n);if(l)for(i=0;i<n.length;i++){var s=n[i];if(s.passable===!0||!s.type)return!1;if(o.indexOf(c.COLLIDE_TYPES,s.type)!==-1)return!0}if(this.map){var u=this.map.getLayers();for(i=0;i<u.length;i++){var p=this.map.getTileData(u[i],t,e);if(p)for(var d=0;d<this.passableKeys.length;d++)if(p[this.passableKeys[d]]===!1)return!0}}return!1},e.prototype.completeMove=function(e){this.host.world.store.dispatch(new l.t(e.to)),t.prototype.completeMove.call(this,e)},e}(i.a);u.COLLIDE_TYPES=["TempleFeatureComponent","StoreFeatureComponent","DialogFeatureComponent","CombatFeatureComponent","sign"],u=c=__decorate([n.i(s._24)({selector:"player-behavior",template:"<ng-content></ng-content>"})],u);var c},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={INVALID_ARGUMENTS:"invalid arguments",DIVIDE_ZERO:"divide by zero operation",CLASS_NOT_IMPLEMENTED:"must be implemented in a subclass",UNSUPPORTED_OPERATION:"this operation is unsupported by the implementation",REQUIRED_ARGUMENT:"argument must be valid",ALREADY_EXISTS:"already exists and would overwrite existing value",INDEX_OUT_OF_RANGE:"index out of range",INVALID_ITEM:"invalid item type or value",COMPONENT_REGISTER_FAIL:"component failed to register with host entity"}},,,,,,,,,function(t,e,n){"use strict";var o=n(70);n.d(e,"a",function(){return a});var a=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.url=t,this.data=e}return t.prototype.load=function(t){return Promise.reject(o.a.CLASS_NOT_IMPLEMENTED)},t.prototype.fetch=function(t){return Promise.reject(o.a.CLASS_NOT_IMPLEMENTED)},t}()},function(t,e,n){"use strict";function o(t){return s+"maps/"+t+".tmx"}function a(t,e){return void 0===e&&(e="wav"),s+"sounds/"+t+"."+e}function i(t,e){for(var n in e)e.hasOwnProperty(n)&&(u.sprites[n]=l.defaults(u.sprites[n]||{},e[n]))}function r(t){return u.sprites[t]}var l=n(4);n.n(l);e.d=o,e.a=a,n.d(e,"e",function(){return u}),e.c=i,e.b=r;var s="assets/",u={sprites:{}}},function(t,e,n){"use strict";var o=n(49);n.d(e,"a",function(){return a});var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tickRateMS=300,e}return __extends(e,t),e.prototype.tick=function(t){},e.prototype.interpolateTick=function(t){},e}(o.a)},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(123)),i=n(48);n.d(e,"a",function(){return r});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tiles=[],e.bounds=new i.a(0,0,10,10),e.dirtyLayers=!1,e._loaded=!1,e}return __extends(e,t),e.prototype.isLoaded=function(){return this._loaded},e.prototype.loaded=function(){this.trigger(e.Events.LOADED,this),this.scene&&this.scene.trigger(e.Events.MAP_LOADED,this),this._loaded=!0},e.prototype.unloaded=function(){this.trigger(e.Events.UNLOADED,this),this.scene&&this.scene.trigger(e.Events.MAP_UNLOADED,this),this._loaded=!1},e.prototype.setMap=function(t){var e=this;if(!t)return!1;this.map&&this.unloaded(),this.map=t,this.bounds=new i.a(0,0,this.map.width,this.map.height);var n=o.sortBy(this.map.tilesets,function(t){return t.firstgid});return this.tiles.length=0,o.each(n,function(t){for(;e.tiles.length<t.firstgid;)e.tiles.push(null);e.tiles=e.tiles.concat(t.tiles)}),this.features=o.where(this.map.layers,{name:"Features"})[0]||[],this.zones=o.where(this.map.layers,{name:"Zones"})[0]||[],this.loaded(),!0},e.prototype.getLayers=function(){return this.map?this.map.layers:[]},e.prototype.getLayer=function(t){return o.where(this.map.layers,{name:t})[0]},e.prototype.getTerrain=function(t,e,n){return this.getTileData(this.getLayer(t),e,n)},e.prototype.getTileData=function(t,e,n){if(!(this.map&&t&&t.data&&this.bounds.pointInRect(e,n)))return null;var o=n*this.map.width+e,a=t.data[o];return this.tiles[a]},e.prototype.getTileGid=function(t,e,n){var o=this.getLayer(t);if(!(this.map&&o&&o.data&&this.bounds.pointInRect(e,n)))return null;var a=n*this.map.width+e;return o.data[a]},e.prototype.getTileMeta=function(t){if(this.tiles.length<=t)return null;var e=o.find(this.map.tilesets,function(e){return e.hasGid(t)});return e?e.getTileMeta(t):null},e}(a.a);r.Events={LOADED:"loaded",UNLOADED:"unloaded",MAP_LOADED:"map:loaded",MAP_UNLOADED:"map:unloaded"}},,,,,,,,,,,,,,,,function(t,e,n){"use strict";function o(t){return r._31(2,[(t()(),r._32(0,null,null,3,"img",[],[[4,"width",null],[4,"height",null],[8,"src",4]],null,null,null,null)),r._36(131072,l.n,[r.X]),r._36(131072,l.n,[r.X]),r._36(131072,l.n,[r.X])],null,function(t,e){var n=e.component,o=r._37(e,0,0,r._38(e,1).transform(n.width$)),a=r._37(e,0,1,r._38(e,2).transform(n.height$)),i=r._37(e,0,2,r._38(e,3).transform(n.dataUrl$));t(e,0,0,o,a,i)})}function a(t){return r._31(0,[(t()(),r._32(0,null,null,1,"rpg-sprite",[],null,null,null,o,d)),r._33(49152,null,0,s.a,[u.r,c.a],null,null)],null,null)}var i=n(456),r=n(1),l=n(8),s=n(60),u=n(24),c=n(47);n.d(e,"b",function(){return d}),e.a=o;var p=[i.a],d=r._30({encapsulation:0,styles:p,data:{}});r._35("rpg-sprite",s.a,a,{width:"width",height:"height",frame:"frame",name:"name"},{},[])},function(t,e,n){"use strict";var o=n(1);n.d(e,"a",function(){return a});var a=function(){function t(){}return t.prototype.getCSSClassMap=function(){if(!this.model)return{};var t=Math.round(this.model.hp/this.model.maxhp*100);return{dead:0===t,critical:t<33,hurt:t<66,fine:t>66}},t.prototype.getProgressBarWidth=function(){var t=0;return this.model&&this.model&&(t=Math.ceil(this.model.hp/this.model.maxhp*100)),t},t}();__decorate([n.i(o.M)(),__metadata("design:type",Object)],a.prototype,"model",void 0),a=__decorate([n.i(o._24)({selector:"rpg-health-bar",styles:[n(941)],template:'\n  <div [ngClass]="getCSSClassMap()" [style.width]="getProgressBarWidth() + \'%\'">\n    <ng-content></ng-content>\n  </div>'})],a)},function(t,e,n){"use strict";var o=n(35);n.d(e,"c",function(){return a}),n.d(e,"f",function(){return i}),n.d(e,"d",function(){return r}),n.d(e,"a",function(){return l}),n.d(e,"b",function(){return s}),n.d(e,"e",function(){return u});var a=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();a.typeId=n.i(o.a)("COMBAT_ENCOUNTER");var i=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();i.typeId=n.i(o.a)("COMBAT_ENCOUNTER_ERROR");var r=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();r.typeId=n.i(o.a)("COMBAT_ENCOUNTER_READY");var l=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();l.typeId=n.i(o.a)("COMBAT_ATTACK");var s=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();s.typeId=n.i(o.a)("COMBAT_VICTORY");var u=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();u.typeId=n.i(o.a)("COMBAT_VICTORY_DONE")},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(114)),i=n(80),r=n(314),l=n(124),s=n(508),u=n(312),c=n(153),p=n(300),d=n(1),h=n(39),f=n(9),m=n(100),_=n(15),g=n(25);n.d(e,"a",function(){return y});var y=function(t){function e(e,n,o){var a=t.call(this)||this;return a.store=e,a.combatService=n,a.gameWorld=o,a.name="attack",a}return __extends(e,t),e.prototype.canBeUsedBy=function(e){var n=["lifemage","deathmage"],a=e.model;return(void 0===a.type||o.indexOf(n,a.type)===-1)&&t.prototype.canBeUsedBy.call(this,e)},e.prototype.act=function(t){var e=this;if(!this.isCurrentTurn())return!1;var p=function(n){t&&t(e,n),e.combat.machine.setCurrentState(a.a.NAME)},d=this.from,h=this.to,f=d.findBehavior(c.a),_=function(){var t=e.combatService.attackCombatant(d.model,h.model),a=h.model.hp-t<=0,c=t>0,_=!1,g=n.i(i.a)(a?"killed":c?_?"miss":"hit":"miss"),y={attacker:d.model,defender:h.model,damage:t};e.store.dispatch(new m.a(y));var v=c?_?"animSmoke.png":"animHit.png":"animMiss.png",b=e.gameWorld.sprites.getSpriteMeta(v);return b?void e.gameWorld.sprites.getSpriteSheet(b.source).then(function(n){var i=n[0].data,c={animation:new r.a({spriteName:"attack",lengthMS:350}),sprite:new l.a({name:"attack",icon:v,meta:b,image:i}),damage:new s.a,sound:new u.a({url:g,volume:.3})};f&&f.setState("Moving"),h.addComponentDictionary(c),c.damage.once("damage:done",function(){f&&f.setState(),a&&o.defer(function(){h.destroy()}),h.removeComponentDictionary(c)});var m={damage:t,attacker:d,defender:h};e.combat.machine.notify("combat:attack",m,p)}):(console.warn("could not find damage animation in sprites metadata: "+v),p())};return f?f.attack(_):o.delay(function(){_()},1e3),!0},e}(p.a);__decorate([n.i(d.M)(),__metadata("design:type",h.a)],y.prototype,"combat",void 0),y=__decorate([n.i(d._24)({selector:"combat-attack-behavior",template:"<ng-content></ng-content>"}),__metadata("design:paramtypes",[f.a,g.a,_.a])],y)},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(1)),i=n(68),r=n(101),l=n(25);n.d(e,"a",function(){return s});var s=u=function(t){function e(e){var n=t.call(this)||this;return n.combatService=e,n.name=u.NAME,n}return __extends(e,t),e.prototype.enter=function(e){t.prototype.enter.call(this,e),this.machine=e,e.currentDone=!1,e.current.scale=1.25,this.current=e.current,e.current&&e.isFriendlyTurn()&&(e.focus=e.current),e.trigger("combat:beginTurn",e.current);var n=null;if(e.isFriendlyTurn()?(console.log("TURN: "+e.current.model.name),n=e.playerChoices[e.current._uid]):(n=e.current.findBehavior(r.a),n&&(n.to=e.getRandomPartyMember(),n.from=e.current)),!n)throw new Error("Invalid Combat Action Choice. This should not happen.");n.to&&this.combatService.isDefeated(n.to.model)&&(n.to=e.getRandomEnemy()),o.defer(function(){n.act(function(t,e){e&&console.error(e)})})},e.prototype.exit=function(e){this.current.scale=1,t.prototype.exit.call(this,e)},e}(i.a);s.NAME="Combat Begin Turn",s=u=__decorate([n.i(a._24)({selector:"combat-begin-turn-state",template:"\n    <ng-content></ng-content>"}),__metadata("design:paramtypes",[l.a])],s);var u},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(1)),i=n(119),r=n(68),l=n(102),s=n(513),u=n(13),c=n(42),p=(n.n(c),n(39));n.d(e,"a",function(){return d});var d=h=function(t){function e(e,n){var o=t.call(this)||this;return o.renderer=e,o.combat=n,o.name=h.NAME,o.pending=[],o.machine=null,o.items=[],o.pointAt=null,o.pointOffset=new u.a,o._pointerPosition$=new c.BehaviorSubject(new u.a),o.pointerPosition$=o._pointerPosition$.distinctUntilChanged(),o}return __extends(e,t),e.prototype.ngAfterViewInit=function(){var t=this;this._timerSubscription=c.Observable.interval(50).do(function(){if(t.pointAt&&t.combat){var e=new u.a(t.pointAt.point);e.y=e.y-t.combat.camera.point.y+t.pointOffset.y,e.x=e.x-t.combat.camera.point.x+t.pointOffset.x;var n=t.combat.worldToScreen(e,t.combat.cameraScale);t._pointerPosition$.next(n)}}).subscribe()},e.prototype.ngOnDestroy=function(){this._timerSubscription.unsubscribe()},e.prototype.enter=function(e){var n=this;if(t.prototype.enter.call(this,e),!e.scene)throw new Error("Invalid Combat Scene");this.machine=e;var a=e.getLiveParty().concat(e.getLiveEnemies());e.turnList=o.shuffle(a),e.current=e.turnList.shift(),e.currentDone=!0,this.pending=e.getLiveParty(),e.playerChoices={};var i,r={choose:function(t){e.playerChoices[t.from._uid]=t,n.pending=o.filter(n.pending,function(e){return t.from._uid!==e._uid}),console.log(t.from.model.name+" chose "+t.getActionName()),0===n.pending.length&&e.setCurrentState(l.a.NAME)},players:this.pending,enemies:e.getLiveEnemies()},u=r.players.slice(),c=function(){var t=u.shift();t&&(i.current=t,i.setCurrentState(s.a.NAME))},p=function(t){i.data.choose(t),c()};i=new s.b(this,e.scene,r,p),c()},e.prototype.exit=function(e){return this.machine=null,t.prototype.exit.call(this,e)},e.prototype.setPointerTarget=function(t,e,n){void 0===e&&(e="right"),void 0===n&&(n=new u.a);var o=this.pointerElementRef.nativeElement;this.renderer.setElementClass(o,"left",!1),this.renderer.setElementClass(o,"right",!1),this.renderer.setElementClass(o,e,!0),this.pointAt=t,this.pointOffset=n},e.prototype.addPointerClass=function(t){this.renderer.setElementClass(this.pointerElementRef.nativeElement,t,!0)},e.prototype.removePointerClass=function(t){this.renderer.setElementClass(this.pointerElementRef.nativeElement,t,!1)},e.prototype.hidePointer=function(){this.renderer.setElementClass(this.pointerElementRef.nativeElement,"hidden",!0)},e.prototype.showPointer=function(){this.renderer.setElementClass(this.pointerElementRef.nativeElement,"hidden",!1)},e}(r.a);d.NAME="Combat Choose Actions",__decorate([n.i(a._21)("combatPointer"),__metadata("design:type",a.K)],d.prototype,"pointerElementRef",void 0),__decorate([n.i(a.M)(),__metadata("design:type",Array)],d.prototype,"items",void 0),__decorate([n.i(a.M)(),__metadata("design:type",i.a)],d.prototype,"pointAt",void 0),d=h=__decorate([n.i(a._24)({selector:"combat-choose-action-state",styles:[n(950)],template:'<ul *ngIf="items.length > 0" class="ebp action-menu">\n  <li *ngFor="let item of items" (click)="item.select()" [innerText]="item.label"></li>\n</ul>\n<span #combatPointer\n      class="point-to-player"\n      [class.hidden]="!pointAt"\n      [style.left]="(pointerPosition$ | async)?.x + \'px\'"\n      [style.top]="(pointerPosition$ | async)?.y + \'px\'"\n></span>\n<ng-content></ng-content>'}),__param(1,n.i(a.e)(n.i(a._26)(function(){return p.a}))),__metadata("design:paramtypes",[a.L,p.a])],d);var h},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(120)),i=n(82),r=n(13),l=n(48),s=n(301);n.d(e,"a",function(){return u});var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.loaded=function(){t.prototype.loaded.call(this),this.musicUrl="",this.map.properties&&this.map.properties.music&&(this.musicUrl=this.map.properties.music),this.buildFeatures()},e.prototype.destroy=function(){return this.unloaded(),t.prototype.destroy.call(this)},e.prototype.unloaded=function(){this.removeFeaturesFromScene(),t.prototype.unloaded.call(this)},e.prototype.getFeature=function(t){return o.find(this.features.objects,function(e){return e.name===t})},e.prototype.getEntryPoint=function(){var t=o.where(this.features.objects,{type:"PortalFeatureComponent"})[0];return t?new r.a(t.x/t.width,t.y/t.height):new r.a(-1,-1)},e.prototype.addFeaturesToScene=function(){},e.prototype.removeFeaturesFromScene=function(){o.each(this.features.objects,function(t){var e=t._object;delete t._object,e&&e.destroy()})},e.prototype.buildFeatures=function(){return!0},e.prototype.createFeatureObject=function(t){var e=o.extend({},t.properties||{},{tileMap:this,type:t.type,x:Math.round(t.x/this.map.tilewidth),y:Math.round(t.y/this.map.tileheight)}),n=new a.a(e);this.scene&&this.scene.world&&this.scene.world.mark(n);var i=o.find(s.a,function(e){return e.name===t.type});if(t.type&&i){var r=new i;if(!n.addBehavior(r))throw new Error("Component "+r.name+" failed to connect to host "+this.name)}return n},e.prototype.getCombatZones=function(t){var e={map:null,target:null,targetPoint:t,fixed:!1};this.map&&this.map.properties&&this.map.properties&&"undefined"!=typeof this.map.properties.combatZone&&(e.map=this.map.properties.combatZone);var n=1/this.map.tilewidth,a=o.map(this.zones.objects,function(t){var e=t.x*n,o=t.y*n,a=t.width*n,i=t.height*n;return{bounds:new l.a(e,o,a,i),name:t.name}}),i=o.find(a,function(e){return e.bounds.pointInRect(t)&&e.name});return i&&(e.target=i.name),e},e.prototype.toString=function(){return this.map?this.map.url:"no-data"},e}(i.a)},function(t,e,n){"use strict";var o=n(1);n.d(e,"a",function(){return a});var a=function(){function t(){this.eventName=this.whichTransitionEvent()}return t.prototype.enter=function(t,e){var n=this;return new Promise(function(o){t.classList.add(e);var a,i=n.getTransitionDuration(t,!0),r=function(){clearTimeout(a),t.removeEventListener(n.eventName,r),o()};a=setTimeout(function(){return r()},i),t.addEventListener(n.eventName,r)})},t.prototype.leave=function(t,e){var n=this;return new Promise(function(o){var a,i=n.getTransitionDuration(t,!0),r=function(){clearTimeout(a),t.removeEventListener(n.eventName,r),o()};a=setTimeout(function(){return r()},i),t.addEventListener(n.eventName,r),t.classList.remove(e)})},t.prototype.getTransitionDuration=function(t,e){void 0===e&&(e=!1);for(var n=["moz","webkit","ms","o","khtml"],o=window.getComputedStyle(t),a=0;a<n.length;a++){var i=o["-"+n[a]+"-transition-duration"];if(i){if(i=i.indexOf("ms")>-1?parseFloat(i):1e3*parseFloat(i),e){var r=o["-"+n[a]+"-transition-delay"];"undefined"!=typeof r&&(i+=r.indexOf("ms")>-1?parseFloat(r):1e3*parseFloat(r))}return i}}return 0},t.prototype.whichTransitionEvent=function(){var t,e=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(void 0!==e.style[t])return n[t]},t}();a=__decorate([n.i(o.d)()],a)},,,,,function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(13)),i=n(81),r=n(1);n.d(e,"a",function(){return l});var l=s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._tasks=[],e._animationKeys=[],e._currentAnimation=null,e}return __extends(e,t),e.prototype.play=function(t){var e=t;e.elapsed=0,e.move&&(e.startFrame=this.host.frame,e.start=new a.a(this.host.point),e.target=new a.a(this.host.point).clone().add(e.move),e.value=new a.a(this.host.point)),"undefined"==typeof e.duration&&(e.duration=0),this._tasks.push(e)},e.prototype.stop=function(t){for(var e=0;e<this._tasks.length;e++){var n=this._tasks[e];n.name===t.name&&(n.complete=!0)}},e.prototype.removeCompleteTasks=function(){for(var t=0;t<this._tasks.length;t++){var e=this._tasks[t];e.complete===!0&&(this._tasks.splice(t,1),e.done&&e.done(e),e.callback&&e.callback(e),this.trigger(s.EVENTS.Stopped,{task:e,component:this}),t--)}},e.prototype.interpolateTick=function(e){t.prototype.interpolateTick.call(this,e),this.update(e),this.removeCompleteTasks()},e.prototype.update=function(t){var e=this;0!==this._tasks.length&&o.each(this._tasks,function(n){if(n.elapsed>n.duration&&(n.complete=!0,n.elapsed=n.duration),n.duration>0){var o=n.elapsed/n.duration;if(n.move&&n.move instanceof a.a){var i=n.value.interpolate(n.start,n.target,o);e.host.point.x=i.x,e.host.point.y=i.y}if(n.frames&&n.frames.length){var r=Math.round(e.interpolate(0,n.frames.length-1,o)),l=n.frames[r];e.host.frame=l}}n.complete||(n.elapsed+=t)})},e.prototype.interpolate=function(t,e,n){return n=Math.min(Math.max(n,0),1),t*(1-n)+e*n},e.prototype.playChain=function(t,e){"undefined"!=typeof e&&t.push({name:"Chain Callback",duration:0,callback:e}),this._animationKeys=t,this._animateNext()},e.prototype._animateNext=function(){var t=this;0!==this._animationKeys.length&&(this._currentAnimation=this._animationKeys.shift(),this._currentAnimation.done=function(){o.defer(function(){t._animateNext()})},this.play(this._currentAnimation))},e}(i.a);l.EVENTS={Started:"start",Stopped:"stop",Repeated:"repeat"},l=s=__decorate([n.i(r._24)({selector:"animated-behavior",template:"<ng-content></ng-content>"})],l);var s},function(t,e,n){"use strict";var o=n(123),a=n(49),i=n(48),r=n(1);n.d(e,"a",function(){return l});var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collideBox=new i.a(0,0,1,1),e.resultsArray=[],e}return __extends(e,t),e.prototype.collide=function(t,e,n,a){return void 0===n&&(n=o.a),void 0===a&&(a=[]),!(!this.host||!this.host.scene)&&(this.collideBox.point.x=t,this.collideBox.point.y=e,this.host.scene.db.queryRect(this.collideBox,n,a))},e.prototype.collideFirst=function(t,e,n){if(void 0===n&&(n=o.a),!this.host||!this.host.scene)return null;this.collideBox.point.x=t,this.collideBox.point.y=e,this.resultsArray.length=0;var a=this.host.scene.db.queryRect(this.collideBox,n,this.resultsArray);return a?this.resultsArray[0]:null},e}(a.a);l=__decorate([n.i(r._24)({selector:"collision-behavior",template:"<ng-content></ng-content>"})],l)},function(t,e,n){"use strict";function o(t,e){return Object.assign({eid:a(t.id)},t,e||{})}function a(t){return t+"-"+n.i(i.c)()}var i=n(35);n.d(e,"c",function(){return r}),e.a=o,e.b=a;var r="1LXSRyupQanOYeZv-h7lgSwaAzB-TxwfDPFJyZqnaewc"},function(t,e,n){"use strict";var o=n(68),a=n(1);n.d(e,"a",function(){return i});var i=r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=r.NAME,e}return __extends(e,t),e.prototype.enter=function(e){t.prototype.enter.call(this,e);var n={enemies:e.enemies.toArray(),party:e.party.toArray()};e.notify("combat:defeat",n,function(){alert("defeat is not implemented"),window.location.reload(!0)})},e}(o.a);i.NAME="Combat Defeat",i=r=__decorate([n.i(a._24)({selector:"combat-defeat-state",template:"<ng-content></ng-content>"})],i);var r},function(t,e,n){"use strict";var o=n(68),a=n(102),i=n(103),r=n(113),l=n(116),s=n(1),u=n(25);n.d(e,"a",function(){return c});var c=p=function(t){function e(e){var n=t.call(this)||this;return n.combatService=e,n.name=p.NAME,n}return __extends(e,t),e.prototype.enter=function(e){for(t.prototype.enter.call(this,e),e.current=null;e.turnList.length>0&&!e.current;)e.current=e.turnList.shift(),e.current&&this.combatService.isDefeated(e.current.model)&&(e.current=null);var n=e.current?a.a.NAME:i.a.NAME;if(e.partyDefeated()?n=r.a.NAME:e.enemiesDefeated()&&(n=l.a.NAME),!n)throw new Error("Invalid transition from end turn");e.setCurrentState(n)},e}(o.a);c.NAME="Combat End Turn",c=p=__decorate([n.i(s._24)({selector:"combat-end-turn-state",template:"\n    <ng-content></ng-content>"}),__metadata("design:paramtypes",[u.a])],c);var p},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(68)),i=n(103),r=n(1),l=n(11);n.d(e,"a",function(){return s});var s=u=function(t){function e(e){var n=t.call(this)||this;return n.notify=e,n.name=u.NAME,n}return __extends(e,t),e.prototype.enter=function(e){var n=this;t.prototype.enter.call(this,e),o.defer(function(){var t=e.encounter,o=function(){e.setCurrentState(i.a.NAME)};if(t&&t.message){var a=t.message.slice(),r=a.pop();a.forEach(function(t){return n.notify.show(t,null,0)}),n.notify.show(r,o,0)}else o()})},e}(a.a);s.NAME="Combat Started",s=u=__decorate([n.i(r._24)({selector:"combat-start-state",template:"<ng-content></ng-content>"}),__metadata("design:paramtypes",[l.a])],s);var u},function(t,e,n){"use strict";var o=n(68),a=n(1),i=n(9),r=n(31),l=n(35),s=n(28),u=n(112),c=n(510),p=n(100);n.d(e,"a",function(){return d});var d=h=function(t){function e(e){var n=t.call(this)||this;return n.store=e,n.name=h.NAME,n.items$=n.store.select(r.d).combineLatest(n.store.select(r.e),n.store.select(r.f),function(t,e,n){return n.concat(t).concat(e)}),n}return __extends(e,t),e.prototype.awardExperience=function(t,e){var o=e.exp+t,a=__assign({},e,{exp:o}),i=n.i(c.a)(e.level+1);return o>=i&&(a=this.awardLevelUp(e)),a},e.prototype.awardLevelUp=function(t){var e=t.level+1,o=n.i(c.b)(e,t);return __assign({},t,{level:e,maxhp:o,hp:o,attack:n.i(c.c)(e,t),speed:n.i(c.d)(e,t),defense:n.i(c.e)(e,t),magic:n.i(c.f)(e,t)})},e.prototype.enter=function(e){var o=this;t.prototype.enter.call(this,e),this.store.select(r.c).take(1).combineLatest(this.items$,function(t,e){var a=t.party.toArray(),i=t.enemies.toArray();n.i(l.b)(a.length>0,"no living players during combat victory state");var r=0,c=0,d=[];t.enemies.forEach(function(t){r+=t.gold||0,c+=t.exp||0}),"fixed"===t.type&&(t.gold>0&&(r+=t.gold),t.experience>0&&(c+=t.experience),t.items&&t.items.length>0&&(d=d.concat(t.items))),o.store.dispatch(new s.a(r));var h=[];d.forEach(function(t){var a=e.find(function(e){return e.id===t});n.i(l.b)(!!a,"cannot award unknown item "+t);var i=n.i(u.a)(a);o.store.dispatch(new s.b(i))});var f=Math.round(c/a.length),m=[];a=a.map(function(t){var e=o.awardExperience(f,t);return e.level>t.level&&m.push(t),e});var _={party:a,enemies:i,levels:m,items:h,gold:r,exp:c};o.store.dispatch(new p.b(_))}).subscribe()},e}(o.a);d.NAME="Combat Victory",d=h=__decorate([n.i(a._24)({selector:"combat-victory-state",template:"\n    <ng-content></ng-content>"}),__metadata("design:paramtypes",[i.a])],d);var h},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(309)),i=n(115),r=n(1),l=n(54),s=n(236),u=n(25);n.d(e,"a",function(){return c});var c=function(t){function e(e){var n=t.call(this)||this;return n.combatService=e,n.defaultState=i.a.NAME,n.states=[],n.turnList=[],n.playerChoices={},n.currentDone=!1,n}return __extends(e,t),e.prototype.ngAfterViewInit=function(){this.addStates(this.childStates.toArray()),this.setCurrentState(this.getState(this.defaultState))},e.prototype.isFriendlyTurn=function(){var t=this;return!(!this.current||!this.party.find(function(e){return e._uid===t.current._uid}))},e.prototype.getLiveParty=function(){var t=this;return this.party.filter(function(e){return!t.combatService.isDefeated(e.model)})},e.prototype.getLiveEnemies=function(){var t=this;return this.enemies.filter(function(e){return!t.combatService.isDefeated(e.model)})},e.prototype.getRandomPartyMember=function(){for(var t=o.shuffle(this.party.toArray());t.length>0;){var e=t.shift();if(!this.combatService.isDefeated(e.model))return e}return null},e.prototype.getRandomEnemy=function(){for(var t=o.shuffle(this.enemies.toArray());t.length>0;){var e=t.shift();if(!this.combatService.isDefeated(e.model))return e}return null},e.prototype.partyDefeated=function(){return 0===this.getLiveParty().length},e.prototype.enemiesDefeated=function(){return 0===this.getLiveEnemies().length},e}(a.a);__decorate([n.i(r.M)(),__metadata("design:type",l.a)],c.prototype,"scene",void 0),__decorate([n.i(r.M)(),__metadata("design:type",Object)],c.prototype,"encounter",void 0),__decorate([n.i(r.M)(),__metadata("design:type",r._23)],c.prototype,"party",void 0),__decorate([n.i(r.M)(),__metadata("design:type",r._23)],c.prototype,"enemies",void 0),__decorate([n.i(r.M)(),__metadata("design:type",s.a)],c.prototype,"view",void 0),__decorate([n.i(r._22)("start,beginTurn,chooseAction,endTurn,defeat,victory,escape"),__metadata("design:type",r._23)],c.prototype,"childStates",void 0),c=__decorate([n.i(r._24)({selector:"combat-state-machine",template:'\n    <combat-start-state #start></combat-start-state>\n    <combat-begin-turn-state #beginTurn></combat-begin-turn-state>\n    <combat-choose-action-state\n      [pointAt]="current"\n      #chooseAction></combat-choose-action-state>\n    <combat-end-turn-state #endTurn></combat-end-turn-state>\n    <combat-defeat-state #defeat></combat-defeat-state>\n    <combat-victory-state #victory></combat-victory-state>\n    <combat-escape-state #escape></combat-escape-state>\n  '
}),__metadata("design:paramtypes",[u.a])],c)},function(t,e,n){"use strict";var o=n(81),a=n(516),i=n(1);n.d(e,"a",function(){return l}),n.d(e,"b",function(){return s});var r;(function(t){t[t.LEFT=10]="LEFT",t[t.RIGHT=4]="RIGHT",t[t.DOWN=7]="DOWN",t[t.UP=1]="UP",t[t.LEFTALT=11]="LEFTALT",t[t.RIGHTALT=5]="RIGHTALT",t[t.DOWNALT=8]="DOWNALT",t[t.UPALT=2]="UPALT"})(r||(r={}));var l;(function(t){t[t.WEST=0]="WEST",t[t.EAST=1]="EAST",t[t.SOUTH=2]="SOUTH",t[t.NORTH=3]="NORTH"})(l||(l={}));var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._animator=new a.a,e.heading=l.WEST,e.animating=!1,e}return __extends(e,t),e.prototype.setHeading=function(t,e){switch(this._animator.sourceAnims||this._animator.setAnimationSource(this.host.icon),this.heading=t,this.heading){case l.SOUTH:this._animator.setAnimation("down");break;case l.NORTH:this._animator.setAnimation("up");break;case l.EAST:this._animator.setAnimation("right");break;case l.WEST:this._animator.setAnimation("left");break;default:console.warn("unsupported heading direction: "+this.heading)}this._animator.updateTime(0),this.animating=e},e.prototype.setMoving=function(t){this.animating=t},e.prototype.interpolateTick=function(e){t.prototype.interpolateTick.call(this,e),this.animating&&this._animator.updateTime(e),this.host.frame=this._animator.getFrame()},e}(o.a);s=__decorate([n.i(i._24)({selector:"player-render-behavior",template:"<ng-content></ng-content>"})],s)},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(238));n.d(e,"a",function(){return i});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="player",e}return __extends(e,t),e.prototype.getSpells=function(){console.warn("no spell data available in GameEntityObject.getSpells");var t=[],e=this.model,n=e.level,a=e.type;return o.filter(t,function(t){return t.level<=n&&o.indexOf(t.usedby,a)!==-1})},e}(a.a)},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(238));n.d(e,"a",function(){return i});var i=function(t){function e(e){var n=t.call(this)||this;return o.extend(n,o.defaults({},e)),n.feature=e,n.point.x=e.x,n.point.y=e.y,n.frame="undefined"!=typeof e.frame?e.frame:0,n.groups="string"==typeof e.groups?e.groups.split("|"):e.groups,n}return __extends(e,t),e}(a.a)},function(t,e,n){"use strict";var o=n(105),a=n(26),i=n(15),r=n(1),l=n(122),s=n(47),u=n(9),c=n(83),p=n(302),d=n(53),h=n(25),f=n(11),m=n(213),_=n(217);n.d(e,"b",function(){return o.a}),n.d(e,"d",function(){return f.a}),n.d(e,"c",function(){return a.a}),n.d(e,"a",function(){return g});var g=[o.a,a.a,i.a,s.a,p.a,f.a,h.a,_.a,m.a,d.a],y=v=function(){function t(){}return t.forRoot=function(){return{ngModule:v,providers:g}},t}();y=v=__decorate([n.i(r.x)({providers:g,imports:[l.a,u.b,c.a]})],y);var v},function(t,e,n){"use strict";var o=n(1),a=n(27),i=n(96),r=n(8),l=(n(304),n(303),n(70),n(13));n.d(e,"b",function(){return l.a});n(48),n(79),n(233),n(308),n(305),n(229),n(306),n(307),n(173),n(232),n(230),n(231);n.d(e,"a",function(){return u});var s=[a.a],u=c=function(){function t(){}return t.forRoot=function(){return{ngModule:c,providers:s}},t}();u=c=__decorate([n.i(o.x)({providers:s,imports:[i.a,r.c]})],u);var c},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(303)),i=n(13);n.d(e,"a",function(){return r});var r=function(t){function e(n){var a=t.call(this)||this;return a._uid="scene-object-"+e.objectCount++,o.extend(a,o.defaults(n||{}),{point:new i.a(0,0),size:new i.a(1,1),enabled:!0}),a}return __extends(e,t),e.prototype.tick=function(t){if(this.enabled)for(var e=this._connectedBehaviors,n=this._connectedBehaviors.length,o=0;o<n;o++){if(!e[o])throw new Error("Component deleted during tick, use _.defer to delay removal until the callstack unwinds");e[o].tick&&e[o].tick(t)}},e.prototype.interpolateTick=function(t){if(this.enabled)for(var e=this._connectedBehaviors,n=this._connectedBehaviors.length,o=0;o<n;o++){if(!e[o])throw new Error("Component deleted during interpolateTick, delay removal until the callstack unwinds");e[o].interpolateTick&&e[o].interpolateTick(t)}},e.prototype.destroy=function(){o.each(this._connectedBehaviors,function(t){t.disconnectBehavior()}),this._connectedBehaviors.length=0,this.scene&&this.scene.removeObject(this,!1)},e.prototype.onAddToScene=function(t){this.syncBehaviors()},e.prototype.addComponentDictionary=function(t,e){var n=this,a=null;return o.each(t,function(t,e){a||n.addBehavior(t,!0)||(a=t)}),a?console.log("Failed to add component set to host. Component "+a.toString()+" failed to connect to host."):this.syncBehaviors(),!a},e.prototype.removeComponentDictionary=function(t,e){var n=this._connectedBehaviors.length,a=o.map(t,function(t){return t.id});this._connectedBehaviors=o.filter(this._connectedBehaviors,function(t){return o.indexOf(a,t.id)===-1||(t.disconnectBehavior()===!1||(t.host=null,!1))});var i=this._connectedBehaviors.length===n;return i&&e!==!0&&this.syncBehaviors(),i},e.prototype.toString=function(){var t=this.constructor,e=this.name;return t&&"Function"!==t.name&&(e=t.name||(this.toString().match(/function (.+?)\(/)||[,""])[1]),o.each(this._connectedBehaviors,function(t){e+=", "+t}),e},e}(a.a);r.objectCount=0},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(49));n.d(e,"a",function(){return i});var i=function(t){function e(e){var n=t.call(this)||this;return n.frame=0,"undefined"!=typeof e&&o.extend(n,e),n}return __extends(e,t),Object.defineProperty(e.prototype,"scale",{get:function(){return this.host?this.host.scale:1},enumerable:!0,configurable:!0}),e.prototype.syncBehavior=function(){return this.host.world&&this.setSprite(this.icon,this.frame),t.prototype.syncBehavior.call(this)},e.prototype.setSprite=function(t,e){var n=this;return void 0===e&&(e=0),new Promise(function(o,a){return t===n.icon&&n.image&&n.meta?o(n.icon):(n.icon=t,t?(n.meta=n.host.world.sprites.getSpriteMeta(t),void n.host.world.sprites.getSpriteSheet(n.meta.source).then(function(t){n.image=t[0].data,n.frame=e,o(n.icon)}).catch(a)):(n.meta=null,o(null)))})},e}(a.a)},,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var o=n(1),a=n(8),i=n(110),r=n(111),l=n(145);n.d(e,"a",function(){return u});var s=[i.a,r.a,l.a],u=c=function(){function t(){}return t.forRoot=function(){return{ngModule:c}},t}();u=c=__decorate([n.i(o.x)({declarations:s,exports:s,imports:[a.c]})],u);var c},function(t,e,n){"use strict";var o=n(1),a=n(49),i=n(52),r=(n.n(i),n(15));n.d(e,"a",function(){return l});var l=function(t){function e(e){var n=t.call(this)||this;return n.gameWorld=e,n._icon$=new i.BehaviorSubject(null),n.icon$=n._icon$,n.meta=null,n.image=null,n}return __extends(e,t),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon$.value},set:function(t){this._icon$.next(t)},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var t=this;this._subscription=this.icon$.distinctUntilChanged().do(function(e){return e?(t.meta=t.gameWorld.sprites.getSpriteMeta(e),void(t.meta&&t.gameWorld.sprites.getSpriteSheet(t.meta.source).then(function(e){t.image=e[0].data}))):(t.meta=null,void(t.image=null))}).subscribe()},e.prototype.ngOnDestroy=function(){this._subscription.unsubscribe()},e}(a.a);__decorate([n.i(o.M)(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],l.prototype,"icon",null),l=__decorate([n.i(o._24)({selector:"sprite-render-behavior",template:"\n    <ng-content></ng-content>"}),__metadata("design:paramtypes",[r.a])],l)},function(t,e,n){"use strict";var o=n(1),a=n(8),i=n(289),r=n(207),l=n(290),s=n(292),u=n(293),c=n(291),p=n(294),d=n(97),h=n(437),f=n(285);n.d(e,"a",function(){return g});var m=i.a.concat(r.b,l.a,c.a,s.a,u.a,p.a),_=r.c.concat(l.b),g=y=function(){function t(){}return t.forRoot=function(){return{ngModule:y}},t}();g=y=__decorate([n.i(o.x)({declarations:m,exports:m,providers:_,imports:[f.e,a.c,h.FlexLayoutModule,d.x,d.y,d.B,d.C,d.D,d.E,d.G]})],g);var y},function(t,e,n){"use strict";var o=n(1),a=n(21);n.d(e,"a",function(){return i});var i=function(){function t(t){this.loadingService=t}return t}();i=__decorate([n.i(o._24)({selector:"loading",changeDetection:o._25.OnPush,template:'\n  <div class="loading fade" *ngIf="loadingService.loading$ | async">\n    <div class="loading-wrapper">\n      <div class="loading-wrapper-inner hero-container">\n        <h1>\n          <a target="_blank" href="https://github.com/justindujardin/angular-rpg">{{loadingService.title$ | async}}</a>\n        </h1>\n        <p>{{loadingService.message$ | async}}</p>\n      </div>\n    </div>\n  </div>'}),__metadata("design:paramtypes",[a.a])],i)},function(t,e,n){"use strict";var o=n(1),a=n(121),i=n(21);n.d(e,"a",function(){return r});var r=function(){function t(t,e,n){this.notify=t,this.loadingService=e,this.element=n,t.container=n.nativeElement}return t}();r=__decorate([n.i(o._24)({selector:"rpg-notification",styles:[n(942)],template:'<span class="message" \n      [innerText]="notify.message" \n      [class.loading]="loadingService.loading$ | async">\n</span>'}),__metadata("design:paramtypes",[a.d,i.a,o.K])],r)},function(t,e,n){"use strict";var o=n(1),a=n(121),i=n(9),r=n(31),l=n(28),s=n(198),u=n(53);n.d(e,"a",function(){return c});var c=function(){function t(t,e,n,o){this.game=t,this.store=e,this.gameStateService=n,this.notify=o,this.page="party",this.open=!1,this.partyGold$=this.store.select(r.g),this.party$=this.store.select(r.h)}return t.prototype.resetGame=function(){this.store.dispatch(new l.n)},t.prototype.saveGame=function(){this.store.dispatch(new l.q)},t}();__decorate([n.i(o.M)(),__metadata("design:type",String)],c.prototype,"page",void 0),__decorate([n.i(o.M)(),__metadata("design:type",Boolean)],c.prototype,"open",void 0),c=__decorate([n.i(o._24)({selector:"party-menu",styles:[n(944)],template:n(679),animations:[n.i(s.f)("card",[n.i(s.g)(":enter",[n.i(s.c)({transform:"translateY(100%)"}),n.i(s.h)("110ms",n.i(s.c)({transform:"translateY(0)"}))]),n.i(s.g)(":leave",[n.i(s.c)({transform:"translateY(0)"}),n.i(s.h)("110ms",n.i(s.c)({transform:"translateY(100%)"}))])]),n.i(s.f)("toolbar",[n.i(s.g)(":enter",[n.i(s.c)({transform:"translateY(-100%)"}),n.i(s.h)("110ms",n.i(s.c)({transform:"translateY(0)"}))]),n.i(s.g)(":leave",[n.i(s.c)({transform:"translateY(0)"}),n.i(s.h)("110ms",n.i(s.c)({transform:"translateY(-100%)"}))])]),n.i(s.f)("fab",[n.i(s.g)(":enter",[n.i(s.c)({transform:"translateY(100%)"}),n.i(s.h)("110ms",n.i(s.c)({transform:"translateY(0)"}))]),n.i(s.g)(":leave",[n.i(s.c)({transform:"translateY(0)"}),n.i(s.h)("110ms",n.i(s.c)({transform:"translateY(100%)"}))])])]}),__metadata("design:paramtypes",[a.c,i.a,u.a,a.d])],c)},function(t,e,n){"use strict";var o=n(35);n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"d",function(){return l});var a=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();a.typeId=n.i(o.a)("ENTITY_ADD_BEING");var i=function(){function t(e){this.type=t.typeId,this.payload=e}return t}();i.typeId=n.i(o.a)("ENTITY_REMOVE_BEING");var r=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();r.typeId=n.i(o.a)("ENTITY_ADD_ITEM");var l=function(){function t(e){this.type=t.typeId,this.payload=e}return t}();l.typeId=n.i(o.a)("ENTITY_REMOVE_ITEM")},function(t,e,n){"use strict";var o=n(35);n.d(e,"a",function(){return a}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"d",function(){return l}),n.d(e,"e",function(){return s});var a=function(){function t(e){this.type=t.typeId,this.payload=e}return t}();a.typeId=n.i(o.a)("GAME_DATA_FETCH");var i=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();i.typeId=n.i(o.a)("GAME_DATA_FETCH_SUCCESS");var r=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();r.typeId=n.i(o.a)("GAME_DATA_FETCH_FAIL");var l=function(){function t(e,n){this.type=t.typeId,this.payload={sheet:e,data:n}}return t}();l.typeId=n.i(o.a)("DATA_ADD_SHEET");var s=function(){function t(e){this.type=t.typeId,this.payload=e}return t}();s.typeId=n.i(o.a)("DATA_REMOVE_SHEET")},function(t,e,n){"use strict";var o=n(35);n.d(e,"a",function(){return a}),n.d(e,"d",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return l});var a=function(){function t(e){this.payload=e,this.type=t.typeId}return t}();a.typeId=n.i(o.a)("SPRITE_REGISTER_MAP");var i=function(){function t(e){this.type=t.typeId,this.payload=e}return t}();i.typeId=n.i(o.a)("SPRITES_LOAD");var r=function(){function t(e){this.type=t.typeId,this.payload=e}return t}();r.typeId=n.i(o.a)("SPRITES_LOAD_SUCCESS");var l=function(){function t(e){this.type=t.typeId,this.payload=e}return t}();l.typeId=n.i(o.a)("SPRITES_LOAD_FAIL")},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(1)),i=n(81),r=n(118),l=n(110),s=n(13),u=n(25);n.d(e,"a",function(){return p});var c;(function(t){t[t.DEFAULT=10]="DEFAULT",t[t.SWING=1]="SWING",t[t.INJURED=2]="INJURED",t[t.WALK=3]="WALK",t[t.STRIKE=3]="STRIKE",t[t.CELEBRATE=4]="CELEBRATE",t[t.DEAD=5]="DEAD"})(c||(c={}));var p=function(t){function e(e){var n=t.call(this)||this;return n.combatService=e,n._elapsed=0,n._renderFrame=3,n.state="",n.animating=!1,n.animator=null,n.attackDirection=r.a.WEST,n}return __extends(e,t),e.prototype.syncBehavior=function(){return this.animator=this.host.findBehavior(l.a),t.prototype.syncBehavior.call(this)},e.prototype.setState=function(t){void 0===t&&(t="Default"),this.state=t},e.prototype.attack=function(t,e){this._attack(e,this.getAttackAnimation(t))},e.prototype.magic=function(t,e){this._attack(e,this.getMagicAnimation(t))},e.prototype.getForwardDirection=function(){return this.attackDirection===r.a.WEST?-1:1},e.prototype.getBackwardDirection=function(){return this.attackDirection===r.a.WEST?1:-1},e.prototype.getForwardFrames=function(){return this.attackDirection===r.a.WEST?[9,11,10]:[3,5,4]},e.prototype.getBackwardFrames=function(){return this.attackDirection===r.a.WEST?[10,11,9]:[4,5,3]},e.prototype.getAttackFrames=function(){return this.attackDirection===r.a.WEST?[12,13,14,15,14,13,12]:[4,5,6,7,6,5,4]},e.prototype.getMagicAnimation=function(t){var e=this;return[{name:"Prep Animation",callback:function(){e.host.setSprite(e.host.icon.replace(".png","-magic.png"),19)}},{name:"Magic cast",repeats:0,duration:1e3,frames:[19,18,17,16,15],callback:function(){t&&t()}},{name:"Back to rest",repeats:0,duration:1e3,frames:[15,16,17,18,19],callback:function(){e.host.setSprite(e.host.icon.replace("-magic.png",".png"),10)}}]},e.prototype.getAttackAnimation=function(t){var e=this;return[{name:"Move Forward for Attack",repeats:0,duration:250,frames:this.getForwardFrames(),move:new s.a(this.getForwardDirection(),0),callback:function(){var t=e.host.icon.replace(".png","-attack.png");e.host.world.sprites.getSpriteMeta(t)&&e.host.setSprite(t,12)}},{name:"Strike at Opponent",repeats:1,duration:100,frames:this.getAttackFrames(),callback:function(){e.host.setSprite(e.host.icon.replace("-attack.png",".png"),10),t&&t()}},{name:"Return to Party",duration:250,repeats:0,frames:this.getBackwardFrames(),move:new s.a(this.getBackwardDirection(),0)}]},e.prototype.moveForward=function(t){this._playAnimation([{name:"Move Forward",repeats:0,duration:250,frames:this.getForwardFrames(),move:new s.a(this.getForwardDirection(),0)}],t)},e.prototype.moveBackward=function(t){this._playAnimation([{name:"Move Backward",repeats:0,duration:250,frames:this.getBackwardFrames(),move:new s.a(this.getBackwardDirection(),0)}],t)},e.prototype._playAnimation=function(t,e){var n=this;if(this.animator&&!this.animating){var a=o.map(t,function(t){var e=o.extend({},t);return"undefined"!=typeof e.move&&(e.move=e.move.clone()),e});this.animating=!0,this.animator.playChain(a,function(){n.animating=!1,e&&e()})}},e.prototype._attack=function(t,e){var n=this;if(this.animator&&!this.animating){var a=o.map(e,function(t){var e=o.extend({},t);return"undefined"!=typeof e.move&&(e.move=e.move.clone()),e});this.animating=!0,this.animator.playChain(a,function(){n.animating=!1,t&&t()})}},e.prototype.interpolateTick=function(e){if(t.prototype.interpolateTick.call(this,e),!this.animating){var n=this._elapsed/this.tickRateMS,o=n>0&&n<.5,a=c.DEFAULT;switch(this.state){case"Injured":a=c.DEFAULT;break;case"Dead":a=c.DEFAULT;break;case"Attacking":a=o?c.STRIKE:c.SWING}this.host.frame=this._renderFrame=a}},e}(i.a);p=__decorate([n.i(a._24)({selector:"combat-player-render-behavior",template:"<ng-content></ng-content>"}),__metadata("design:paramtypes",[u.a])],p)},function(t,e,n){"use strict";var o=n(1),a=n(121),i=n(13);n.d(e,"a",function(){return r});var r=function(){function t(t){this.animate=t,this.classes=[],this.value=0,this.position=new i.a}return t.prototype.ngAfterViewInit=function(){var t=this,e="active",n=this.damageValue.nativeElement;return n?void this.animate.enter(n,e).then(function(){n.classList.remove("active"),t.animate.enter(n,"remove").then(function(){n.classList.remove("remove")})}):console.warn("unable to find damage value")},t}();__decorate([n.i(o.M)(),__metadata("design:type",Array)],r.prototype,"classes",void 0),__decorate([n.i(o.M)(),__metadata("design:type",Number)],r.prototype,"value",void 0),__decorate([n.i(o.M)(),__metadata("design:type",i.a)],r.prototype,"position",void 0),__decorate([n.i(o._21)("damageValue"),__metadata("design:type",o.K)],r.prototype,"damageValue",void 0),r=__decorate([n.i(o._24)({selector:"combat-damage",template:'\n    <span #damageValue class="damage-value"\n          [ngClass]="classes"\n          [innerText]="value"\n          [style.top]="position?.y + \'px\'"\n          [style.left]="position?.x + \'px\'">\n    </span>\n  ',styles:[n(947)]}),__metadata("design:paramtypes",[a.b])],r)},function(t,e,n){"use strict";var o=n(1),a=n(119),i=n(39),r=n(42),l=(n.n(r),n(101)),s=n(145);n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c});var u=function(t){function e(e){var n=t.call(this)||this;return n.combat=e,n._model$=new r.BehaviorSubject(null),n.model$=n._model$,n}return __extends(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model$.value},set:function(t){this._model$.next(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this.model&&this.model.hp>0},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var t=this;this.combat.scene.addObject(this),this.addBehavior(this.render),this.addBehavior(this.attack),this._spriteSubscription=this.model$.distinctUntilChanged().do(function(e){t.setSprite(e?e.icon:null)}).subscribe()},e.prototype.ngOnDestroy=function(){this.removeBehavior(this.render),this.removeBehavior(this.attack),this.combat.scene.removeObject(this),this._spriteSubscription.unsubscribe(),this.destroy()},e}(a.a);__decorate([n.i(o._21)(l.a),__metadata("design:type",l.a)],u.prototype,"attack",void 0),__decorate([n.i(o._21)(s.a),__metadata("design:type",s.a)],u.prototype,"render",void 0),__decorate([n.i(o.M)(),__metadata("design:type",String)],u.prototype,"icon",void 0),__decorate([n.i(o.M)(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],u.prototype,"model",null),u=__decorate([n.i(o._24)({selector:"combat-enemy",template:'\n    <sprite-render-behavior [icon]="(model$ | async)?.icon"></sprite-render-behavior>\n    <combat-attack-behavior [combat]="combat" #attack></combat-attack-behavior>\n    <ng-content></ng-content>\n  '}),__param(0,n.i(o.e)(n.i(o._26)(function(){return i.a}))),__metadata("design:paramtypes",[i.a])],u);var c=[u]},function(t,e,n){"use strict";var o=n(1),a=n(104),i=n(54),r=n(31),l=n(9),s=n(21),u=n(27),c=n(235),p=n(218),d=n(25),h=n(157),f=n(155),m=n(316),_=n(13),g=n(124),y=n(219);n.d(e,"b",function(){return v}),n.d(e,"a",function(){return b});var v=function(t){function e(e,n,o,a){var i=t.call(this)||this;return i.combatService=e,i.store=n,i.loadingService=o,i.loader=a,i._tileRenderer=new m.a,i.enemies$=i.store.select(r.a),i.party$=i.store.select(r.b),i.encounter$=i.store.select(r.c),i.resource$=i.combatService.combatMap$.distinctUntilChanged().map(function(t){return i.setMap(t),t}),i.features$=i.resource$.map(function(){return i.features.objects}),i.objectRenderer=new c.a,i}return __extends(e,t),e.prototype.ngAfterViewInit=function(){var t=this;this.scene.addObject(this),this.addBehavior(this.camera),this._resourceSubscription=this.resource$.do(function(){t.party.forEach(function(e,n){e.setSprite(e.model.icon);var o=t.getFeature("p"+(n+1));e.setPoint(new _.a(o.x/16,o.y/16))}),t.enemies.forEach(function(e,n){var o=t.getFeature("e"+(n+1));o&&e.setPoint(new _.a(o.x/16,o.y/16))})}).subscribe()},e.prototype.ngOnDestroy=function(){this._resourceSubscription.unsubscribe(),this.scene.removeObject(this),this.removeBehavior(this.camera),this.destroy()},e.prototype.beforeFrame=function(t,e){},e.prototype.renderFrame=function(t,e){var n=this;this._tileRenderer.render(this,t),this.party.forEach(function(e){n.objectRenderer.render(e,e.renderPoint||e.point,t,e.meta);var o=e.findBehaviors(g.a);o.forEach(function(e){n.objectRenderer.render(e,e.host.point,t,e.meta)})}),this.enemies.forEach(function(e){n.objectRenderer.render(e,e.renderPoint||e.point,t,e.meta);var o=e.findBehaviors(g.a);o.forEach(function(e){n.objectRenderer.render(e,e.host.point,t,e.meta)})})},e.prototype.afterFrame=function(t,e){},e.prototype.combatTrackBy=function(t,e){return e.eid},e}(a.a);__decorate([n.i(o.M)(),__metadata("design:type",i.a)],v.prototype,"scene",void 0),__decorate([n.i(o._21)(p.a),__metadata("design:type",p.a)],v.prototype,"camera",void 0),__decorate([n.i(o._22)(h.b),__metadata("design:type",o._23)],v.prototype,"party",void 0),__decorate([n.i(o._22)(f.b),__metadata("design:type",o._23)],v.prototype,"enemies",void 0),v=__decorate([n.i(o._24)({selector:"combat-map",changeDetection:o._25.OnPush,template:n(682)}),__metadata("design:paramtypes",[d.a,l.a,s.a,u.a])],v);var b=[v,y.a,p.a]},function(t,e,n){"use strict";var o=n(1),a=n(119),i=n(153),r=n(101),l=n(39);n.d(e,"b",function(){return s}),n.d(e,"a",function(){return u});var s=function(t){function e(e){var n=t.call(this)||this;return n.combat=e,n}return __extends(e,t),Object.defineProperty(e.prototype,"visible",{get:function(){return this.model&&this.model.hp>0},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var t=this;this.combat.scene.addObject(this),this.behaviors.forEach(function(e){t.addBehavior(e)})},e.prototype.ngOnDestroy=function(){var t=this;this.combat.scene.removeObject(this),this.behaviors.forEach(function(e){t.removeBehavior(e)}),this.destroy()},e}(a.a);__decorate([n.i(o._22)("render,animation,attack,magic,guard,item,run"),__metadata("design:type",o._23)],s.prototype,"behaviors",void 0),__decorate([n.i(o._21)(i.a),__metadata("design:type",i.a)],s.prototype,"render",void 0),__decorate([n.i(o.M)(),__metadata("design:type",Object)],s.prototype,"model",void 0),__decorate([n.i(o.M)(),__metadata("design:type",String)],s.prototype,"icon",void 0),s=__decorate([n.i(o._24)({selector:"combat-player",template:'\n    <combat-player-render-behavior #render></combat-player-render-behavior>\n    <animated-behavior #animation></animated-behavior>\n    <combat-attack-behavior [combat]="combat" #attack></combat-attack-behavior>\n    <!--<combat-magic-behavior [combat]="combat" #magic></combat-magic-behavior>-->\n    <!--<combat-item-behavior [combat]="combat" #item></combat-item-behavior>-->\n    <!--<combat-run-behavior [combat]="combat" #run></combat-run-behavior>-->\n    <!--<combat-guard-behavior [combat]="combat" #guard></combat-guard-behavior>-->\n    <ng-content></ng-content>\n  '}),__param(0,n.i(o.e)(n.i(o._26)(function(){return l.a}))),__metadata("design:paramtypes",[l.a])],s);var u=[i.a,r.a,s]},function(t,e,n){"use strict";var o=n(1),a=n(154),i=n(39),r=n(8),l=n(220),s=n(157),u=n(144),c=n(155),p=n(514),d=n(146),h=n(156);n.d(e,"c",function(){return i.a}),n.d(e,"b",function(){return m}),n.d(e,"a",function(){return _});var f=[a.a,i.a].concat(s.a,c.a,p.a,h.a),m=[l.a],_=g=function(){function t(){}return t.forRoot=function(){return{ngModule:g}},t}();_=g=__decorate([n.i(o.x)({declarations:f,exports:f,imports:[r.c,u.a,d.a]})],_);var g},function(t,e,n){"use strict";var o=n(68),a=n(1);n.d(e,"a",function(){return i});var i=r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=r.NAME,e}return __extends(e,t),e.prototype.enter=function(e){t.prototype.enter.call(this,e),e.notify("combat:escape",{player:e.current},function(){alert("combat escape needs fixin'")})},e}(o.a);i.NAME="Combat Escaped",i=r=__decorate([n.i(a._24)({selector:"combat-escape-state",template:"<ng-content></ng-content>"})],i);var r},function(t,e,n){"use strict";var o=n(1),a=n(11),i=n(26),r=n(15);n.d(e,"a",function(){return l});var l=function(){function t(t,e,n){this.game=t,this.notify=e,this.world=n}return t.prototype.ngOnInit=function(){var t=this;this.game.initGame().then(function(e){if(e){var n=["Click, Touch, or use the Arrow Keys."];n.forEach(function(e){return t.notify.show(e,null,0)})}}).catch(console.error.bind(console))},t}();l=__decorate([n.i(o._24)({selector:"game",styles:[n(951)],encapsulation:o.m.None,template:n(684)}),__metadata("design:paramtypes",[i.a,a.a,r.a])],l)},function(t,e,n){"use strict";var o=n(1);n.d(e,"a",function(){return a});var a=function(){function t(){}return t}();a=__decorate([n.i(o._24)({selector:"no-content",template:"\n    <div>\n      <h1>404: page missing</h1>\n    </div>\n  "})],a)},function(t,e,n){"use strict";var o=n(44),a=n(69),i=n(1),r=n(112),l=n(9),s=n(31),u=n(100),c=n(58);n.n(c);n.d(e,"a",function(){return p});var p=function(t){function e(e){var n=t.call(this)||this;return n.store=e,n.party=null,n}return __extends(e,t),e.prototype.connectBehavior=function(){return this.properties&&this.properties.id?t.prototype.connectBehavior.call(this):(console.error("Fixed encounters must have a given id so they may be hidden"),!1)},e.prototype.enter=function(t){var e=this;if(this.party=t.findBehavior(a.a),!this.party)return!1;this.party.velocity.zero(),t.setPoint(t.point);var o=this.host.tileMap.getCombatZones(this.party.host.point);return o.fixed=!0,this.store.select(s.h).withLatestFrom(this.store.select(s.l),this.store.select(s.m),function(t,a,i){var l=a.find(function(t){return t.id===e.properties.id}),s=function(t){var e=i.find(function(e){return e.id===t});return Object.assign({},e,{eid:n.i(r.b)(e.id),maxhp:e.hp,maxmp:e.mp})},p={type:"fixed",id:l.id,enemies:n.i(c.List)(l.enemies.map(s)),zone:o.target,message:l.message,party:n.i(c.List)(t)};e.store.dispatch(new u.c(p))}).take(1).subscribe(),!0},e}(o.b);__decorate([n.i(i.M)(),__metadata("design:type",Object)],p.prototype,"feature",void 0),p=__decorate([n.i(i._24)({selector:"combat-feature",template:"\n    <ng-content></ng-content>"}),__metadata("design:paramtypes",[l.a])],p)},function(t,e,n){"use strict";var o=n(44),a=n(1);n.d(e,"a",function(){return i});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onClose=new a.D,e.text$=e.feature$.map(function(t){return t.properties.text}),e.title$=e.feature$.map(function(t){return t.properties.title}),e.icon$=e.feature$.map(function(t){return t.properties.icon}),e}return __extends(e,t),e}(o.b);__decorate([n.i(a.M)(),__metadata("design:type",Object)],i.prototype,"feature",void 0),__decorate([n.i(a.M)(),__metadata("design:type",Object)],i.prototype,"scene",void 0),__decorate([n.i(a.M)(),__metadata("design:type",Boolean)],i.prototype,"active",void 0),__decorate([n.i(a._17)(),__metadata("design:type",Object)],i.prototype,"onClose",void 0),i=__decorate([n.i(a._24)({selector:"dialog-feature",changeDetection:a._25.OnPush,encapsulation:a.m.None,styles:[n(952)],template:n(685)})],i)},function(t,e,n){"use strict";var o=n(44),a=n(1),i=n(9),r=n(28);n.d(e,"a",function(){return l});var l=function(t){function e(e){var n=t.call(this)||this;return n.store=e,n}return __extends(e,t),e.prototype.entered=function(t){return this.assertFeature(),!!this.properties.target&&(this.store.dispatch(new r.f(this.properties.target,{x:this.properties.targetX,y:this.properties.targetY})),!0)},e}(o.b);__decorate([n.i(a.M)(),__metadata("design:type",Object)],l.prototype,"feature",void 0),l=__decorate([n.i(a._24)({selector:"portal-feature",template:"<ng-content></ng-content>"}),__metadata("design:paramtypes",[i.a])],l)},function(t,e,n){"use strict";var o=n(31),a=n(13),i=n(44),r=n(69),l=n(28),s=n(1);n.d(e,"a",function(){return u});var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._tickInterval=-1,e._subscription=null,e}return __extends(e,t),e.prototype.disconnectBehavior=function(){return this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),!0},e.prototype.connectBehavior=function(){var e=this;if(!t.prototype.connectBehavior.call(this))return!1;var n=this.host.world;return n&&(this._subscription=this.host.world.store.select(o.k).distinctUntilChanged().subscribe(function(t){e.host.setPoint(t)})),!0},e.prototype.enter=function(t){return this.party=t.findBehavior(r.a),!!this.party&&(this.partySprite=t.icon,this.party.passableKeys=["shipPassable"],!0)},e.prototype.entered=function(t){return this.board(t)},e.prototype.board=function(t){var e=this;return!(this.partyObject||!this.party)&&(this.partyObject=t,t.setSprite(this.host.icon),this.host.visible=!1,this.host.enabled=!1,this._tickInterval=setInterval(function(){if(a.a.equal(e.partyObject.point,e.party.targetPoint)&&!e.party.heading.isZero()){var t=new a.a(e.partyObject.point),n=t.clone().add(e.party.heading);e.party.collideWithMap(t,"shipPassable")||e.party.collideWithMap(n,"passable")||e.disembark(t,n,e.party.heading.clone())}},32),!0)},e.prototype.disembark=function(t,e,n){clearInterval(this._tickInterval),this.partyObject.setSprite(this.partySprite),this.party.targetPoint.set(e),this.party.velocity.set(n),this.party.passableKeys=["passable"],this.host.point.x=t.x,this.host.point.y=t.y,this.host.visible=!0,this.host.enabled=!0,this.partyObject=null,this.party=null,this.host.world.store.dispatch(new l.u("shipPosition",this.host.point))},e}(i.b);__decorate([n.i(s.M)(),__metadata("design:type",Object)],u.prototype,"feature",void 0),u=__decorate([n.i(s._24)({selector:"ship-feature",template:"<ng-content></ng-content>"})],u)},function(t,e,n){"use strict";function o(t,e,n){return t.filter(function(t){var o="undefined"==typeof t.level||t.level===n;return o&&r(t,e)})}function a(t,e){return t.filter(function(t){return r(t,e)})}function i(t,e){return void 0===e&&(e=null),function(n){return n&&n.properties&&n.properties[t]?n.properties[t]:e}}function r(t,e){if(!t)return!1;var n=!t.groups||0===e.length;return(t.groups||[]).forEach(function(t){n=n||e.indexOf(t)!==-1}),n}var l=n(44),s=n(1),u=n(42),c=(n.n(u),n(112)),p=n(28),d=n(150),h=n(31),f=n(26),m=n(11),_=n(9);n.d(e,"a",function(){return g});var g=function(t){function e(e,r,l){var f=t.call(this)||this;return f.game=e,f.notify=r,f.store=l,f.onClose=new s.D,f._level$=new u.BehaviorSubject(1),f._weapons$=f.store.select(h.d),f._armors$=f.store.select(h.e),f._items$=f.store.select(h.f),f._selling$=new u.BehaviorSubject(!1),f.name$=f.feature$.map(i("name")),f.groups$=f.feature$.map(i("groups",[])),f.category$=f.feature$.map(i("category")),f.partyGold$=f.store.select(h.g),f.level$=f._level$,f.partyInventory$=f.store.select(h.i).combineLatest(f.category$,function(t,e){return t.filter(function(t){return t.category===e})}).combineLatest(f.groups$,a),f.inventory$=f._weapons$.combineLatest(f._armors$,f._items$,f.category$,function(t,e,n,o){switch(o){case"items":return n;case"weapons":return t;case"armor":return e;default:return n.concat(t).concat(e)}}).combineLatest(f.groups$,f.level$,o),f.selling$=f._selling$,f._selected$=new u.BehaviorSubject(null),f.selected$=f._selected$,f.isBuying$=u.Observable.combineLatest(f.selected$,f.selling$,function(t,e){return!t&&!e}),f.isSelling$=u.Observable.combineLatest(f.selected$,f.selling$,function(t,e){return!t&&e}),f.actionVerb$=f.selling$.map(function(t){return t?"Sell":"Buy"}),f._onAction$=new u.Subject,
f._onToggleAction$=new u.Subject,f._doToggleActionSubscription$=f._onToggleAction$.withLatestFrom(f.partyInventory$,function(t,e){var n=f._selling$.value;return n||0!==e.length?void f._selling$.next(!n):(f.notify.show("You don't have any inventory of this type to sell.",null,1500),void f._selling$.next(!1))}).subscribe(),f._doActionSubscription$=f._onAction$.withLatestFrom(f.store.select(h.j),f.category$,function(t,e,o){if(f._selected$.value){var a=f._selected$.value,i=f._selling$.value,r=a.value;if(!i&&r>e.gold)return void f.notify.show("You don't have enough money");if(f._selected$.next(null),f._selling$.next(!1),i)f.notify.show("Sold "+a.name+" for "+a.value+" gold.",null,1500),f.store.dispatch(new p.w(a)),f.store.dispatch(new d.d(a.eid)),f.store.dispatch(new p.a(r));else{var l=n.i(c.a)(a);f.notify.show("Purchased "+a.name+".",null,1500),f.store.dispatch(new p.a(-r)),f.store.dispatch(new d.c(l)),f.store.dispatch(new p.b(l))}}}).subscribe(),f}return __extends(e,t),e.prototype.ngOnDestroy=function(){this._doActionSubscription$.unsubscribe(),this._doToggleActionSubscription$.unsubscribe()},e}(l.b);__decorate([n.i(s.M)(),__metadata("design:type",Object)],g.prototype,"feature",void 0),__decorate([n.i(s.M)(),__metadata("design:type",Object)],g.prototype,"scene",void 0),__decorate([n.i(s.M)(),__metadata("design:type",Boolean)],g.prototype,"active",void 0),__decorate([n.i(s._17)(),__metadata("design:type",Object)],g.prototype,"onClose",void 0),g=__decorate([n.i(s._24)({selector:"store-feature",changeDetection:s._25.OnPush,encapsulation:s.m.None,styles:[n(953)],template:n(686)}),__metadata("design:paramtypes",[f.a,m.a,_.a])],g)},function(t,e,n){"use strict";var o=n(44),a=n(4),i=n.n(a),r=n(1),l=n(42),s=(n.n(l),n(26)),u=n(9),c=n(11),p=n(31),d=n(28);n.d(e,"a",function(){return h});var h=function(t){function e(e,n,o){var a=t.call(this)||this;return a.game=e,a.store=n,a.notify=o,a.onClose=new r.D,a.partyGold$=a.store.select(p.g),a.party$=a.store.select(p.h),a.name$=a.feature$.map(function(t){return t.properties.name}),a.icon$=a.feature$.map(function(t){return t.properties.name}),a.cost$=a.feature$.map(function(t){return parseInt(t.properties.cost,10)}),a._onRest$=new l.Subject,a}return __extends(e,t),e.prototype.ngOnInit=function(){var t=this;this._onRestSubscription$=this._onRest$.withLatestFrom(this.party$,this.partyGold$,this.cost$,function(e,n,o,a){var r=!n.find(function(t){return console.log(t,s.a.getHPForLevel(1,t)),t.hp!==t.maxhp});if(a>o)t.notify.show("You don't have enough money");else if(r)t.notify.show("Keep your money.\nYour party is already fully healed.");else{var l=n.map(function(t){return t.eid}).toArray();t.store.dispatch(new d.v({cost:a,partyIds:l}));var u="Your party has been healed! \nYou have ("+(o-a)+") monies.";t.notify.show(u,null,5e3)}i.a.defer(function(){t.onClose.next({})})}).subscribe()},e.prototype.ngOnDestroy=function(){this._onRestSubscription$.unsubscribe()},e}(o.b);__decorate([n.i(r._17)(),__metadata("design:type",Object)],h.prototype,"onClose",void 0),__decorate([n.i(r.M)(),__metadata("design:type",Object)],h.prototype,"scene",void 0),__decorate([n.i(r.M)(),__metadata("design:type",Boolean)],h.prototype,"active",void 0),__decorate([n.i(r.M)(),__metadata("design:type",Array)],h.prototype,"party",void 0),__decorate([n.i(r.M)(),__metadata("design:type",Object)],h.prototype,"feature",void 0),h=__decorate([n.i(r._24)({selector:"temple-feature",styles:[n(954)],changeDetection:r._25.OnPush,encapsulation:r.m.None,template:n(687)}),__metadata("design:paramtypes",[s.a,u.a,c.a])],h)},function(t,e,n){"use strict";var o=n(44),a=n(1),i=n(28),r=n(150),l=n(9),s=n(11);n.d(e,"a",function(){return u});var u=function(t){function e(e,n){var o=t.call(this)||this;return o.store=e,o.notify=n,o}return __extends(e,t),e.prototype.connectBehavior=function(){return this.properties&&this.properties.id?t.prototype.connectBehavior.call(this):(console.error("Treasure must have a given id so it may be hidden"),!1)},e.prototype.syncBehavior=function(){return!(!t.prototype.syncBehavior.call(this)||!this.host.feature)&&(this.name="Treasure Chest",!0)},e.prototype.enter=function(t){if("undefined"!=typeof this.properties.gold&&(this.store.dispatch(new i.a(this.properties.gold)),this.notify.show("You found "+this.properties.gold+" gold!",null,0)),"string"==typeof this.properties.item){console.warn("treasure items need fixin'");var e=null;if(!e)return;this.store.dispatch(new r.c(e)),this.notify.show("You found "+e.name+"!",null,0)}return console.warn("set data hidden treasure feature"),!0},e}(o.b);__decorate([n.i(a.M)(),__metadata("design:type",Object)],u.prototype,"feature",void 0),u=__decorate([n.i(a._24)({selector:"treasure-feature",template:"\n    <ng-content></ng-content>"}),__metadata("design:paramtypes",[l.a,s.a])],u)},function(t,e,n){"use strict";var o=n(1),a=n(53),i=n(27),r=n(223),l=n(54),s=n(44),u=n(235),c=n(170),p=n(31),d=n(13),h=n(21),f=n(9),m=n(104),_=n(52);n.n(_);n.d(e,"b",function(){return g}),n.d(e,"a",function(){return y});var g=function(t){function e(e,n,o,a){var i=t.call(this)||this;return i.gameStateService=e,i.store=n,i.loadingService=o,i.loader=a,i.self=i,i.renderPoint=new d.a,i._subscriptions=[],i.resource$=i.gameStateService.worldMap$.distinctUntilChanged().map(function(t){return i.setMap(t),t}),i.features$=i.resource$.map(function(){return i.features.objects}),i._renderPoint$=new _.BehaviorSubject(i.renderPoint),i.renderPoint$=i.store.select(p.n).combineLatest(i._renderPoint$,function(t,e){return i.renderPoint.set(t||e)}),i.objectRenderer=new u.a,i.notTraveling$=i.loadingService.loading$.map(function(t){return!t}),i.position$=i.store.select(p.n).distinctUntilChanged().do(function(t){i.renderPoint=new d.a(t)}),i.partyLeader$=i.store.select(p.h).map(function(t){return t.get(0)}),i}return __extends(e,t),e.prototype.ngAfterViewInit=function(){var t=this;this.scene.addObject(this),this.behaviors.forEach(function(e){t.addBehavior(e)}),this._subscriptions.push(this.position$.subscribe())},e.prototype.ngOnDestroy=function(){var t=this;this.scene.removeObject(this),this.behaviors.forEach(function(e){t.removeBehavior(e)}),this._subscriptions.forEach(function(t){return t.unsubscribe()}),this._subscriptions.length=0,this.destroy()},e.prototype.beforeFrame=function(t,e){},e.prototype.renderFrame=function(t,e){var n=this;this.mapFeatures.forEach(function(e){if(e.host){var o=e.host;n.objectRenderer.render(o,o.renderPoint||o.point,t,o.meta)}})},e.prototype.afterFrame=function(t,e){},e}(m.a);__decorate([n.i(o.M)(),__metadata("design:type",l.a)],g.prototype,"scene",void 0),__decorate([n.i(o._21)(c.b),__metadata("design:type",c.b)],g.prototype,"player",void 0),__decorate([n.i(o._22)("input,encounter"),__metadata("design:type",o._23)],g.prototype,"behaviors",void 0),__decorate([n.i(o._22)(s.a),__metadata("design:type",o._23)],g.prototype,"mapFeatures",void 0),g=__decorate([n.i(o._24)({selector:"world-map",changeDetection:o._25.OnPush,template:n(689)}),__metadata("design:paramtypes",[a.a,f.a,h.a,i.a])],g);var y=[g,s.a,r.a]},function(t,e,n){"use strict";var o=n(1),a=n(119),i=n(104),r=n(222),l=n(69),s=n(224),u=n(226),c=n(118),p=n(225),d=n(54),h=n(13),f=n(235),m=n(48),_=n(44),g=n(42);n.n(g);n.d(e,"b",function(){return y}),n.d(e,"a",function(){return v});var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetFill="rgba(10,255,10,0.3)",e.targetStroke="rgba(10,255,10,0.3)",e.targetStrokeWidth=1.5,e._featureComponent$=new g.BehaviorSubject(null),e.featureComponent$=e._featureComponent$,e.objectRenderer=new f.a,e}return __extends(e,t),e.prototype.ngAfterViewInit=function(){var t=this;this.setSprite(this.model.icon),this.scene.addObject(this),this.behaviors.forEach(function(e){t.addBehavior(e)})},e.prototype.ngOnDestroy=function(){var t=this;this.scene.removeObject(this),this.behaviors.forEach(function(e){t.removeBehavior(e)}),this.destroy()},e.prototype.onFeatureLook=function(t){var e=t.findBehavior(_.b);e&&(e.enter(this),this.feature=e)},e.prototype.onFeatureLookAway=function(t){var e=t.findBehavior(_.b);e&&(e.exit(this),this.feature=null)},Object.defineProperty(e.prototype,"feature",{get:function(){return this._featureComponent$.value},set:function(t){this._featureComponent$.next(t)},enumerable:!0,configurable:!0}),e.prototype.escapeFeature=function(){this.feature&&this.onFeatureLookAway(this.feature.host)},e.prototype.beforeFrame=function(t,e){},e.prototype.renderFrame=function(t,e){if(this.objectRenderer.render(this,this.renderPoint||this.point,t,this.meta),this.movable){var n=this.movable;if(this.movable.path&&this.movable.path.length>0){t.context.save();var o=n.path[n.path.length-1].clone();o.x-=.5,o.y-=.5;var a=t.worldToScreen(new m.a(o,new h.a(1,1)));t.context.fillStyle=this.targetFill,t.context.fillRect(a.point.x,a.point.y,a.extent.x,a.extent.y),t.context.strokeStyle=this.targetStroke,t.context.lineWidth=this.targetStrokeWidth,t.context.strokeRect(a.point.x,a.point.y,a.extent.x,a.extent.y),t.context.restore()}}},e.prototype.afterFrame=function(t,e){},e}(a.a);__decorate([n.i(o._22)("render,collision,path,player,trigger,camera"),__metadata("design:type",o._23)],y.prototype,"behaviors",void 0),__decorate([n.i(o.M)(),__metadata("design:type",String)],y.prototype,"icon",void 0),__decorate([n.i(o.M)(),__metadata("design:type",Object)],y.prototype,"model",void 0),__decorate([n.i(o.M)(),__metadata("design:type",d.a)],y.prototype,"scene",void 0),__decorate([n.i(o.M)(),__metadata("design:type",i.a)],y.prototype,"map",void 0),__decorate([n.i(o.M)(),__metadata("design:type",h.a)],y.prototype,"point",void 0),__decorate([n.i(o._21)(l.a),__metadata("design:type",l.a)],y.prototype,"movable",void 0),y=__decorate([n.i(o._24)({selector:"world-player",changeDetection:o._25.OnPush,template:'\n    <player-render-behavior #render></player-render-behavior>\n    <collision-behavior #collision></collision-behavior>\n    <player-map-path-behavior [tileMap]="map" #path></player-map-path-behavior>\n    <player-behavior #player></player-behavior>\n    <player-camera-behavior #camera></player-camera-behavior>\n    <player-look-behavior\n      (onLook)="onFeatureLook($event)"\n      (onLookAway)="onFeatureLookAway($event)"\n      #trigger></player-look-behavior>\n    <ng-content></ng-content>\n  '})],y);var v=[y,r.a,l.a,s.a,u.a,c.b,p.a]},function(t,e,n){"use strict";var o=n(1),a=n(11),i=n(26),r=n(15),l=n(9),s=n(69),u=n(54),c=n(82),p=n(315),d=n(174),h=n(236),f=n(21),m=n(149),_=n(169);n.d(e,"a",function(){return g});var g=function(t){function e(e,n,o,a,i){var r=t.call(this)||this;return r.game=e,r.notify=n,r.loadingService=o,r.store=a,r.world=i,r.styleBackground="rgba(0,0,0,1)",r.mouse=null,r.scene=new u.a,r.world.mark(r.scene),r.world.time.start(),r}return __extends(e,t),e.prototype.handleKeyboardEvent=function(t){"Escape"===t.key&&(this.map.player&&this.map.player.feature?this.map.player.escapeFeature():this.partyMenu&&(this.partyMenu.open=!this.partyMenu.open))},e.prototype.ngOnDestroy=function(){this.world.erase(this.scene),this.scene.removeView(this)},e.prototype.ngAfterViewInit=function(){var t=this;this.canvas=this.canvasElementRef.nativeElement,this.camera.point.set(-.5,-.5),this.scene.addView(this),setTimeout(function(){return t._onResize()},1)},e.prototype._onResize=function(e){if(t.prototype._onResize.call(this,e),this.map){var n=this.map.bounds.getCenter(),o=this._bounds.clone().divide(2).multiply(-1).add(n);this.camera.point.set(o.floor())}this.camera.extent.set(this._bounds)},e.prototype.onAddToScene=function(e){t.prototype.onAddToScene.call(this,e),this.mouse=this.world.input.mouseHook(this,"world"),e.on(c.a.Events.MAP_LOADED,this.syncBehaviors,this)},e.prototype.onRemoveFromScene=function(t){this.world.input.mouseUnhook("world"),t.off(c.a.Events.MAP_LOADED,this.syncBehaviors,this)},e.prototype._onClick=function(t){if(t.srcElement===this.canvas){var e=this.scene.componentByType(p.a),n=this.scene.componentByType(s.a);return e&&n?(d.b.mouseOnView(t,this.mouse.view,this.mouse),n.path=e.calculatePath(n.targetPoint,this.mouse.world),t.preventDefault(),!1):void 0}},e.prototype.renderFrame=function(e){return t.prototype.renderFrame.call(this,e),this.map&&(this.map.renderFrame(this,e),this.map.player&&this.map.player.renderFrame(this,e)),this},e}(h.a);__decorate([n.i(o._21)("worldCanvas"),__metadata("design:type",o.K)],g.prototype,"canvasElementRef",void 0),__decorate([n.i(o._21)(m.a),__metadata("design:type",m.a)],g.prototype,"partyMenu",void 0),__decorate([n.i(o._13)("document:keyup",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[KeyboardEvent]),__metadata("design:returntype",void 0)],g.prototype,"handleKeyboardEvent",null),__decorate([n.i(o._21)(_.b),__metadata("design:type",_.b)],g.prototype,"map",void 0),g=__decorate([n.i(o._24)({selector:"world",styles:[n(955)],changeDetection:o._25.OnPush,encapsulation:o.m.None,template:n(690),host:{"(window:resize)":"_onResize($event)","(click)":"_onClick($event)","[style.color]":"styleBackground"}}),__metadata("design:paramtypes",[i.a,a.a,f.a,l.a,r.a])],g)},function(t,e,n){"use strict";var o=n(4);n.n(o);n.d(e,"a",function(){return a});var a=function(){function t(){}return t.prototype.on=function(t,e,n){if(!r(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var o=this._events[t]||(this._events[t]=[]);return o.push({callback:e,context:n,ctx:n||this}),this},t.prototype.once=function(t,e,n){if(!r(this,"once",t,[e,n])||!e)return this;var a=this,i=o.once(function(){a.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},t.prototype.off=function(t,e,n){var a,i,l,s,u,c,p,d;if(!this._events||!r(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(s=t?[t]:o.keys(this._events),u=0,c=s.length;u<c;u++)if(t=s[u],l=this._events[t]){if(this._events[t]=a=[],e||n)for(p=0,d=l.length;p<d;p++)i=l[p],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&a.push(i);a.length||delete this._events[t]}return this},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this._events)return this;var e=Array.prototype.slice.call(arguments,1);if(!r(this,"trigger",t,e))return this;var o=this._events[t],a=this._events.all;return o&&l(o,e),a&&l(a,arguments),this},t}(),i=/\s+/,r=function(t,e,n,o){if(!n)return!0;if("object"==typeof n){for(var a in n)t[e].apply(t,[a,n[a]].concat(o));return!1}if(i.test(n)){for(var r=n.split(i),l=0,s=r.length;l<s;l++)t[e].apply(t,[r[l]].concat(o));return!1}return!0},l=function(t,e){var n,o=-1,a=t.length,i=e[0],r=e[1],l=e[2];switch(e.length){case 0:for(;++o<a;)(n=t[o]).callback.call(n.ctx);return;case 1:for(;++o<a;)(n=t[o]).callback.call(n.ctx,i);return;case 2:for(;++o<a;)(n=t[o]).callback.call(n.ctx,i,r);return;case 3:for(;++o<a;)(n=t[o]).callback.call(n.ctx,i,r,l);return;default:for(;++o<a;)(n=t[o]).callback.apply(n.ctx,e);return}}},function(t,e,n){"use strict";(function(t){var o=n(79),a=n(4);n.n(a);n.d(e,"a",function(){return i});var i=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.fetch=function(e){var n=this;return this.url=e||this.url,new Promise(function(e,o){var a=t.get(n.url);a.done(function(a){n.data=t(a),n.load(n.data).then(e).catch(o)}),a.fail(function(t,e,n){o(n)})})},n.prototype.load=function(t){return Promise.resolve(this)},n.prototype.getRootNode=function(e){return this.data?t(a.find(this.data,function(t){return t.tagName&&t.tagName.toLowerCase()===e})):null},n.prototype.getChildren=function(e,n){var o=e.find(n);return a.compact(a.map(o,function(n){var o=t(n);return o.parent()[0]!==e[0]?null:o}))},n.prototype.getChild=function(t,e){return this.getChildren(t,e)[0]},n.prototype.getElAttribute=function(t,e){if(t){var n=t.attr(e);if(n)return n}return null},n}(o.a)}).call(e,n(91))},function(t,e,n){"use strict";(function(t){var o=n(4),a=(n.n(o),n(313)),i=n(13);n.d(e,"a",function(){return r}),n.d(e,"b",function(){return l});var r;(function(t){t[t.UP=38]="UP",t[t.DOWN=40]="DOWN",t[t.LEFT=37]="LEFT",t[t.RIGHT=39]="RIGHT",t[t.BACKSPACE=8]="BACKSPACE",t[t.COMMA=188]="COMMA",t[t.DELETE=46]="DELETE",t[t.END=35]="END",t[t.ENTER=13]="ENTER",t[t.ESCAPE=27]="ESCAPE",t[t.HOME=36]="HOME",t[t.SPACE=32]="SPACE",t[t.TAB=9]="TAB"})(r||(r={}));var l=function(){function e(){var t=this;this._keysDown={},this._mouseElements=[],window.addEventListener("keydown",function(e){t._keysDown[e.which]=!0}),window.addEventListener("keyup",function(e){t._keysDown[e.which]=!1});var n=this._mouseElements;window.addEventListener("mousemove touchmove",function(t){for(var o=n.length,a=0;a<o;a++){var i=n[a];t.srcElement===i.view.canvas?e.mouseOnView(t,i.view,i):(i.point.set(-1,-1),i.world.set(-1,-1))}})}return e.mouseOnView=function(e,n,o){var a=e.srcElement,r=e.touches;r&&r.length>0&&(e=r[0]);var l=o||{point:new i.a,world:new i.a},s=t(a).offset(),u=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-Math.floor(s.left),c=e.clientY+document.body.scrollTop+document.documentElement.scrollTop-Math.floor(s.top);l.point.set(u,c);var p=n.screenToWorld(l.point,n.cameraScale).add(n.camera.point).round();return l.world.set(p.x,p.y),l},e.prototype.mouseHook=function(t,e){var n=o.where(this._mouseElements,{name:e});if(n.length>0)return n[0];var a={name:e,view:t,point:new i.a(-1,-1),world:new i.a(-1,-1)};return this._mouseElements.push(a),a},e.prototype.mouseUnhook=function(t){this._mouseElements=o.filter(this._mouseElements,function(e){return t instanceof a.a?e.view._uid===t._uid:e.name===t})},e.prototype.getMouseHook=function(t){return o.find(this._mouseElements,function(e){return t instanceof a.a?e.view._uid===t._uid:e.name===t})},e.prototype.keyDown=function(t){return!!this._keysDown[t]},e}()}).call(e,n(91))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function o(t){return r._31(0,[(t()(),r._34(null,["\n  "])),(t()(),r._32(0,null,null,4,"div",[],[[4,"width",null]],null,null,null,null)),r._33(278528,null,0,l.m,[r.I,r.J,r.K,r.L],{ngClass:[0,"ngClass"]},null),(t()(),r._34(null,["\n    "])),r._41(null,0),(t()(),r._34(null,["\n  "]))],function(t,e){var n=e.component,o=n.getCSSClassMap();t(e,2,0,o)},function(t,e){var n=e.component,o=n.getProgressBarWidth()+"%";t(e,1,0,o)})}function a(t){return r._31(0,[(t()(),r._32(0,null,null,1,"rpg-health-bar",[],null,null,null,o,c)),r._33(49152,null,0,s.a,[],null,null)],null,null)}var i=n(446),r=n(1),l=n(8),s=n(99);n.d(e,"b",function(){return c}),e.a=o;var u=[i.a],c=r._30({encapsulation:0,styles:u,data:{}});r._35("rpg-health-bar",s.a,a,{model:"model"},{},["*"])},function(t,e,n){"use strict";var o=n(1),a=n(9),i=n(15),r=n(11);n.d(e,"a",function(){return l});var l=function(){function t(t,e,n){this.store=t,this.world=e,this.notifications=n,this.world.time.addObject(n),this.world.mark(n)}return t}();l=__decorate([n.i(o._24)({selector:"app",encapsulation:o.m.None,styles:[n(940)],template:n(677)}),__metadata("design:paramtypes",[a.a,i.a,r.a])],l)},function(t,e,n){"use strict";var o=n(1),a=n(83),i=n(28),r=n(207),l=n(175);n.d(e,"a",function(){return s});var s=function(){function t(t,e){var o=this;this.actions$=t,this.loadingService=e,this.loadingIndicator$=this.actions$.ofType(i.f.typeId).distinctUntilChanged().do(function(t){o.loadingService.message="Traveling to "+t.payload.location+"...",o.loadingService.loading=!0}),this.loadingDoneIndicator$=this.actions$.ofType(i.i.typeId,i.j.typeId).distinctUntilChanged().do(function(t){o.loadingService.loading=!1}),this.navigateToWorldRoute$=this.actions$.ofType(i.i.typeId).debounceTime(100).distinctUntilChanged().map(function(t){return n.i(l.c)(["world",t.payload])})}return t}();__decorate([n.i(a.b)({dispatch:!1}),__metadata("design:type",Object)],s.prototype,"loadingIndicator$",void 0),__decorate([n.i(a.b)({dispatch:!1}),__metadata("design:type",Object)],s.prototype,"loadingDoneIndicator$",void 0),__decorate([n.i(a.b)(),__metadata("design:type",Object)],s.prototype,"navigateToWorldRoute$",void 0),s=__decorate([n.i(o.d)(),__metadata("design:paramtypes",[a.c,r.a])],s)},function(t,e,n){"use strict";var o=n(147),a=n(21);n.d(e,"a",function(){return a.a}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return r});var i=[o.a],r=[a.a]},function(t,e,n){"use strict";var o=n(1),a=n(26),i=n(11),r=n(9),l=n(31),s=n(52),u=(n.n(s),n(19)),c=(n.n(u),n(28));n.d(e,"a",function(){return p});var p=function(){function t(t,e,o){var a=this;this.game=t,this.store=e,this.notify=o,this.active=!1,this.party$=this.store.select(l.h),this.inventory$=this.store.select(l.i).map(function(t){return t.filter(function(t){return"item"!==t.type})}),this.doChangeIndex$=new s.BehaviorSubject(0),this.doEquip$=new u.Subject,this.doUnequip$=new u.Subject,this.currentIndex$=this.doChangeIndex$.combineLatest(this.party$,function(t,e){return t>=e.count()?0:t<0?e.count()-1:t}),this.currentEntity$=this.currentIndex$.combineLatest(this.party$,function(t,e){return e.get(t)}).switchMap(function(t){return a.store.select(n.i(l.r)(t.eid))}),this._equipSubscription=this.doEquip$.withLatestFrom(this.currentEntity$,function(t,e){return t.item.usedby&&!t.item.usedby.find(function(t){return t===e.type})?a.notify.show(e.name+" cannot equip this item"):void a.store.dispatch(new c.g({entityId:e.eid,slot:t.slot,itemId:t.item.eid}))}).subscribe(),this._unequipSubscription=this.doUnequip$.withLatestFrom(this.currentEntity$,function(t,e){a.store.dispatch(new c.h({entityId:e.eid,slot:t.slot,itemId:t.item.eid}))}).subscribe()}return t.prototype.ngOnDestroy=function(){this._equipSubscription.unsubscribe(),this._unequipSubscription.unsubscribe()},t.prototype.nextCharacter=function(){var t=this;this.currentIndex$.take(1).subscribe(function(e){t.doChangeIndex$.next(e+1)})},t.prototype.previousCharacter=function(){var t=this;this.currentIndex$.take(1).subscribe(function(e){t.doChangeIndex$.next(e-1)})},t}();__decorate([n.i(o.M)(),__metadata("design:type",Boolean)],p.prototype,"active",void 0),p=__decorate([n.i(o._24)({selector:"party-inventory",template:n(678),styles:[n(943)]}),__metadata("design:paramtypes",[a.a,r.a,i.a])],p)},function(t,e,n){"use strict";var o=n(1),a=n(121);n.d(e,"a",function(){return i});var i=function(){function t(t){this.game=t}return t.prototype.getPlayerCSSClassMap=function(){return{dead:this.model&&this.model.hp<=0}},t.prototype.getCSSProgressWidth=function(){var t=0;return this.model&&(t=(this.model.exp-this.model.prevLevelExp)/(this.model.nextLevelExp-this.model.prevLevelExp)*100),Math.round(t)},t}();__decorate([n.i(o.M)(),__metadata("design:type",Object)],i.prototype,"model",void 0),i=__decorate([n.i(o._24)({selector:"player-card",template:n(680),styles:[n(945)]}),__metadata("design:paramtypes",[a.c])],i)},function(t,e,n){"use strict";function o(t){var e=__assign({},t,{enemies:r.List(t.enemies),party:r.List(t.party)});return s(e)}function a(t,e){switch(void 0===t&&(t=s()),e.type){case i.c.typeId:return t.merge(__assign({loading:!0},e.payload));case i.d.typeId:return t.merge({loading:!0});case i.b.typeId:return t;case i.e.typeId:return s();case i.a.typeId:var o=e.payload,a=function(t){return t.eid===o.defender.eid};n.i(l.b)("none"!==t.type,"invalid encounter for attack action");var r=t.enemies.findIndex(a);if(r!==-1){o.defender;return t.update("enemies",function(t){var e=t.get(r);n.i(l.b)(e,"invalid target for attack action");var a=Math.max(e.hp-o.damage,0);return t.set(r,__assign({},e,{hp:a}))})}if(r=t.party.findIndex(a),r!==-1){o.defender;return t.update("party",function(t){var e=t.get(r);n.i(l.b)(e,"invalid target for attack action");var a=Math.max(e.hp-o.damage,0);return t.set(r,__assign({},e,{hp:a}))})}return n.i(l.b)(r!==-1,"attack target found in neither enemies nor party lists"),t;default:return n.i(l.e)(e),t}}var i=n(100),r=n(58),l=(n.n(r),n(35));e.e=o,e.d=a,n.d(e,"a",function(){return u}),n.d(e,"c",function(){return c}),n.d(e,"b",function(){return p});var s=n.i(l.d)({loading:!1,enemies:r.List(),party:r.List(),type:"none",message:[],gold:0,experience:0,items:[],zone:"",id:""}),u=function(t){return t.loading},c=function(t){return t.enemies},p=function(t){return t.party}},function(t,e,n){"use strict";function o(t){var e={beings:p(n.i(r.a)(t.beings)),items:d(n.i(r.a)(t.items))};return h(e)}function a(t,e){switch(void 0===t&&(t=h()),e.type){case i.a.typeId:var o=e.payload;return t.updateIn(["beings"],function(t){return n.i(r.b)(t,o,o.eid)});case i.b.typeId:var a=e.payload;return t.updateIn(["beings"],function(t){return n.i(r.c)(t,a)});case i.c.typeId:var c=e.payload;return t.updateIn(["items"],function(t){return n.i(r.b)(t,c,c.eid)});case i.d.typeId:var p=e.payload;return t.updateIn(["items"],function(t){return n.i(r.c)(t,p)});case l.v.typeId:var d=t,f=e;return d.updateIn(["beings"],function(e){var o=e;return f.payload.partyIds.forEach(function(e){var a=t.beings.byId.get(e).maxhp,i=t.beings.byId.get(e).maxmp;o=n.i(r.d)(o,{hp:a,mp:i},e)}),o});case l.g.typeId:var d=t,m=t.beings.byId.get(e.payload.entityId);return n.i(u.b)(!!m,"entity does not exist"),n.i(u.b)(!m[e.payload.slot],"entity already has item "+m[e.payload.slot]+" in "+e.payload.slot),d.updateIn(["beings","byId",e.payload.entityId],function(t){return __assign({},t,(n={},n[e.payload.slot]=e.payload.itemId,n));var n});case l.h.typeId:var d=t,m=t.beings.byId.get(e.payload.entityId);return n.i(u.b)(!!m,"entity does not exist"),n.i(u.b)(m[e.payload.slot]===e.payload.itemId,"entity does not have item "+m[e.payload.slot]+" equipped "+e.payload.slot),d.updateIn(["beings","byId",e.payload.entityId],function(t){return __assign({},t,(n={},n[e.payload.slot]=null,n));var n});case s.b.typeId:var d=t,_=e;return d.updateIn(["beings"],function(t){var e=t;return _.payload.party.forEach(function(t){n.i(u.b)(!(!t||!t.eid),"invalid party entity in combat victory action"),e=n.i(r.d)(e,t,t.eid)}),e});default:return n.i(u.e)(e),t}}var i=n(150),r=n(295),l=n(28),s=n(100),u=n(35),c=n(58);n.n(c);e.f=o,e.e=a,n.d(e,"b",function(){return f}),n.d(e,"a",function(){return m}),n.d(e,"d",function(){return _}),n.d(e,"c",function(){return g});var p=n.i(u.d)({byId:c.Map(),allIds:c.List()}),d=n.i(u.d)({byId:c.Map(),allIds:c.List()}),h=n.i(u.d)({beings:p(),items:d()}),f=function(t){return t.beings.allIds},m=function(t){return t.beings.byId},_=function(t){return t.items.allIds},g=function(t){return t.items.byId}},function(t,e,n){"use strict";function o(t){var e=g({loaded:t.loaded,weapons:u(n.i(r.a)(t.weapons)),items:c(n.i(r.a)(t.items)),armor:p(n.i(r.a)(t.armor)),enemies:d(n.i(r.a)(t.enemies)),magic:h(n.i(r.a)(t.magic)),classes:f(n.i(r.a)(t.classes)),fixedEncounters:m(n.i(r.a)(t.fixedEncounters)),randomEncounters:_(n.i(r.a)(t.randomEncounters))});return e}function a(t,e){void 0===t&&(t=g());var o=t;switch(e.type){case l.a.typeId:case l.b.typeId:return t;case l.c.typeId:return o.merge({loaded:!0});case l.d.typeId:var a=e.payload;return n.i(s.b)(!!t[a.sheet],"unknown collection cannot be added with sheet name: "+a.sheet),o.updateIn([a.sheet],function(t){return a.data.forEach(function(e){t=n.i(r.b)(t,e,e.id)}),t});case l.e.typeId:var i=e.payload;return n.i(s.b)(o.has(i),"cannot remove sheet that does not exist: "+i),o.updateIn([i],function(t){return t.set("byId",t.byId.clear()).set("allIds",t.allIds.clear())});default:return n.i(s.e)(e),t}}var i=n(58),r=(n.n(i),n(295)),l=n(151),s=n(35);e.t=o,e.s=a,n.d(e,"b",function(){return y}),n.d(e,"a",function(){return v}),n.d(e,"d",function(){return b}),n.d(e,"c",function(){return x}),n.d(e,"f",function(){return w}),n.d(e,"e",function(){return k}),n.d(e,"h",function(){return M}),n.d(e,"g",function(){return S}),n.d(e,"j",function(){return C}),n.d(e,"i",function(){return O}),n.d(e,"l",function(){return P}),n.d(e,"k",function(){return I}),n.d(e,"n",function(){return E}),n.d(e,"m",function(){return T}),n.d(e,"p",function(){return A}),n.d(e,"o",function(){return R}),n.d(e,"r",function(){return F}),n.d(e,"q",function(){return $});var u=n.i(s.d)({byId:i.Map(),allIds:i.List()}),c=n.i(s.d)({byId:i.Map(),allIds:i.List()}),p=n.i(s.d)({byId:i.Map(),allIds:i.List()}),d=n.i(s.d)({byId:i.Map(),allIds:i.List()}),h=n.i(s.d)({byId:i.Map(),allIds:i.List()}),f=n.i(s.d)({byId:i.Map(),allIds:i.List()}),m=n.i(s.d)({byId:i.Map(),allIds:i.List()}),_=n.i(s.d)({byId:i.Map(),allIds:i.List()}),g=n.i(s.d)({loaded:!1,weapons:u(),items:c(),armor:p(),enemies:d(),magic:h(),classes:f(),fixedEncounters:m(),randomEncounters:_()}),y=function(t){return function(e){return e[t].byId}},v=function(t){return t.loaded},b=function(t){return t.weapons.allIds},x=function(t){return t.weapons.byId},w=function(t){return t.armor.allIds},k=function(t){return t.armor.byId},M=function(t){return t.items.allIds},S=function(t){return t.items.byId},C=function(t){return t.enemies.allIds},O=function(t){return t.enemies.byId},P=function(t){return t.magic.allIds},I=function(t){return t.magic.byId},E=function(t){return t.classes.allIds},T=function(t){return t.classes.byId},A=function(t){return t.randomEncounters.allIds},R=function(t){return t.randomEncounters.byId},F=function(t){return t.fixedEncounters.allIds},$=function(t){return t.fixedEncounters.byId}},function(t,e,n){"use strict";var o=n(509),a=n(1),i=n(27),r=n(9),l=n(112),s=n(151),u=n(0);n.n(u);n.d(e,"a",function(){return c});var c=function(){function t(t,e){this.loader=t,this.store=e}return t.prototype.loadGameData=function(t){var e=this;return void 0===t&&(t=l.c),u.Observable.fromPromise(this.loader.loadAsType(t,o.a).then(function(t){e.store.dispatch(new s.d("weapons",t.data.weapons)),e.store.dispatch(new s.d("armor",t.data.armor)),e.store.dispatch(new s.d("items",t.data.items)),e.store.dispatch(new s.d("enemies",t.data.enemies)),e.store.dispatch(new s.d("magic",t.data.magic)),e.store.dispatch(new s.d("classes",t.data.classes)),e.store.dispatch(new s.d("randomEncounters",t.data.randomencounters)),e.store.dispatch(new s.d("fixedEncounters",t.data.fixedencounters))}))},t}();c=__decorate([n.i(a.d)(),__metadata("design:paramtypes",[i.a,r.a])],c)},function(t,e,n){"use strict";function o(t){var e=__assign({},t,{party:f.List(t.party),inventory:f.List(t.inventory),keyData:f.Map(t.keyData),position:n.i(_.a)(t.position),shipPosition:n.i(_.a)(t.shipPosition)});return g(e)}function a(t,e){switch(void 0===t&&(t=g()),e.type){case h.c.typeId:return o(e.payload);case h.d.typeId:case h.e.typeId:return t;case h.f.typeId:return t.merge({position:n.i(_.a)(e.payload.position),location:e.payload.location});case h.g.typeId:return n.i(m.b)(t.party.find(function(t){return t===e.payload.entityId}),"cannot equip item on entity that is not in the party"),n.i(m.b)(t.inventory.find(function(t){return t===e.payload.itemId}),"item does not exist in inventory"),t.merge({inventory:t.inventory.filter(function(t){return t!==e.payload.itemId})});case h.h.typeId:return n.i(m.b)(t.party.find(function(t){return t===e.payload.entityId}),"cannot remove item from entity that is not in the party"),n.i(m.b)(!t.inventory.find(function(t){return t===e.payload.itemId}),"item already exists in inventory"),t.merge({inventory:t.inventory.push(e.payload.itemId)});case h.i.typeId:case h.j.typeId:case h.k.typeId:case h.l.typeId:case h.m.typeId:case h.n.typeId:case h.o.typeId:case h.p.typeId:case h.q.typeId:case h.r.typeId:case h.s.typeId:return t;case h.t.typeId:return t.merge({position:e.payload});case h.u.typeId:return t.merge({keyData:t.keyData.set(e.payload.key,e.payload.value)});case h.a.typeId:return t.merge({gold:t.gold+e.payload});case h.v.typeId:return t.merge({gold:t.gold-e.payload.cost});case h.b.typeId:var a=e.payload;n.i(m.b)(a,"cannot add invalid item to inventory"),n.i(m.b)(a.eid,'item must have an eid. consider using "entityId" or "instantiateEntity" during creation'),n.i(m.b)(a.id,"item must have a template id. see game-data models for more information");var i=!!t.inventory.find(function(t){return t===a.eid});return n.i(m.b)(!i,"item already exists in inventory"),t.merge({inventory:t.inventory.push(a.eid)});case h.w.typeId:var r=e.payload,l=t.inventory.filter(function(t){return t!==r.eid});return n.i(m.b)(l.count()===t.inventory.count()-1,"item does not exist in party inventory to remove"),
t.merge({inventory:l});default:return n.i(m.e)(e),t}}function i(t){return t.gold}function r(t){return t.location}function l(t){return t.position}function s(t){return t.shipPosition}function u(t){return t.battleCounter}function c(t){return t.combatZone}function p(t){return t.party}function d(t){return t.inventory}var h=n(28),f=n(58),m=(n.n(f),n(35)),_=n(512);e.j=o,e.i=a,e.c=i,e.f=r,e.d=l,e.e=s,e.h=u,e.g=c,e.b=p,e.a=d;var g=n.i(m.d)({party:f.List(),inventory:f.List(),keyData:f.Map(),battleCounter:0,gold:0,location:"",combatZone:"",position:n.i(_.a)(),shipPosition:n.i(_.a)()})},function(t,e,n){"use strict";function o(t){return function(e,o){switch(o.type){case"SET_ROOT_STATE":case f.l.typeId:return __assign({},o.payload,{gameState:n.i(u.j)(o.payload.gameState),entities:n.i(d.f)(o.payload.entities),gameData:n.i(c.t)(o.payload.gameData),combat:n.i(p.e)(o.payload.combat),sprites:n.i(h.d)(o.payload.sprites)});default:return t(e,o)}}}function a(t,e){return v(t,e)}var i=n(522),r=(n.n(i),n(9)),l=n(675),s=(n.n(l),n(175)),u=n(214),c=n(212),p=n(210),d=n(211),h=n(216),f=n(28),m=n(511);e.a=a,n.d(e,"b",function(){return b});var _={router:s.a,gameData:c.s,gameState:u.i,combat:p.d,entities:d.e,sprites:h.c},g=[o,l.storeFreeze,m.a],y=[o],v=(i.compose.apply(void 0,g.concat([r.c]))(_),i.compose.apply(void 0,y.concat([r.c]))(_)),b=[]},function(t,e,n){"use strict";function o(t){var e={spritesById:i.Map(t.spritesById),loaded:t.loaded};return n.i(s.c)("",t.spritesById),u(e)}function a(t,e){switch(void 0===t&&(t=u()),e.type){case l.a.typeId:var o=i.Map(e.payload);return o.forEach(function(e,o){n.i(r.b)(!t.spritesById.has(o),"duplicates are not allowed. sprite ("+o+") is already declared")}),t.updateIn(["spritesById"],function(t){return t.merge(e.payload)});case l.b.typeId:return t.merge({loaded:!0});case l.c.typeId:case l.d.typeId:return t;default:return n.i(r.e)(e),t}}var i=n(58),r=(n.n(i),n(35)),l=n(152),s=n(80);e.d=o,e.c=a,n.d(e,"a",function(){return c}),n.d(e,"b",function(){return p});var u=n.i(r.d)({loaded:!1,spritesById:i.Map()}),c=function(t){return t.loaded},p=function(t){return t.spritesById}},function(t,e,n){"use strict";var o=n(1),a=n(27),i=n(9),r=n(152),l=n(31),s=n(0),u=(n.n(s),n(4)),c=(n.n(u),n(80));n.d(e,"a",function(){return p});var p=function(){function t(t,e){this.resourceLoader=t,this.store=e}return t.prototype.loadSprites=function(t){var e=this;return this.store.select(l.p).take(1).switchMap(function(o){if(!o)return s.Observable.fromPromise(e.resourceLoader.load(t).then(function(t){var o=t[0],a=u.map(o.data,function(t){return t+".json"});return Promise.all(u.map(a,function(t){return e.resourceLoader.load(t).then(function(o){var a=o[0].data;console.log("dispatch for "+t),e.store.dispatch(new r.a(a)),n.i(c.c)(t,a)})}))}).then(function(){return Promise.resolve(void 0)}))})},t}();p=__decorate([n.i(o.d)(),__metadata("design:paramtypes",[a.a,i.a])],p)},function(t,e,n){"use strict";var o=n(234),a=n(104),i=n(48),r=n(1);n.d(e,"a",function(){return l});var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.connectBehavior=function(){return t.prototype.connectBehavior.call(this)&&this.host instanceof a.a},e.prototype.process=function(e){if(!this.host)return void t.prototype.process.call(this,e);var n=e.context.canvas.width,o=new i.a(0,0,e.context.canvas.width,e.context.canvas.height);e.cameraScale=n>1024?6:n>768?4:n>480?3:2,e.camera=e.screenToWorld(o,e.cameraScale),e.camera.point.x=this.host.bounds.extent.x/2-e.camera.extent.x/2},e}(o.a);l=__decorate([n.i(r._24)({selector:"combat-camera-behavior",template:"<ng-content></ng-content>"})],l)},function(t,e,n){"use strict";var o=n(1),a=n(54),i=n(31),r=n(9),l=n(21),s=n(27);n.d(e,"a",function(){return u});var u=function(){function t(t,e,n){this.store=t,this.loadingService=e,this.loader=n,this.party$=this.store.select(i.b)}return t.prototype.getMemberClass=function(t,e){return{focused:e&&e.model&&t&&t.model&&t.model.name===e.model.name}},t}();__decorate([n.i(o.M)(),__metadata("design:type",a.a)],u.prototype,"scene",void 0),u=__decorate([n.i(o._24)({selector:"combat-hud",changeDetection:o._25.OnPush,styles:[n(948)],template:n(681)}),__metadata("design:paramtypes",[r.a,l.a,s.a])],u)},function(t,e,n){"use strict";var o=n(78),a=n(1),i=n(9),r=n(31);n.d(e,"a",function(){return l});var l=function(){function t(t,e){this.store=t,this.router=e}return t.prototype.canActivate=function(t,e){var n=this;return this.store.select(r.c).take(1).map(function(e){return e&&"none"!==e.type?e.id===t.params.id:(n.router.navigate(["/"]),!1)})},t}();l=__decorate([n.i(a.d)(),__metadata("design:paramtypes",[i.a,o.j])],l)},function(t,e,n){"use strict";var o=n(1),a=n(267),i=(n.n(a),n(21)),r=n(15);n.d(e,"a",function(){return l});var l=function(){function t(t,e){this.world=t,this.loadingService=e}return t.prototype.resolve=function(t,e){return this.loadingService.loading=!0,this.loadingService.title="RPG!",this.loadingService.message="Initializing the world...",this.world.ready$.take(1)},t}();l=__decorate([n.i(o.d)(),__metadata("design:paramtypes",[r.a,i.a])],l)},function(t,e,n){"use strict";var o=n(15),a=n(49),i=n(104),r=n(69),l=n(28),s=n(31),u=n(1),c=n(54);n.d(e,"a",function(){return p});var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.combatFlag=!1,e.combatZone="default",e.isDangerous=!1,e.enabled=!1,e.player=null,e}return __extends(e,t),e.prototype.connectBehavior=function(){var e=this,n=o.a.get();return!!(n&&t.prototype.connectBehavior.call(this)&&this.host instanceof i.a)&&(n.store.select(s.o).take(1).subscribe(function(t){void 0===t&&e.resetBattleCounter()}),!0)},e.prototype.disconnectBehavior=function(){return this.player&&this.player.off(null,null,this),this.player=null,t.prototype.disconnectBehavior.call(this)},e.prototype.syncBehavior=function(){return t.prototype.syncBehavior.call(this),this.enabled=this.host.map&&this.host.map.properties&&this.host.map.properties.combat,this.stopListening(),this.player=null,this.host.scene&&(this.player=this.host.scene.objectByComponent(r.a)),this.listenMoves(),!!this.player},e.prototype.listenMoves=function(){this.stopListening(),this.player&&this.enabled&&this.player.on(r.a.Events.MOVE_BEGIN,this.moveProcess,this)},e.prototype.stopListening=function(){this.player&&this.player.off(null,null,this)},e.prototype.moveProcess=function(t,e,n){var o=this.host.getTerrain("Terrain",n.x,n.y);this.isDangerous=o&&o.isDangerous;var a=this.isDangerous?10:6;return this.battleCounter<=0&&this.triggerCombat(n),this._setCounter(this.battleCounter-a),!1},e.prototype.resetBattleCounter=function(){var t=255,e=64;this._setCounter(Math.floor(Math.random()*(t-e+1))+e),this.combatFlag=!1},e.prototype.triggerCombat=function(t){var e=this,n=this.host.getCombatZones(t);n.fixed=!1,this.combatZone=n.map||n.target,console.log("Combat in zone : "+this.combatZone),this.stopListening(),console.warn("HACK in triggerCombat - static get GameWorld... need injection strategy");o.a.get();this.randomEncounter(n,function(){e.resetBattleCounter(),e.listenMoves()}),this.combatFlag=!0},e.prototype.randomEncounter=function(t,e){},e.prototype._setCounter=function(t){this.battleCounter=t;var e=o.a.get();e&&e.store.dispatch(new l.u("battleCounter",this.battleCounter))},e}(a.a);__decorate([n.i(u.M)(),__metadata("design:type",c.a)],p.prototype,"scene",void 0),p=__decorate([n.i(u._24)({selector:"combat-encounter-behavior",template:"<ng-content></ng-content>"})],p)},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(120)),i=n(81),r=n(48),l=n(1),s=n(54);n.d(e,"a",function(){return u});var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hitBox=new r.a(0,0,1,1),e.hits=[],e.mouse=null,e}return __extends(e,t),e.prototype.syncBehavior=function(){return!!(t.prototype.syncBehavior.call(this)&&this.host.scene&&this.host.scene.world&&this.host.scene.world.input)&&(this.mouse=this.host.scene.world.input.getMouseHook("world"),!!this.mouse)},e.prototype.tick=function(e){this.host.scene&&this.mouse&&(o.each(this.hits,function(t){t.scale=1}),this.hits.length=0,this.hitBox.point.set(this.mouse.world),this.host.scene.db.queryRect(this.hitBox,a.a,this.hits),o.each(this.hits,function(t){t.scale=1.25}),t.prototype.tick.call(this,e))},e}(i.a);__decorate([n.i(l.M)(),__metadata("design:type",s.a)],u.prototype,"scene",void 0),u=__decorate([n.i(l._24)({selector:"map-feature-input-behavior",template:"<ng-content></ng-content>"})],u)},function(t,e,n){"use strict";var o=n(234),a=n(1),i=n(13);n.d(e,"a",function(){return r});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.process=function(t){var e=t.context.canvas.width;t.camera.point.set(this.host.point),t.cameraScale=e>1024?6:e>768?4:e>480?3:2;var n=new i.a(t.context.canvas.width,t.context.canvas.height),o=t.screenToWorld(n,t.cameraScale);t.camera.extent.set(o),t.camera.setCenter(this.host.renderPoint||this.host.point),this.host.tileMap&&(t.camera.point.x=Math.min(t.camera.point.x,this.host.tileMap.bounds.extent.x-t.camera.extent.x),t.camera.point.y=Math.min(t.camera.point.y,this.host.tileMap.bounds.extent.y-t.camera.extent.y),t.camera.point.x=Math.max(0,t.camera.point.x),t.camera.point.y=Math.max(0,t.camera.point.y),this.host.tileMap.bounds.extent.x<t.camera.extent.x&&(t.camera.point.x=(this.host.tileMap.bounds.extent.x-t.camera.extent.x)/2),this.host.tileMap.bounds.extent.y<t.camera.extent.y&&(t.camera.point.y=(this.host.tileMap.bounds.extent.y-t.camera.extent.y)/2))},e}(o.a);r=__decorate([n.i(a._24)({selector:"player-camera-behavior",template:"<ng-content></ng-content>"})],r)},function(t,e,n){"use strict";var o=n(120),a=n(81),i=n(111),r=n(69),l=n(1);n.d(e,"a",function(){return s});var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collider=null,e.player=null,e.featureObject=null,e.onLook=new l.D,e.onLookAway=new l.D,e}return __extends(e,t),e.prototype.syncBehavior=function(){return t.prototype.syncBehavior.call(this),this.player=this.host.findBehavior(r.a),this.collider=this.host.findBehavior(i.a),!(!this.player||!this.collider)},e.prototype.tick=function(e){if(t.prototype.tick.call(this,e),this.player&&this.collider){var n=[],a=this.host.point.x+this.player.heading.x,i=this.host.point.y+this.player.heading.y,r=this.collider.collide(a,i,o.a,n),l=n[0],s=this.featureObject?this.featureObject._uid:null,u=!(!l||l._uid===s);r&&l&&!u||this.featureObject&&(this.onLookAway.emit(this.featureObject),this.featureObject=null),l&&r&&(this.featureObject=l,u&&this.onLook.emit(this.featureObject))}},e}(a.a);__decorate([n.i(l._17)(),__metadata("design:type",l.D)],s.prototype,"onLook",void 0),__decorate([n.i(l._17)(),__metadata("design:type",l.D)],s.prototype,"onLookAway",void 0),s=__decorate([n.i(l._24)({selector:"player-look-behavior",template:"<ng-content></ng-content>"})],s)},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(288)),i=n(315),r=n(1),l=n(104);n.d(e,"a",function(){return s});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.buildWeightedGraph=function(){var t,e=this,n=this.tileMap.getLayers(),i=n.length,r=new Array(this.tileMap.bounds.extent.x);for(t=0;t<this.tileMap.bounds.extent.x;t++)r[t]=new Array(this.tileMap.bounds.extent.y);for(t=0;t<this.tileMap.bounds.extent.x;t++)for(var l=0;l<this.tileMap.bounds.extent.y;l++){for(var s=10,u=!1,c=0;c<i;c++){var p=this.tileMap.getTileData(n[c],t,l);p&&(p.passable===!1?(s=1e3,u=!0):p.isPath===!0&&(s=1))}r[t][l]=s}return o.each(this.tileMap.features.objects,function(t){var n=t.properties;if(n){var i=a.a.COLLIDE_TYPES;if(n.passable!==!0&&n.type&&o.indexOf(i,n.type)!==-1){var l=t.x/t.width|0,s=t.y/t.height|0;!n.passable&&e.tileMap.bounds.pointInRect(l,s)&&(r[l][s]=100)}}}),r},e}(i.a);__decorate([n.i(r.M)(),__metadata("design:type",l.a)],s.prototype,"tileMap",void 0),s=__decorate([n.i(r._24)({selector:"player-map-path-behavior",template:"<ng-content></ng-content>"})],s)},function(t,e,n){"use strict";var o=n(1),a=n(8),i=n(228),r=n(146),l=n(170),s=n(144),u=n(169),c=n(301),p=n(97),d=n(171);n.d(e,"b",function(){return h}),n.d(e,"a",function(){return m});var h=[i.a],f=[d.a].concat(l.a,u.a,c.a),m=_=function(){function t(){}return t.forRoot=function(){return{ngModule:_,providers:h}},t}();m=_=__decorate([n.i(o.x)({declarations:f,exports:f,imports:[p.v,a.c,s.a,r.a]})],m);var _},function(t,e,n){"use strict";var o=n(78),a=n(1),i=n(9),r=n(31);n.d(e,"a",function(){return l});var l=function(){function t(t,e){this.store=t,this.router=e}return t.prototype.canActivate=function(t,e){var n=this;return this.store.select(r.q).take(1).map(function(e){return e===t.params.id||(n.router.navigate(["/"]),!1)})},t}();l=__decorate([n.i(a.d)(),__metadata("design:paramtypes",[i.a,o.j])],l)},function(t,e,n){"use strict";var o=n(79);n.d(e,"a",function(){return a});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.fetch=function(t){var e=this;return this.url=t||this.url,new Promise(function(t,n){var o=new Image;o.onload=function(){e.data=o,t(e)},o.onerror=function(t){n(t)},o.src=e.url})},e}(o.a)},function(t,e,n){"use strict";(function(t){var o=n(70),a=n(232),i=n(173),r=n(231),l=n(4),s=(n.n(l),n(91));n.n(s);n.d(e,"a",function(){return u});var u=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.width=0,t.height=0,t.orientation="orthogonal",t.tileheight=16,t.tilewidth=16,t.version=1,t.properties={},t.tilesets={},t.layers=[],t.xmlHeader='<?xml version="1.0" encoding="UTF-8"?>',t}return __extends(i,e),i.prototype.write=function(){var e=this,i=t("<map/>");return n.i(a.c)(i,"version",this.version),n.i(a.c)(i,"orientation",this.orientation),n.i(a.c)(i,"width",this.width),n.i(a.c)(i,"height",this.height),n.i(a.c)(i,"tilewidth",this.tilewidth),n.i(a.c)(i,"tileheight",this.tileheight),n.i(a.d)(i,this.properties),l.each(this.tilesets,function(e){if(!e.literal)throw new Error("Add support for inline TSX writing");if(!e.firstgid)throw new Error(o.a.INVALID_ITEM);var n=t("<tileset/>");n.attr("firstgid",e.firstgid),n.attr("source",e.literal),i.append(n)}),l.each(this.layers,function(r){var s=null;if("undefined"!=typeof r.data){s=t("<layer/>"),n.i(a.e)(s,r);var u=t("<data/>"),c=e.width*e.height;if(r.data.length!==c)throw new Error(o.a.INVALID_ITEM);u.attr("encoding","csv"),u.text(r.data.join(",")),s.append(u)}else{if("undefined"==typeof r.objects)throw new Error(o.a.INVALID_ITEM);s=t("<objectgroup/>"),l.each(r.objects,function(e){var o=t("<object/>");n.i(a.e)(o,e),n.i(a.d)(o,e.properties),s.append(o)})}n.i(a.f)(s,r),i.append(s)}),this.xmlHeader+n.i(a.g)(i[0])},i.prototype.load=function(e){var o=this;return this.data=e||this.data,new Promise(function(e,i){o.$map=o.getRootNode("map"),o.version=parseInt(o.getElAttribute(o.$map,"version"),10),o.width=parseInt(o.getElAttribute(o.$map,"width"),10),o.height=parseInt(o.getElAttribute(o.$map,"height"),10),o.orientation=o.getElAttribute(o.$map,"orientation"),o.tileheight=parseInt(o.getElAttribute(o.$map,"tileheight"),10),o.tilewidth=parseInt(o.getElAttribute(o.$map,"tilewidth"),10),o.properties=n.i(a.a)(o.$map);var s=[],u=o.getChildren(o.$map,"tileset"),c=o.url.substr(0,o.url.lastIndexOf("/")+1);l.each(u,function(t){var e=o.getElAttribute(t,"source"),i=parseInt(o.getElAttribute(t,"firstgid")||"-1",10);e?s.push({source:n.i(a.b)(c,e),literal:e,firstgid:i}):s.push({data:t,source:c,firstgid:i})});var p=o.getChildren(o.$map,"layer,objectgroup"),d=!1;if(l.each(p,function(e){if(!d){var r=n.i(a.h)(e);o.layers.push(r);var s=o.getChild(e,"data");if(s){var u=o.getElAttribute(s,"encoding");if(!u||"csv"!==u.toLowerCase())return d=!0,i("pow-core only supports CSV maps. Edit the Map Properties (for:"+o.url+") to use the CSV");r.data=JSON.parse("["+t.trim(s.text())+"]")}var c=o.getElAttribute(e,"color");c&&(r.color=c);var p=o.getChildren(e,"object");p&&(r.objects=[],l.each(p,function(t){r.objects.push(n.i(a.i)(t))}))}}),!d){var h=function(){if(s.length<=0)return e(o);var t=s.shift();t.data?(new r.a).load(t.data).then(function(e){e.relativeTo=c,e.firstgid=t.firstgid,o.tilesets[e.name]=e,h()}).catch(function(t){return i(t)}):t.source?(new r.a).fetch(t.source).then(function(e){o.tilesets[e.name]=e,e.firstgid=t.firstgid,e.literal=t.literal,h()}).catch(function(t){return i(t)}):i("Unknown type of tile set data")};h()}})},i}(i.a)}).call(e,n(91))},function(t,e,n){"use strict";var o=n(173),a=n(229),i=n(4),r=(n.n(i),n(232));n.d(e,"a",function(){return s});var l=function(){function t(t){this.properties={},this.id=t}return t}(),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=null,e.tilewidth=16,e.tileheight=16,e.imageWidth=0,e.imageHeight=0,e.image=null,e.firstgid=-1,e.tiles=[],e.relativeTo=null,e.imageUrl=null,e.literal=null,e}return __extends(e,t),e.prototype.load=function(t){var e=this;return this.data=t||this.data,new Promise(function(t,o){var s=e.getRootNode("tileset");e.name=e.getElAttribute(s,"name"),e.tilewidth=parseInt(e.getElAttribute(s,"tilewidth"),10),e.tileheight=parseInt(e.getElAttribute(s,"tileheight"),10);var u=e.url?e.url.substr(0,e.url.lastIndexOf("/")+1):"",c=e.getChildren(s,"tile");i.each(c,function(t){var o=parseInt(e.getElAttribute(t,"id"),10),a=new l(o);a.properties=n.i(r.a)(t),e.tiles.push(a)});var p=e.getChild(s,"img");if(!p||0===p.length)return t(e);var d=e.getElAttribute(p,"source");e.imageWidth=parseInt(e.getElAttribute(p,"width")||"0",10),e.imageHeight=parseInt(e.getElAttribute(p,"height")||"0",10),e.imageUrl=n.i(r.b)(e.relativeTo?e.relativeTo:u,d),console.log("Tileset source: "+e.imageUrl),new a.a(e.imageUrl).fetch().then(function(n){e.image=n,e.imageWidth=e.image.data.width,e.imageHeight=e.image.data.height;for(var o=e.imageWidth/e.tilewidth,a=e.imageHeight/e.tileheight,r=o*a,l=new Array(r),s=0;s<r;s++)l[s]=!1;i.each(e.tiles,function(t){l[t.id]=t.properties}),e.tiles=l,t(e)}).catch(function(t){o("Failed to load required TileMap image: "+d+" - "+t)})})},e.prototype.hasGid=function(t){return this.firstgid!==-1&&t>=this.firstgid&&t<this.firstgid+this.tiles.length},e.prototype.getTileMeta=function(t){var e=this.firstgid!==-1?t-this.firstgid:t,n=this.imageWidth/this.tilewidth,o=e%n,a=Math.floor((e-o)/n);return i.extend(this.tiles[e]||{},{image:this.image,url:this.imageUrl,x:o*this.tilewidth,y:a*this.tileheight,width:this.tilewidth,height:this.tileheight})},e}(o.a)},function(t,e,n){"use strict";(function(t){function o(t){return{name:_(t,"name"),x:parseInt(_(t,"x")||"0",10),y:parseInt(_(t,"y")||"0",10),width:parseInt(_(t,"width")||"0",10),height:parseInt(_(t,"height")||"0",10),visible:1===parseInt(_(t,"visible")||"1",10),_xml:t}}function a(t,e){m(t,"name",e.name),e.type&&m(t,"type",e.type),0!==e.x&&m(t,"x",e.x),0!==e.y&&m(t,"y",e.y),m(t,"width",e.width),m(t,"height",e.height),e.visible===!1&&m(t,"visible",e.visible),"undefined"!=typeof e.color&&m(t,"color",e.color)}function i(t,e){a(t,e)}function r(t){var e=l(t),n=_(t,"type");return n&&(e.type=n),e}function l(t){var e=o(t);e.opacity=parseInt(_(t,"opacity")||"1",10);var n=p(t);return n&&(e.properties=n),e}function s(t,e){var n=t.split("/"),o=e.split("/");n.pop();for(var a=0;a<o.length;a++)"."!==o[a]&&(".."===o[a]?n.pop():n.push(o[a]));return n.join("/")}function u(t){try{return(new XMLSerializer).serializeToString(t)}catch(e){try{return t.xml}catch(t){throw new Error("Xmlserializer not supported")}}}function c(t,e){a(t,e),m(t,"opacity",e.opacity),d(t,e.properties)}function p(t){var e=f(t,"properties");if(e&&e.length>0){var n={},o=h(e,"property");return g.each(o,function(t){var e=_(t,"name"),o=_(t,"value");if("string"==typeof o){var a=o.toLowerCase(),i=parseFloat(o);"true"===a||"false"===a?o="true"===a:isNaN(i)||(o=i)}n[e]=o}),n}return null}function d(e,n){var o=t("<properties/>");g.each(n,function(e,n){var a=t("<property/>");m(a,"name",n),m(a,"value",e),o.append(a)}),o.children().length>0&&e.append(o)}function h(e,n){var o=e.find(n);return g.compact(g.map(o,function(n){var o=t(n);return o.parent()[0]!==e[0]?null:o}))}function f(t,e){return h(t,e)[0]}function m(t,e,n){t.attr(e,n)}function _(t,e){return t.attr(e)||null}var g=n(4);n.n(g);e.e=i,e.i=r,e.h=l,e.b=s,e.g=u,e.f=c,e.a=p,e.d=d,e.c=m}).call(e,n(91))},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(1));n.d(e,"a",function(){return r});var i=null,r=l=function(){function t(){this.tickRateMS=32,this.mspf=0,this.world=null,this.lastTime=0,this.time=0,this.running=!1,this.objects=[],this.polyFillAnimationFrames()}return t.get=function(){return i||(i=new l),i},t.prototype.start=function(){var t=this;if(!this.running){this.running=!0;var e=function(n){if(t.running){t.time=Math.floor(n);var o=(new Date).getMilliseconds(),a=Math.floor(n-t.lastTime);a>=t.tickRateMS&&(t.lastTime=n,t.tickObjects(a)),t.processFrame(a),t.mspf=(new Date).getMilliseconds()-o,window.requestAnimationFrame(e)}};return e(0),this}},t.prototype.stop=function(){return this.running=!1,this},t.prototype.removeObject=function(t){return this.objects=o.reject(this.objects,function(e){return e._uid===t._uid}),this},t.prototype.addObject=function(t){return t._uid||(t._uid=o.uniqueId("u")),0===o.where(this.objects,{_uid:t._uid}).length&&this.objects.push(t),this},t.prototype.tickObjects=function(t){for(var e=this.objects,n=e.length-1;n>=0;--n)e[n].tick&&e[n].tick(t);return this},t.prototype.processFrame=function(t){for(var e=this.objects,n=e.length-1;n>=0;--n)e[n].processFrame&&e[n].processFrame(t);return this},t.prototype.polyFillAnimationFrames=function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length;n++){if(window.requestAnimationFrame)return;window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var n=(new Date).getTime(),o=Math.max(0,16-(n-t)),a=function(){e(n+o)},i=window.setTimeout(a,o);return t=n+o,i})},t}();r=l=__decorate([n.i(a.d)(),__metadata("design:paramtypes",[])],r);var l},function(t,e,n){"use strict";var o=n(49),a=n(13);n.d(e,"a",function(){return i});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.process=function(t){t.camera.point.set(this.host.point),t.cameraScale=t.context.canvas.width>768?4:2;var e=new a.a(t.context.canvas.width,t.context.canvas.height),n=t.screenToWorld(e,t.cameraScale);t.camera.extent.set(n)},e}(o.a)},function(t,e,n){"use strict";var o=n(13);n.d(e,"a",function(){return a});var a=function(){function t(){this._renderPoint=new o.a}return t.prototype.render=function(t,e,n,o){if(t&&t.visible!==!1&&t.image){this._renderPoint.set(e);var a=this._renderPoint,i=n.unitSize,r=n.unitSize;o&&"undefined"!=typeof o.cellWidth&&"undefined"!=typeof o.cellHeight&&(i=o.cellWidth,r=o.cellHeight);var l=n.fastScreenToWorldNumber(i),s=n.fastScreenToWorldNumber(r);if(a.x-=l*t.scale/2,a.y-=s*t.scale/2,n.fastWorldToScreenPoint(a,a),t.icon&&o){var u=o.x,c=o.y;if(o.frames>1){var p=o.width/i,d=t.frame%p,h=Math.floor((t.frame-d)/p);u+=d*i,c+=h*r}n.context.drawImage(t.image,u,c,i,r,a.x,a.y,i*t.scale,r*t.scale)}else n.context.drawImage(t.image,a.x,a.y,i*t.scale,r*t.scale)}},t}()},function(t,e,n){"use strict";var o=n(313),a=n(316),i=n(234),r=n(122);n.d(e,"a",function(){return l});var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapRenderer=new a.a,e._bounds=new r.b,e}return __extends(e,t),e.prototype._onResize=function(t){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this._bounds.set(this.canvas.width,this.canvas.height),this._bounds=this.screenToWorld(this._bounds);var e=this.context;e.webkitImageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.imageSmoothingEnabled=!1},e.prototype.getCameraClip=function(){if(!this.map)return this.camera;var t=this.camera.clone();t.point.round(),t.extent.round();var e=this.map.bounds;return t.point.x<e.point.x&&(t.point.x+=e.point.x-t.point.x),t.point.y<e.point.y&&(t.point.y+=e.point.y-t.point.y),t.point.x+t.extent.x>e.point.x+e.extent.x&&(t.point.x-=t.point.x+t.extent.x-(e.point.x+e.extent.x)),t.point.y+t.extent.y>e.point.y+e.extent.y&&(t.point.y-=t.point.y+t.extent.y-(e.point.y+e.extent.y)),t},e.prototype.processCamera=function(){this.cameraComponent=this.findBehavior(i.a),!this.cameraComponent&&this.map&&(this.cameraComponent=this.map.findBehavior(i.a)),this.cameraComponent||(this.cameraComponent=this.scene.componentByType(i.a)),t.prototype.processCamera.call(this)},e.prototype.setRenderState=function(){if(t.prototype.setRenderState.call(this),this.camera&&this.context&&this.map){var e=this.worldToScreen(this.camera.point),n=this.worldToScreen(this.map.bounds.point);n.x=parseFloat(n.x.toFixed(2)),n.y=parseFloat(n.y.toFixed(2)),e.x=parseFloat(e.x.toFixed(2)),e.y=parseFloat(e.y.toFixed(2)),this.context.translate(n.x-e.x,n.y-e.y)}},e.prototype.renderFrame=function(t){if(this.clearRect(),this.map)return this.mapRenderer.render(this.map,this),this},e.prototype.renderPost=function(){},e}(o.a)},function(t,e,n){"use strict";var o=n(82),a=n(49);n.d(e,"a",function(){return i});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.syncBehavior=function(){return!!this.host.tileMap&&this.host.tileMap instanceof o.a},e.prototype.disconnectBehavior=function(){return!0},e.prototype.enter=function(t){return!0},e.prototype.entered=function(t){return this.host.trigger(e.Events.ENTERED,this),this.isEntered=!0,!0},e.prototype.exit=function(t){return!0},e.prototype.exited=function(t){return this.host.trigger(e.Events.EXITED,this),this.isEntered=!1,!0},e}(a.a);i.Events={ENTERED:"tile:entered",EXITED:"tile:exited"}},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(124)),i=n(122),r=n(311),l=n(15),s=n(82),u=n(123);n.d(e,"a",function(){return p});var c={visible:!0,enabled:!0,icon:"",scale:1,image:null,tileMap:null},p=function(t){function e(){var e=t.call(this,{})||this;return e.frame=0,o.extend(e,o.defaults({},c)),e}return __extends(e,t),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(t){this._updateIcon(t),this._icon=t},enumerable:!0,configurable:!0}),e.prototype.setPoint=function(t){var e=new i.b(t).round();this.renderPoint&&(this.renderPoint=e.clone()),this.point=e.clone();var n=this.findBehavior(r.a);n&&(n.targetPoint.set(e),n.path.length=0)},e.prototype.onAddToScene=function(e){t.prototype.onAddToScene.call(this,e),this.icon&&this.setSprite(this.icon),this.tileMap||(this.tileMap=this.scene.objectByType(s.a))},e.prototype.setSprite=function(t,e){var n=this;void 0===e&&(e=0);var o=this.icon;if(t){var a=l.a.get();if(!a)return o;var i=a.sprites.getSpriteMeta(t);a.sprites.getSpriteSheet(i.source).then(function(t){var o=t[0];n.meta=i,n.image=o.data,n.frame=e})}else this.meta=null;return this.icon=t,o},e.prototype._updateIcon=function(t){var e=this,n=l.a.get();if(n&&this._icon!==t){var o=n.sprites.getSpriteMeta(name);o&&n.sprites.getSpriteSheet(o.source).then(function(t){var n=t[0];e.meta=o,e.image=n.data})}},e.prototype.getIcon=function(){if(this.icon)return this.icon;var t=this.findBehavior(a.a);return t?t.icon:null},e}(u.a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var o=n(24),a=n(1);n.d(e,"a",function(){return l}),n.d(e,"b",function(){return s});var i=[],r=function(t){return t};n.i(a.a)(),r=function(t){return n.i(o.b)(),t},i=i.slice();var l=r,s=i.slice()},,function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=279},,,,,,,,function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"combat-attack-behavior",[],null,null,null,o,p)),i._33(49152,null,0,r.a,[l.a,s.a,u.a],null,null)],null,null)}var i=n(1),r=n(101),l=n(16),s=n(25),u=n(15);n.d(e,"b",function(){return p}),e.a=o;var c=[],p=i._30({encapsulation:2,styles:c,data:{}});i._35("combat-attack-behavior",r.a,a,{combat:"combat"},{},["*"])},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(311)),i=n(238),r=n(13),l=n(118),s=n(237),u=n(82);n.d(e,"a",function(){return c});var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.passableKeys=["passable"],e._lastFrame=3,e._renderFrame=3,e.heading=new r.a(0,-1),e.sprite=null,e.collideComponentType=s.a,e}return __extends(e,t),e.prototype.syncBehavior=function(){return this.sprite=this.host.findBehavior(l.b),t.prototype.syncBehavior.call(this)},e.prototype.tick=function(e){this._lastFrame=this._renderFrame>3?this._renderFrame-4:this._renderFrame,t.prototype.tick.call(this,e)},e.prototype.interpolateTick=function(e){if(t.prototype.interpolateTick.call(this,e),this.sprite){var n=this.targetPoint.x!==this.host.renderPoint.x,o=this.targetPoint.y!==this.host.renderPoint.y;this.velocity.y>0&&o?(this.sprite.setHeading(l.a.SOUTH,o),this.heading.set(0,1)):this.velocity.y<0&&o?(this.sprite.setHeading(l.a.NORTH,o),this.heading.set(0,-1)):this.velocity.x<0&&n?(this.sprite.setHeading(l.a.WEST,n),this.heading.set(-1,0)):this.velocity.x>0&&n?(this.sprite.setHeading(l.a.EAST,n),this.heading.set(1,0)):this.velocity.y>0?(this.sprite.setHeading(l.a.SOUTH,!1),this.heading.set(0,1)):this.velocity.y<0?(this.sprite.setHeading(l.a.NORTH,!1),this.heading.set(0,-1)):this.velocity.x<0?(this.sprite.setHeading(l.a.WEST,!1),this.heading.set(-1,0)):this.velocity.x>0?(this.sprite.setHeading(l.a.EAST,!1),this.heading.set(1,0)):this.sprite.setMoving(!1)}},e.prototype.collideWithMap=function(t,e){var n=this.host.scene.objectByType(u.a);if(n)for(var o=n.getLayers(),a=0;a<o.length;a++){var i=n.getTileData(o[a],t.x,t.y);if(i&&i[e]===!1)return!0}return!1},e.prototype.collideMove=function(t,e,n){return void 0===n&&(n=[]),!1},e.prototype.beginMove=function(t){var n,o,a;if(this.host.trigger(e.Events.MOVE_BEGIN,this,t.from,t.to),this.collider){var r=[];for(this.collider.collide(t.from.x,t.from.y,i.a,r),a=0;a<r.length;a++)if(o=r[a],n=o.findBehavior(this.collideComponentType),n&&n.enter&&n.exit(this.host)===!1)return;for(r.length=0,this.collider.collide(t.to.x,t.to.y,i.a,r),a=0;a<r.length;a++)if(o=r[a],n=o.findBehavior(this.collideComponentType),n&&n.enter&&n.enter(this.host)===!1)return}},e.prototype.completeMove=function(t){var n,a=this;if(this.host.trigger(e.Events.MOVE_END,this,t.from,t.to),this.collider){var r=[];this.collider.collide(t.from.x,t.from.y,i.a,r);var l=o.find(r,function(t){return t._uid!==a.host._uid});l&&(n=l.findBehavior(this.collideComponentType),n&&n.host._uid!==this.host._uid&&n.exited(this.host)),r.length=0,this.collider.collide(t.to.x,t.to.y,i.a,r);var s=o.find(r,function(t){return t._uid!==a.host._uid});s&&(n=s.findBehavior(this.collideComponentType),n&&n.host._uid!==this.host._uid&&n.entered(this.host))}},e}(a.a);c.COLLIDE_TYPES=["TempleFeatureComponent","StoreFeatureComponent","DialogFeatureComponent","sign"],c.Events={MOVE_BEGIN:"move:begin",MOVE_END:"move:end"}},function(t,e,n){"use strict";var o=n(99);n.d(e,"a",function(){return a});var a=[o.a]},function(t,e,n){"use strict";var o=n(148),a=n(11);n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=[o.a],r=[a.a]},function(t,e,n){"use strict";var o=n(208);n.d(e,"a",function(){return a});var a=[o.a]},function(t,e,n){"use strict";var o=n(149);n.d(e,"a",function(){return a});var a=[o.a]},function(t,e,n){"use strict";var o=n(209);n.d(e,"a",function(){return a});var a=[o.a]},function(t,e,n){"use strict";var o=n(60);n.d(e,"a",function(){return a});var a=[o.a]},function(t,e,n){"use strict";function o(t,e,o){var a=t.allIds.indexOf(o);return n.i(s.b)(a===-1,"item ("+o+") already exists in collection"),t=t.updateIn(["allIds"],function(t){return t.push(o)}),t.updateIn(["byId"],function(t){return t.set(o,e)})}function a(t,e,o){var a=t.allIds.indexOf(o);return n.i(s.b)(a!==-1,"item ("+o+") does not exist in collection"),t.updateIn(["byId"],function(t){return t.set(o,l.Map(t.get(o)).merge(e).toJS())});
}function i(t,e){var o=t.allIds.indexOf(e);return n.i(s.b)(o!==-1,"item ("+e+") does not exist in collection"),t=t.updateIn(["allIds"],function(t){return t.filter(function(t){return t!==e})}),t.updateIn(["byId"],function(t){return t.remove(e)})}function r(t){return{byId:l.Map(t.byId),allIds:l.List(t.allIds)}}var l=n(58),s=(n.n(l),n(35));e.b=o,e.d=a,e.c=i,e.a=r},function(t,e,n){"use strict";var o=n(1),a=n(42),i=(n.n(a),n(83)),r=n(100),l=n(25),s=n(11),u=n(175),c=n(35),p=n(9),d=n(31);n.d(e,"a",function(){return h});var h=function(){function t(t,e,o,i){var l=this;this.actions$=t,this.store=e,this.notificationService=o,this.combatService=i,this.beginCombat$=this.actions$.ofType(r.c.typeId).switchMap(function(t){return l.combatService.loadEncounter(t.payload)}).map(function(t){return new r.d(t)}).catch(function(t){return a.Observable.of(new r.f(t.toString()))}),this.navigateToCombatRoute$=this.actions$.ofType(r.d.typeId).debounceTime(100).distinctUntilChanged().map(function(t){var e=t.payload;return n.i(c.b)(e.id||e.zone,"combat must either be in a zone or have an id"),n.i(u.c)(["combat",e.id||e.zone])}),this.combatVictory$=this.actions$.ofType(r.b.typeId).switchMap(function(t){var e=t.payload;return a.Observable.create(function(n){return l.notificationService.show("Found "+e.gold+" gold!",null,0),e.items&&e.items.forEach(function(t){l.notificationService.show("Found "+t.name,null,0)}),l.notificationService.show("Gained "+e.exp+" experience!",null,0),e.levels.forEach(function(t){l.notificationService.show(t.name+" reached level "+t.level+"!",null,0)}),l.notificationService.show("Enemies Defeated!",function(){n.next(t),n.complete()}),function(){}})}).map(function(t){return new r.e(t.payload)}),this.navigateToMapRoute$=this.actions$.ofType(r.e.typeId).debounceTime(100).switchMap(function(){return l.store.select(d.q)}).map(function(t){return n.i(c.b)(t,"cannot return to invalid map from combat"),n.i(u.c)(["world",t])})}return t}();__decorate([n.i(i.b)(),__metadata("design:type",Object)],h.prototype,"beginCombat$",void 0),__decorate([n.i(i.b)(),__metadata("design:type",Object)],h.prototype,"navigateToCombatRoute$",void 0),__decorate([n.i(i.b)(),__metadata("design:type",Object)],h.prototype,"combatVictory$",void 0),__decorate([n.i(i.b)(),__metadata("design:type",Object)],h.prototype,"navigateToMapRoute$",void 0),h=__decorate([n.i(o.d)(),__metadata("design:paramtypes",[i.c,p.a,s.a,l.a])],h)},function(t,e,n){"use strict";var o=n(1),a=n(83),i=n(213),r=n(151),l=n(0);n.n(l);n.d(e,"a",function(){return s});var s=function(){function t(t,e){var n=this;this.actions$=t,this.gameDataService=e,this.loadSpreadsheetData$=this.actions$.ofType(r.a.typeId).switchMap(function(t){return n.gameDataService.loadGameData(t.payload).map(function(){return t.payload})}).map(function(t){return new r.c(t)}).catch(function(t){return l.Observable.of(new r.b(t.toString()))})}return t}();__decorate([n.i(a.b)(),__metadata("design:type",Object)],s.prototype,"loadSpreadsheetData$",void 0),s=__decorate([n.i(o.d)(),__metadata("design:paramtypes",[a.c,i.a])],s)},function(t,e,n){"use strict";var o=n(1),a=n(42),i=(n.n(a),n(28)),r=n(83),l=n(53),s=n(11);n.d(e,"a",function(){return u});var u=function(){function t(t,e,n){var o=this;this.actions$=t,this.notify=e,this.gameStateService=n,this.initLoadedGame$=this.actions$.ofType(i.k.typeId).switchMap(function(t){return o.gameStateService.load()}).map(function(t){return new i.l(t)}).catch(function(t){return a.Observable.of(new i.m(t.toString()))}),this.saveGameState$=this.actions$.ofType(i.q.typeId).switchMap(function(t){return o.gameStateService.save()}).map(function(){return new i.r}).catch(function(t){return a.Observable.of(new i.s(t.toString()))}),this.saveGameSuccess$=this.actions$.ofType(i.r.typeId).do(function(){o.notify.show("Game state saved!  Nice.")}),this.clearGameState$=this.actions$.ofType(i.n.typeId).switchMap(function(t){return o.gameStateService.resetGame()}).map(function(){return new i.o}).catch(function(t){return a.Observable.of(new i.p(t.toString()))}),this.clearGameSuccess$=this.actions$.ofType(i.o.typeId).do(function(){o.notify.show("Game data deleted.  Next time you refresh you will begin a new game.")}),this.afterLoadTravelToCurrentLocation$=this.actions$.ofType(i.d.typeId,i.l.typeId).debounceTime(10).map(function(t){var e;switch(t.type){case i.d.typeId:e=t.payload;break;case i.l.typeId:e=t.payload.gameState;break;default:return}return new i.f(e.location,e.position)}),this.travel$=this.actions$.ofType(i.f.typeId).switchMap(function(t){return o.gameStateService.loadMap(t.payload.location).map(function(){return t.payload.location})}).debounceTime(500).map(function(t){return new i.i(t)}).catch(function(t){return a.Observable.of(new i.j(t.toString()))})}return t}();__decorate([n.i(r.b)(),__metadata("design:type",Object)],u.prototype,"initLoadedGame$",void 0),__decorate([n.i(r.b)(),__metadata("design:type",Object)],u.prototype,"saveGameState$",void 0),__decorate([n.i(r.b)({dispatch:!1}),__metadata("design:type",Object)],u.prototype,"saveGameSuccess$",void 0),__decorate([n.i(r.b)(),__metadata("design:type",Object)],u.prototype,"clearGameState$",void 0),__decorate([n.i(r.b)({dispatch:!1}),__metadata("design:type",Object)],u.prototype,"clearGameSuccess$",void 0),__decorate([n.i(r.b)(),__metadata("design:type",Object)],u.prototype,"afterLoadTravelToCurrentLocation$",void 0),__decorate([n.i(r.b)(),__metadata("design:type",Object)],u.prototype,"travel$",void 0),u=__decorate([n.i(o.d)(),__metadata("design:paramtypes",[r.c,s.a,l.a])],u)},function(t,e,n){"use strict";var o=n(1),a=n(42),i=(n.n(a),n(83)),r=n(152),l=n(217);n.d(e,"a",function(){return s});var s=function(){function t(t,e){var n=this;this.actions$=t,this.spritesService=e,this.loadSprites$=this.actions$.ofType(r.d.typeId).switchMap(function(t){return n.spritesService.loadSprites(t.payload).map(function(){return t.payload})}).map(function(t){return new r.b(t)}).catch(function(t){return a.Observable.of(new r.c(t.toString()))})}return t}();__decorate([n.i(i.b)(),__metadata("design:type",Object)],s.prototype,"loadSprites$",void 0),s=__decorate([n.i(o.d)(),__metadata("design:paramtypes",[i.c,l.a])],s)},function(t,e,n){"use strict";var o=n(49);n.d(e,"a",function(){return a});var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="default",e.from=null,e.to=null,e.spell=null,e.item=null,e}return __extends(e,t),e.prototype.getActionName=function(){return this.name},e.prototype.isCurrentTurn=function(){return console.warn("combat: current turn update needed"),!0},e.prototype.canTarget=function(){return!0},e.prototype.canTargetMultiple=function(){return this.canTarget()},e.prototype.canBeUsedBy=function(t){return!0},e.prototype.act=function(t){return t&&t(this,null),!0},e.prototype.select=function(){},e}(o.a)},function(t,e,n){"use strict";var o=n(44),a=n(162),i=n(163),r=n(164),l=n(165),s=n(167),u=n(168),c=n(166);n.d(e,"a",function(){return p});var p=[o.a,a.a,i.a,r.a,l.a,c.a,s.a,u.a]},function(t,e,n){"use strict";var o=n(1);n.d(e,"a",function(){return a});var a=function(){function t(){var t=this;this.supported=document.hasOwnProperty("hidden"),this._changeVisibility=function(){return t.onChange()},this.supported&&document.addEventListener("visibilityChange",this._changeVisibility)}return t.prototype.destroy=function(){this.supported&&document.removeEventListener("visibilityChange",this._changeVisibility)},t.prototype.onChange=function(){},t}();a=__decorate([n.i(o.d)(),__metadata("design:paramtypes",[])],a)},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(70)),i=n(172);n.d(e,"a",function(){return r});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._connectedBehaviors=[],e}return __extends(e,t),e.prototype.destroy=function(){o.each(this._connectedBehaviors,function(t){t.disconnectBehavior()}),this._connectedBehaviors.length=0},e.prototype.findBehavior=function(t){for(var e=this._connectedBehaviors,n=this._connectedBehaviors.length,o=0;o<n;o++){var a=e[o];if(a instanceof t)return a}return null},e.prototype.findBehaviors=function(t){for(var e=this._connectedBehaviors,n=[],o=this._connectedBehaviors.length,a=0;a<o;a++){var i=e[a];i instanceof t&&n.push(i)}return n},e.prototype.findBehaviorByName=function(t){for(var e=this._connectedBehaviors,n=this._connectedBehaviors.length,o=0;o<n;o++){var a=e[o];if(a.name===t)return a}return null},e.prototype.syncBehaviors=function(){for(var t=this._connectedBehaviors,e=this._connectedBehaviors.length,n=0;n<e;n++)t[n].syncBehavior()},e.prototype.addBehavior=function(t,e){if(!t)throw new Error(a.a.REQUIRED_ARGUMENT);if(o.where(this._connectedBehaviors,{id:t.id}).length>0)throw new Error(a.a.ALREADY_EXISTS);return t.host=this,t.connectBehavior()===!1?(delete t.host,!1):(this._connectedBehaviors.push(t),e!==!0&&this.syncBehaviors(),!0)},e.prototype.removeBehaviorByType=function(t,e){void 0===e&&(e=!1);var n=this.findBehavior(t);return!!n&&this.removeBehavior(n,e)},e.prototype.removeBehavior=function(t,e){void 0===e&&(e=!1);var n=this._connectedBehaviors.length;this._connectedBehaviors=o.filter(this._connectedBehaviors,function(e){return e.id!==t.id||(e.disconnectBehavior()===!1||(e.host=null,!1))});var a=this._connectedBehaviors.length!==n;return a&&e!==!0&&this.syncBehaviors(),a},e}(i.a)},function(t,e,n){"use strict";var o=n(172),a=n(4);n.n(a);n.d(e,"a",function(){return i});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=a.uniqueId("sc"),e}return __extends(e,t),e.prototype.connectBehavior=function(){return!0},e.prototype.disconnectBehavior=function(){return!0},e.prototype.syncBehavior=function(){return!0},e.prototype.toString=function(){var t=this.constructor,e=t?t.toString().match(/function (.+?)\(/):null;return t&&t.name?t.name:e&&e[1]?e[1]:this.name},e}(o.a)},function(t,e,n){"use strict";var o=n(79),a=n(70),i=n(233),r=n(4);n.n(r);n.d(e,"a",function(){return l});var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._source=null,e._audio=null,e._volume=.8,e}return __extends(e,t),e.supportedFormats=function(){var t=this,n=window,o=n.AudioContext||n.webkitAudioContext;if(null===e._context&&o&&(e._context=new o),null===e._types){this._types=[];var a=document.createElement("audio");if(a.canPlayType)try{a.canPlayType("audio/wav;"),r.each(this.FORMATS,function(e){var n=e[1],o=e[0];r.each(n,function(e){a.canPlayType(e)&&t._types.push({extension:o,type:e})})})}catch(t){}}return this._types.slice()},e.prototype.fetch=function(t){this.url=t||this.url;var n=e.supportedFormats(),o=this.url.lastIndexOf(".");if(o!==-1){var i=this.url.substr(o+1);n=n.sort(function(t,e){return e.extension===i?1:0})}return 0===n.length?Promise.reject(a.a.UNSUPPORTED_OPERATION):this._loadAudioElement(n)},e.prototype.play=function(t){return void 0===t&&(t=0),this._source&&this._source.start(t),this},e.prototype.pause=function(){return this._source&&this._source.stop(0),this},Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t},enumerable:!0,configurable:!0}),e.prototype._getUrlForFormat=function(t){var e=this.url.lastIndexOf("."),n=this.url;return e!==-1&&(n=n.substr(0,e)),n+"."+t.extension},e.prototype._loadAudioElement=function(t){var e=this;return new Promise(function(n,o){var a,l=t.length,s=[],u=document.createElement("audio"),c=(new i.a).start().addObject({tick:function(){return u.readyState>3?a():null}});a=function(){e.data=u,e._audio=u,c.stop(),n(e)};var p=function(t){l--,s.push(t),l<=0&&o("No valid sources at the following URLs\n"+s.join("\n   "))};return 0===l?o("no supported media types"):(u.addEventListener("canplaythrough",a),r.each(t,function(t){var n=document.createElement("source");n.addEventListener("error",function(){console.log("source failed: "+n.src),p(n.src)}),n.type=t.type.substr(0,t.type.indexOf(";")),n.src=e._getUrlForFormat(t),u.appendChild(n)}),void u.load())})},e}(o.a);l.FORMATS=[["mp3",["audio/mpeg;"]],["m4a",["audio/x-m4a;"]],["aac",["audio/mp4a;","audio/mp4;"]],["ogg",['audio/ogg; codecs="vorbis"']],["wav",['audio/wav; codecs="1"']]],l._context=null,l._types=null},function(t,e,n){"use strict";(function(t){var o=n(79);n.d(e,"a",function(){return a});var a=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.fetch=function(e){var n=this;return this.url=e||this.url,new Promise(function(e,o){var a=t.getJSON(n.url);a.done(function(t){n.data=t,e(n)}),a.fail(function(t,e,n){o(n)})})},n}(o.a)}).call(e,n(91))},function(t,e,n){"use strict";(function(t){var o=n(79);n.d(e,"a",function(){return a});var a=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.fetch=function(e){var n=this;return this.url=e||this.url,new Promise(function(e,o){var a=t.getScript(n.url);a.done(function(t){n.data=t,e(n)}),a.fail(function(t,e,n){o(n)})})},n}(o.a)}).call(e,n(91))},function(t,e,n){"use strict";var o=n(233),a=n(1);n.d(e,"a",function(){return i});var i=function(){function t(){this.time=o.a.get()}return t.prototype.setService=function(t,e){return this.mark(e),this[t]=e,e},t.prototype.mark=function(t){t&&(t.world=this,t.onAddToWorld&&t.onAddToWorld(this))},t.prototype.erase=function(t){t&&(t.onRemoveFromWorld&&t.onRemoveFromWorld(this),delete t.world)},t}();i=__decorate([n.i(a.d)()],i)},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(172));n.d(e,"a",function(){return i});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultState=null,e.states=[],e._currentState=null,e._previousState=null,e._newState=!1,e._pendingState=null,e._asyncProcessing=0,e._asyncCurrentCallback=null,e}return __extends(e,t),e.prototype.update=function(t){this._newState=!1,null===this._currentState&&this.setCurrentState(this.defaultState),null!==this._currentState&&this._currentState.update(this),this._newState===!1&&null!==this._currentState&&(this._previousState=this._currentState)},e.prototype.addState=function(t){this.states.push(t)},e.prototype.addStates=function(t){this.states=o.unique(this.states.concat(t))},e.prototype.getCurrentState=function(){return this._currentState},e.prototype.getCurrentName=function(){return null!==this._currentState?this._currentState.name:null},e.prototype.setCurrentState=function(t){var e=this,n="string"==typeof t?this.getState(t):t;return n?(null!==this._pendingState&&this._pendingState.name!==n.name?(console.log("Overwriting pending state ("+this._pendingState.name+") with ("+n.name+")"),this._pendingState=n):this._pendingState||(this._pendingState=n,o.defer(function(){n=e._pendingState,e._pendingState=null,e._setCurrentState(n)||console.error("Failed to set state: "+n.name)})),!0):(console.error("STATE NOT FOUND: "+t),!1)},e.prototype._setCurrentState=function(t){if(!t)return!1;var n=this._currentState;return this._currentState&&t.name===this._currentState.name?(console.warn(this._currentState.name+": Attempting to set current state to already active state"),!0):(this._newState=!0,this._previousState=this._currentState,this._currentState=t,e.DEBUG_STATES&&console.log("STATE: "+(n?n.name:"NULL")+" -> "+this._currentState.name),n&&(this.trigger(e.Events.EXIT,n,t),n.exit(this)),t.enter(this),this.trigger(e.Events.ENTER,t,n),!0)},e.prototype.getPreviousState=function(){return this._previousState},e.prototype.getState=function(t){return o.find(this.states,function(e){return e.name===t})},e.prototype.notify=function(t,e,n){var o=this;if(this._asyncProcessing>0)throw new Error("TODO: StateMachine cannot handle multiple async UI waits");this._asyncCurrentCallback=function(){o._asyncProcessing--,o._asyncProcessing<=0&&(n&&n(),o._asyncProcessing=0)},this._asyncProcessing=0,this.trigger(t,e),0===this._asyncProcessing&&n&&n()},e.prototype.notifyWait=function(){if(!this._asyncCurrentCallback)throw new Error("No valid async callback set!  Perhaps you called this outside of a notify event handler?");return this._asyncProcessing++,this._asyncCurrentCallback},e}(a.a);i.DEBUG_STATES=!0,i.Events={ENTER:"enter",EXIT:"exit"}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.transitions=[]}return t.prototype.enter=function(t){},t.prototype.exit=function(t){},t.prototype.update=function(t){for(var e=this.transitions.length,n=0;n<e;n++){var o=this.transitions[n];if(o.evaluate(t)&&t.setCurrentState(o.targetState))return}},t}();(function(){function t(){}return t.prototype.evaluate=function(t){return!0},t})()},function(t,e,n){"use strict";var o=n(13),a=n(81),i=n(174),r=n(123),l=n(111);n.d(e,"a",function(){return s});var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._elapsed=0,e.path=[],e.tickRateMS=250,e.velocity=new o.a(0,0),e.workPoint=new o.a(0,0),e.currentMove=null,e}return __extends(e,t),e.prototype.connectBehavior=function(){return this.host.point=new o.a(this.host.point).round(),this.targetPoint=new o.a(this.host.point),this.host.renderPoint=this.targetPoint.clone(),t.prototype.connectBehavior.call(this)},e.prototype.syncBehavior=function(){return this.collider=this.host.findBehavior(l.a),t.prototype.syncBehavior.call(this)},e.prototype.beginMove=function(t){},e.prototype.completeMove=function(t){},e.prototype.collideMove=function(t,e,n){return void 0===n&&(n=[]),!!this.collider&&this.collider.collide(t,e,r.a,n)},e.prototype.updateVelocity=function(){if(this.host.scene&&this.host.scene.world&&this.host.scene.world.input){var t=this.host.scene.world.input;this.velocity.x=0,t.keyDown(i.a.LEFT)&&(this.velocity.x-=1),t.keyDown(i.a.RIGHT)&&(this.velocity.x+=1),this.velocity.y=0,t.keyDown(i.a.UP)&&(this.velocity.y-=1),t.keyDown(i.a.DOWN)&&(this.velocity.y+=1)}},e.prototype.interpolateTick=function(t){var e=this._elapsed/this.tickRateMS;this.host.renderPoint.x=this.host.point.x,this.host.renderPoint.y=this.host.point.y,this.velocity.isZero()||(o.a.interpolate(this.host.renderPoint,this.host.point,this.targetPoint,e),this.host.renderPoint.x=parseFloat(this.host.renderPoint.x.toFixed(2)),this.host.renderPoint.y=parseFloat(this.host.renderPoint.y.toFixed(2)))},e.prototype.tick=function(t){if(this._elapsed+=t,!(this._elapsed<this.tickRateMS)){this._elapsed=this._elapsed%this.tickRateMS,this.targetPoint.equal(this.host.point)||this.collideMove(this.targetPoint.x,this.targetPoint.y)||(this.workPoint.set(this.host.point),this.host.point.x=this.targetPoint.x,this.host.point.y=this.targetPoint.y,this.completeMove(this.currentMove)),this.updateVelocity(),this.targetPoint.set(this.host.point);var e=this.velocity.isZero();if(!e||0!==this.path.length){if(e){var n=this.path.shift();this.velocity.set(n.x-this.host.point.x,n.y-this.host.point.y)}else this.path.length=0;if(this.targetPoint.add(this.velocity),0===this.velocity.y||this.collideMove(this.host.point.x,this.targetPoint.y)){if(0===this.velocity.x||this.collideMove(this.targetPoint.x,this.host.point.y))return this.targetPoint.set(this.host.point),void(this.path.length=0);this.targetPoint.y=this.host.point.y}else this.targetPoint.x=this.host.point.x;this.currentMove={from:new o.a(this.host.point),to:new o.a(this.targetPoint)},this.beginMove(this.currentMove)}}},e}(a.a)},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(49)),i=n(15);n.d(e,"a",function(){return l});var r={url:null,volume:1,loop:!1},l=function(t){function e(e){void 0===e&&(e=r);var n=t.call(this)||this;return"undefined"!=typeof e&&o.extend(n,r,e),n}return __extends(e,t),e.prototype.disconnectBehavior=function(){return this.audio&&this.audio.data&&(this.audio.data.pause(),this.audio.data.currentTime=0),t.prototype.disconnectBehavior.call(this)},e.prototype.connectBehavior=function(){var e=this;if(!t.prototype.connectBehavior.call(this)||!this.url)return!1;if(this.audio&&this.audio.data)return this.audio.data.currentTime=0,this.audio.data.volume=this.volume,!0;var n=i.a.get();return!(!n||!n.loader)&&(n.loader.load(this.url).then(function(t){var n=t[0];e.audio=n,e.audio.data&&(e.audio.data.currentTime=0,e.audio.data.volume=e.volume,e.audio.data.loop=e.loop,e.audio.data.play(),e.audio.data.addEventListener("timeupdate",function(){e.audio.data.currentTime>=e.audio.data.duration&&(e.loop?e.trigger("audio:loop",e):(e.audio.data.pause(),e.trigger("audio:done",e)))}))}),!0)},e}(a.a)},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(123)),i=n(48),r=n(519),l=n(13);n.d(e,"a",function(){return s});var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animations=[],e.cameraComponent=null,e.scene=null,e._canvas=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},set:function(t){if(this._canvas=t,!t)return void(this.context=this.canvas=null);if(this.context=t.getContext("2d"),!this.context)throw new Error("SceneView: could not retrieve 2d Canvas context");var n=this.context;n.webkitImageSmoothingEnabled=!1,n.mozImageSmoothingEnabled=!1,this.camera=new i.a(0,0,9,9),this.cameraScale=1,this.unitSize=e.UNIT},enumerable:!0,configurable:!0}),e.prototype.renderToCanvas=function(t,e,n){var o=document.createElement("canvas");o.width=t,o.height=e;var a=o.getContext("2d");return a.webkitImageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=!1,n(a),o},e.prototype.renderFrame=function(t){var e=this;o.each(this._connectedBehaviors,function(n){n instanceof r.a&&n.renderFrame(e,t)})},e.prototype.renderPost=function(){},e.prototype.setRenderState=function(){this.context&&(this.context.save(),this.context.scale(this.cameraScale,this.cameraScale))},e.prototype.restoreRenderState=function(){return!!this.context&&(this.context.restore(),!0)},e.prototype.render=function(){this._render(0)},e.prototype._render=function(t){var e=this;this.processCamera(),this.setRenderState(),o.each(this._connectedBehaviors,function(n){n instanceof r.a&&n.beforeFrame(e,t)}),this.renderFrame(t),this.renderAnimations(),this.renderPost(),o.each(this._connectedBehaviors,function(n){n instanceof r.a&&n.afterFrame(e,t)}),this.restoreRenderState()},e.prototype.processCamera=function(){this.cameraComponent&&this.cameraComponent.process(this)},e.prototype.clearRect=function(){var t,e=0,n=0;return this.camera&&(t=this.worldToScreen(this.camera.point),e=t.x,n=t.y),this.context.clearRect(e,n,this.context.canvas.width,this.context.canvas.height)},e.prototype.worldToScreen=function(t,e){if(void 0===e&&(e=1),t instanceof i.a){var n=new i.a(t);return n.point.multiply(this.unitSize*e),n.extent.multiply(this.unitSize*e),n}return t instanceof l.a?new l.a(t).multiply(this.unitSize*e):t*(this.unitSize*e)},e.prototype.screenToWorld=function(t,e){if(void 0===e&&(e=1),t instanceof i.a){var n=new i.a(t);return n.point.multiply(1/(this.unitSize*e)),n.extent.multiply(1/(this.unitSize*e)),n}return t instanceof l.a?new l.a(t).multiply(1/(this.unitSize*e)):t*(1/(this.unitSize*e))},e.prototype.fastWorldToScreenPoint=function(t,e,n){return void 0===n&&(n=1),e.set(t),e.multiply(this.unitSize*n),e},e.prototype.fastWorldToScreenRect=function(t,e,n){return void 0===n&&(n=1),e.set(t),e.point.multiply(this.unitSize*n),e.extent.multiply(this.unitSize*n),e},e.prototype.fastWorldToScreenNumber=function(t,e){return void 0===e&&(e=1),t*(this.unitSize*e)},e.prototype.fastScreenToWorldPoint=function(t,e,n){return void 0===n&&(n=1),e.set(t),e.multiply(1/(this.unitSize*n)),e},e.prototype.fastScreenToWorldRect=function(t,e,n){return void 0===n&&(n=1),e.set(t),e.point.multiply(1/(this.unitSize*n)),e.extent.multiply(1/(this.unitSize*n)),e},e.prototype.fastScreenToWorldNumber=function(t,e){return void 0===e&&(e=1),t*(1/(this.unitSize*e))},e.prototype.renderAnimations=function(){for(var t=this.animations.length,e=0;e<t;e++){var n=this.animations[e];n.done=n.fn(n.frame),this.scene.time>=n.time&&(n.frame+=1,n.time=this.scene.time+n.rate)}return this.animations=o.filter(this.animations,function(t){return t.done!==!0})},e}(a.a);s.UNIT=16},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(124)),i=n(81);n.d(e,"a",function(){return r});var r=function(t){function e(e){void 0===e&&(e={lengthMS:500,spriteName:null});var n=t.call(this)||this;return n._elapsed=0,n._renderFrame=3,n.lengthMS=500,"undefined"!=typeof e&&o.extend(n,e),n}return __extends(e,t),e.prototype.connectBehavior=function(){return this._renderFrame=0,this._elapsed=0,t.prototype.connectBehavior.call(this)},e.prototype.syncBehavior=function(){if(!t.prototype.syncBehavior.call(this))return!1;var e=this.host.findBehaviors(a.a);return this.spriteComponent=o.where(e,{name:this.spriteName})[0],!!this.spriteComponent},e.prototype.tick=function(e){this._elapsed+=e,this._elapsed>=this.lengthMS&&(this.trigger("animation:done",this),this._elapsed=this._elapsed%this.lengthMS),t.prototype.tick.call(this,e)},e.prototype.interpolateTick=function(e){if(this.spriteComponent&&this.spriteComponent.meta){var n=this._elapsed/this.lengthMS;this.spriteComponent.frame=n*this.spriteComponent.meta.frames|0}t.prototype.interpolateTick.call(this,e)},e}(i.a)},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(237)),i=n(82),r=n(13),l=n(674);n.n(l);n.d(e,"a",function(){return s});var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._graph=null,e}return __extends(e,t),e.prototype.connectBehavior=function(){return t.prototype.connectBehavior.call(this)&&!!this.tileMap},e.prototype.syncBehavior=function(){return this.tileMap.off(i.a.Events.LOADED,this._updateGraph,this),this.tileMap.on(i.a.Events.LOADED,this._updateGraph,this),t.prototype.syncBehavior.call(this)},e.prototype.disconnectBehavior=function(){return this.tileMap.off(i.a.Events.LOADED,this._updateGraph,this),this._graph=null,t.prototype.disconnectBehavior.call(this)},e.prototype._updateGraph=function(){var t=this.buildWeightedGraph();this._graph=new l.Graph(t)},e.prototype.buildWeightedGraph=function(){return[[]]},e.prototype.calculatePath=function(t,e){if(this._graph||this._updateGraph(),!this._graph||!this._graph.grid)throw new Error("Invalid AStar graph");if(this._graph.init(),t.x>=this._graph.grid.length||t.x<0)return[];if(t.y>=this._graph.grid[t.x].length)return[];if(e.x>=this._graph.grid.length||e.x<0)return[];if(e.y>=this._graph.grid[e.x].length)return[];var n=this._graph.grid[t.x][t.y],a=this._graph.grid[e.x][e.y],i=l.astar.search(this._graph,n,a);return o.map(i,function(t){return new r.a(t.x,t.y)})},e}(a.a)},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(517)),i=n(48);n.d(e,"a",function(){return r});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buffer=null,e.bufferMapName=null,e.bufferComplete=!1,e._clipRect=new i.a,e._renderRect=new i.a,e}return __extends(e,t),e.prototype.render=function(t,e){var n,a,i,r=this,l=8,s=l*e.unitSize;if(t.isLoaded()){if(t.dirtyLayers&&(t.dirtyLayers=!1,this.buffer=null,this.bufferComplete=!1),!this.bufferComplete||null===this.buffer||null===this.bufferMapName||this.bufferMapName!==t.map.url){var u=s/e.unitSize,c=Math.ceil(t.bounds.extent.x/l);for(i=Math.ceil(t.bounds.extent.y/l),this.buffer=new Array(c),a=0;a<c;a++)this.buffer[a]=new Array(i);this.bufferComplete=!0;var p=t.getLayers();for(a=0;a<c;a++){var d=function(){var i=a*u,l=i+u,c=n*u,d=c+u;h.buffer[a][n]=e.renderToCanvas(s,s,function(n){for(var a=function(a){for(var l=function(l){o.each(p,function(o){if(o.visible){var s=t.getTileGid(o.name,a,l),u=t.getTileMeta(s);if(u){var p=u.image.data;if(!p||!p.complete)return void(r.bufferComplete=!1);var d=u.x,h=u.y,f=u.width,m=u.height,_=(a-i)*e.unitSize,g=(l-c)*e.unitSize,y=e.unitSize,v=e.unitSize;n.drawImage(p,d,h,f,m,_,g,y,v)}}})},s=c;s<d;s++)l(s)},s=i;s<l;s++)a(s)})},h=this;for(n=0;n<i;n++)d()}this.bufferMapName=t.map.url}var f=e.fastWorldToScreenNumber(l);e.fastWorldToScreenRect(e.getCameraClip(),this._clipRect);var m=this.buffer.length;for(i=this.buffer[0].length,a=0;a<m;a++)for(n=0;n<i;n++)this._renderRect.set(a*l-.5,n*l-.5,l,l),e.fastWorldToScreenRect(this._renderRect,this._renderRect),this._renderRect.intersect(this._clipRect)&&e.context.drawImage(this.buffer[a][n],0,0,s,s,this._renderRect.point.x,this._renderRect.point.y,f,f)}},e}(a.a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var o=n(1),a=n(504),i=n(8),r=n(78),l=n(24),s=n(143),u=n(96),c=n(144),p=n(285),d=n(201),h=n(280),f=n(97),m=n(146),_=n(158),g=n(227),y=n(122),v=n(321),b=n(320),x=n(243),w=n(239),k=n(105),M=n(11),S=n(27),C=n(53),O=n(298),P=n(25),I=n(296),E=n(217),T=n(299),A=n(213),R=n(297),F=n(21),$=n(206),L=n(241),D=n(319),B=n(109),j=n(77),z=n(20),N=n(202),G=n(228),U=n(47),H=n(15),X=n(221),W=n(26),V=n(302),Y=n(220),K=n(477),q=n(466),Q=n(500),Z=n(479),J=n(441),tt=n(240),et=n(160),nt=n(39),ot=n(171),at=n(161),it=n(215),rt=n(244),lt=n(245),st=n(16),ut=n(278),ct=n(142);n.d(e,"a",function(){return dt});var pt=function(t){function e(e){return t.call(this,e,[K.a,q.a,Q.a,Z.a,J.a],[J.a])||this}return __extends(e,t),Object.defineProperty(e.prototype,"_LOCALE_ID_82",{get:function(){return null==this.__LOCALE_ID_82&&(this.__LOCALE_ID_82=o.Y(this.parent.get(o.E,null))),this.__LOCALE_ID_82},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_NgLocalization_83",{get:function(){return null==this.__NgLocalization_83&&(this.__NgLocalization_83=new i.d(this._LOCALE_ID_82)),this.__NgLocalization_83},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_APP_ID_84",{get:function(){return null==this.__APP_ID_84&&(this.__APP_ID_84=o.Z()),this.__APP_ID_84},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_IterableDiffers_85",{get:function(){return null==this.__IterableDiffers_85&&(this.__IterableDiffers_85=o._0()),this.__IterableDiffers_85},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_KeyValueDiffers_86",{get:function(){return null==this.__KeyValueDiffers_86&&(this.__KeyValueDiffers_86=o._1()),this.__KeyValueDiffers_86},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_DomSanitizer_87",{get:function(){return null==this.__DomSanitizer_87&&(this.__DomSanitizer_87=new l.c(this.parent.get(l.d))),this.__DomSanitizer_87},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_Sanitizer_88",{get:function(){return null==this.__Sanitizer_88&&(this.__Sanitizer_88=this._DomSanitizer_87),this.__Sanitizer_88},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_HAMMER_GESTURE_CONFIG_89",{get:function(){return null==this.__HAMMER_GESTURE_CONFIG_89&&(this.__HAMMER_GESTURE_CONFIG_89=new l.e),this.__HAMMER_GESTURE_CONFIG_89},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_EVENT_MANAGER_PLUGINS_90",{get:function(){return null==this.__EVENT_MANAGER_PLUGINS_90&&(this.__EVENT_MANAGER_PLUGINS_90=[new l.f(this.parent.get(l.d)),new l.g(this.parent.get(l.d)),new l.h(this.parent.get(l.d),this._HAMMER_GESTURE_CONFIG_89)]),this.__EVENT_MANAGER_PLUGINS_90},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_EventManager_91",{get:function(){return null==this.__EventManager_91&&(this.__EventManager_91=new l.i(this._EVENT_MANAGER_PLUGINS_90,this.parent.get(o.i))),this.__EventManager_91},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_DomSharedStylesHost_92",{get:function(){return null==this.__DomSharedStylesHost_92&&(this.__DomSharedStylesHost_92=new l.j(this.parent.get(l.d))),this.__DomSharedStylesHost_92},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_DomRendererFactory2_93",{get:function(){return null==this.__DomRendererFactory2_93&&(this.__DomRendererFactory2_93=new l.k(this._EventManager_91,this._DomSharedStylesHost_92)),this.__DomRendererFactory2_93},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_AnimationDriver_94",{get:function(){return null==this.__AnimationDriver_94&&(this.__AnimationDriver_94=p.a()),this.__AnimationDriver_94},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_AnimationStyleNormalizer_95",{
get:function(){return null==this.__AnimationStyleNormalizer_95&&(this.__AnimationStyleNormalizer_95=p.b()),this.__AnimationStyleNormalizer_95},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_AnimationEngine_96",{get:function(){return null==this.__AnimationEngine_96&&(this.__AnimationEngine_96=new p.c(this._AnimationDriver_94,this._AnimationStyleNormalizer_95)),this.__AnimationEngine_96},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_RendererFactory2_97",{get:function(){return null==this.__RendererFactory2_97&&(this.__RendererFactory2_97=p.d(this._DomRendererFactory2_93,this._AnimationEngine_96,this.parent.get(o.i))),this.__RendererFactory2_97},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_SharedStylesHost_98",{get:function(){return null==this.__SharedStylesHost_98&&(this.__SharedStylesHost_98=this._DomSharedStylesHost_92),this.__SharedStylesHost_98},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_Testability_99",{get:function(){return null==this.__Testability_99&&(this.__Testability_99=new o.z(this.parent.get(o.i))),this.__Testability_99},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_Meta_100",{get:function(){return null==this.__Meta_100&&(this.__Meta_100=new l.l(this.parent.get(l.d))),this.__Meta_100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_Title_101",{get:function(){return null==this.__Title_101&&(this.__Title_101=new l.m(this.parent.get(l.d))),this.__Title_101},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_i_102",{get:function(){return null==this.__i_102&&(this.__i_102=new s.a),this.__i_102},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_MatchMedia_103",{get:function(){return null==this.__MatchMedia_103&&(this.__MatchMedia_103=new B.a(this.parent.get(o.i))),this.__MatchMedia_103},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_BreakPointRegistry_105",{get:function(){return null==this.__BreakPointRegistry_105&&(this.__BreakPointRegistry_105=new j.a(this._BREAKPOINTS_104)),this.__BreakPointRegistry_105},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_MediaMonitor_106",{get:function(){return null==this.__MediaMonitor_106&&(this.__MediaMonitor_106=new z.a(this._BreakPointRegistry_105,this._MatchMedia_103)),this.__MediaMonitor_106},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_ObservableMedia_107",{get:function(){return null==this.__ObservableMedia_107&&(this.__ObservableMedia_107=new N.a(this._MatchMedia_103,this._BreakPointRegistry_105)),this.__ObservableMedia_107},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_Platform_108",{get:function(){return null==this.__Platform_108&&(this.__Platform_108=new f.a),this.__Platform_108},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_InteractivityChecker_109",{get:function(){return null==this.__InteractivityChecker_109&&(this.__InteractivityChecker_109=new f.b(this._Platform_108)),this.__InteractivityChecker_109},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_FocusTrapFactory_110",{get:function(){return null==this.__FocusTrapFactory_110&&(this.__FocusTrapFactory_110=new f.c(this._InteractivityChecker_109,this.parent.get(o.i))),this.__FocusTrapFactory_110},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_LiveAnnouncer_111",{get:function(){return null==this.__LiveAnnouncer_111&&(this.__LiveAnnouncer_111=f.d(this.parent.get(f.e,null),this.parent.get(f.f,null))),this.__LiveAnnouncer_111},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_OverlayContainer_112",{get:function(){return null==this.__OverlayContainer_112&&(this.__OverlayContainer_112=f.g(this.parent.get(f.h,null))),this.__OverlayContainer_112},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_ScrollDispatcher_113",{get:function(){return null==this.__ScrollDispatcher_113&&(this.__ScrollDispatcher_113=f.i(this.parent.get(f.j,null),this.parent.get(o.i))),this.__ScrollDispatcher_113},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_h_114",{get:function(){return null==this.__h_114&&(this.__h_114=f.k(this.parent.get(f.l,null),this._ScrollDispatcher_113)),this.__h_114},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_k_115",{get:function(){return null==this.__k_115&&(this.__k_115=new f.m(this._h_114)),this.__k_115},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_Overlay_116",{get:function(){return null==this.__Overlay_116&&(this.__Overlay_116=new f.n(this._OverlayContainer_112,this.componentFactoryResolver,this._k_115,this._ApplicationRef_7,this,this.parent.get(o.i))),this.__Overlay_116},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_MdIconRegistry_117",{get:function(){return null==this.__MdIconRegistry_117&&(this.__MdIconRegistry_117=f.o(this.parent.get(f.p,null),this._Http_66,this._DomSanitizer_87)),this.__MdIconRegistry_117},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_FocusOriginMonitor_118",{get:function(){return null==this.__FocusOriginMonitor_118&&(this.__FocusOriginMonitor_118=f.q(this.parent.get(f.r,null),this.parent.get(o.i))),this.__FocusOriginMonitor_118},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_FormBuilder_119",{get:function(){return null==this.__FormBuilder_119&&(this.__FormBuilder_119=new s.b),this.__FormBuilder_119},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_ROUTER_INITIALIZER_120",{get:function(){return null==this.__ROUTER_INITIALIZER_120&&(this.__ROUTER_INITIALIZER_120=r.a(this._g_3)),this.__ROUTER_INITIALIZER_120},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_APP_BOOTSTRAP_LISTENER_121",{get:function(){return null==this.__APP_BOOTSTRAP_LISTENER_121&&(this.__APP_BOOTSTRAP_LISTENER_121=[tt.a(this,this._EffectsSubscription_79),this._ROUTER_INITIALIZER_120,b.a(this._Router_46,this._Location_42,this._Dispatcher_50,this._Store_57)]),this.__APP_BOOTSTRAP_LISTENER_121},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_CanActivateWorld_122",{get:function(){return null==this.__CanActivateWorld_122&&(this.__CanActivateWorld_122=new G.a(this._Store_57,this._Router_46)),this.__CanActivateWorld_122},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_ActivatedRoute_123",{get:function(){return null==this.__ActivatedRoute_123&&(this.__ActivatedRoute_123=r.b(this._Router_46)),this.__ActivatedRoute_123},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_NoPreloading_124",{get:function(){return null==this.__NoPreloading_124&&(this.__NoPreloading_124=new r.c),this.__NoPreloading_124},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_PreloadingStrategy_125",{get:function(){return null==this.__PreloadingStrategy_125&&(this.__PreloadingStrategy_125=this._NoPreloading_124),this.__PreloadingStrategy_125},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_RouterPreloader_126",{get:function(){return null==this.__RouterPreloader_126&&(this.__RouterPreloader_126=new r.d(this._Router_46,this._NgModuleFactoryLoader_44,this._Compiler_43,this,this._PreloadingStrategy_125)),this.__RouterPreloader_126},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_PreloadAllModules_127",{get:function(){return null==this.__PreloadAllModules_127&&(this.__PreloadAllModules_127=new r.e),this.__PreloadAllModules_127},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_SpriteRender_128",{get:function(){return null==this.__SpriteRender_128&&(this.__SpriteRender_128=new U.a(this._ResourceManager_67)),this.__SpriteRender_128},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_GameWorld_129",{get:function(){return null==this.__GameWorld_129&&(this.__GameWorld_129=new H.a(this._ResourceManager_67,this._Store_57,this._SpriteRender_128,this._GameStateService_68)),this.__GameWorld_129},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_GameResolver_130",{get:function(){return null==this.__GameResolver_130&&(this.__GameResolver_130=new X.a(this._GameWorld_129,this._LoadingService_76)),this.__GameResolver_130},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_RPGGame_131",{get:function(){return null==this.__RPGGame_131&&(this.__RPGGame_131=new W.a(this._ResourceManager_67,this._Store_57)),this.__RPGGame_131},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_Visibility_132",{get:function(){return null==this.__Visibility_132&&(this.__Visibility_132=new V.a),this.__Visibility_132},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_CanActivateCombat_133",{get:function(){return null==this.__CanActivateCombat_133&&(this.__CanActivateCombat_133=new Y.a(this._Store_57,this._Router_46)),this.__CanActivateCombat_133},enumerable:!0,configurable:!0}),e.prototype.createInternal=function(){return this._CommonModule_0=new i.c,this._ErrorHandler_1=l.n(),this._NgProbeToken_2=[r.f()],this._g_3=new r.g(this),this._APP_INITIALIZER_4=[o._2,l.o(this.parent.get(l.p,null),this._NgProbeToken_2),r.h(this._g_3)],this._ApplicationInitStatus_5=new o._3(this._APP_INITIALIZER_4),this._f_6=new o._4(this.parent.get(o.i),this.parent.get(o._5),this,this._ErrorHandler_1,this.componentFactoryResolver,this._ApplicationInitStatus_5),this._ApplicationRef_7=this._f_6,this._ApplicationModule_8=new o.A(this._ApplicationRef_7),this._BrowserModule_9=new l.q(this.parent.get(l.q,null)),this._ba_10=new s.c,this._FormsModule_11=new s.d,this._HttpModule_12=new u.a,this._BehaviorsModule_13=new c.a,this._BrowserAnimationsModule_14=new p.e,this._MediaQueriesModule_15=new d.a,this._FlexLayoutModule_16=new h.a,this._CompatibilityModule_17=new f.s(this.parent.get(l.d,null)),this._PlatformModule_18=new f.t,this._A11yModule_19=new f.u,this._PortalModule_20=new f.v,this._OverlayModule_21=new f.w,this._MdSidenavModule_22=new f.x,this._MdIconModule_23=new f.y,this._MdLineModule_24=new f.z,this._MdRippleModule_25=new f.A,this._MdListModule_26=new f.B,this._MdCardModule_27=new f.C,this._MdProgressBarModule_28=new f.D,this._MdToolbarModule_29=new f.E,this._StyleModule_30=new f.F,this._MdButtonModule_31=new f.G,this._AppComponentsModule_32=new m.a,this._CombatModule_33=new _.a,this._WorldModule_34=new g.a,this._PowCoreModule_35=new y.a,this._ReactiveFormsModule_36=new s.e,this._a_37=r.i(this.parent.get(r.j,null)),this._UrlSerializer_38=new r.k,this._RouterOutletMap_39=new r.l,this._ROUTER_CONFIGURATION_40={useHash:!0},this._LocationStrategy_41=r.m(this.parent.get(i.a),this.parent.get(i.e,null),this._ROUTER_CONFIGURATION_40),this._Location_42=new i.f(this._LocationStrategy_41),this._Compiler_43=new o._6,this._NgModuleFactoryLoader_44=new o._7(this._Compiler_43,this.parent.get(o._8,null)),this._ROUTES_45=[[{path:"",component:et.a,resolve:{gameState:X.a}},{path:"combat/:id",component:nt.a,canActivate:[Y.a]},{path:"world/:id",component:ot.a,canActivate:[G.a]},{path:"**",component:at.a}]],this._Router_46=r.n(this._ApplicationRef_7,this._UrlSerializer_38,this._RouterOutletMap_39,this._Location_42,this,this._NgModuleFactoryLoader_44,this._Compiler_43,this._ROUTES_45,this._ROUTER_CONFIGURATION_40,this.parent.get(r.o,null),this.parent.get(r.p,null)),this._RouterModule_47=new r.q(this._a_37,this._Router_46),this._StoreModule_48=new v.a,this._RouterStoreModule_49=new b.b,this._Dispatcher_50=new x.a,this.__INITIAL_REDUCER_51=it.a,this._INITIAL_REDUCER_52=v.b(this.__INITIAL_REDUCER_51),this._Reducer_53=v.c(this._Dispatcher_50,this._INITIAL_REDUCER_52),this.__INITIAL_STATE_54=void 0,this._INITIAL_STATE_55=v.d(this.__INITIAL_STATE_54,this._INITIAL_REDUCER_52),this._State_56=v.e(this._INITIAL_STATE_55,this._Dispatcher_50,this._Reducer_53),this._Store_57=v.f(this._Dispatcher_50,this._Reducer_53,this._State_56),this._Actions_58=new w.a(this._Dispatcher_50),this._Animate_59=new k.a,this._NotificationService_60=new M.a(this._Animate_59),this._BrowserXhr_61=new u.b,this._ResponseOptions_62=new u.c,this._XSRFStrategy_63=u.d(),this._XHRBackend_64=new u.e(this._BrowserXhr_61,this._ResponseOptions_62,this._XSRFStrategy_63),this._RequestOptions_65=new u.f,this._Http_66=u.g(this._XHRBackend_64,this._RequestOptions_65),this._ResourceManager_67=new S.a(this._Http_66),this._GameStateService_68=new C.a(this._ResourceManager_67,this._Store_57),this._GameStateEffects_69=new O.a(this._Actions_58,this._NotificationService_60,this._GameStateService_68),this._CombatService_70=new P.a(this._ResourceManager_67),this._CombatEffects_71=new I.a(this._Actions_58,this._Store_57,this._NotificationService_60,this._CombatService_70),this._SpritesService_72=new E.a(this._ResourceManager_67,this._Store_57),this._SpritesEffects_73=new T.a(this._Actions_58,this._SpritesService_72),this._GameDataService_74=new A.a(this._ResourceManager_67,this._Store_57),this._GameDataEffects_75=new R.a(this._Actions_58,this._GameDataService_74),this._LoadingService_76=new F.a,this._AppEffects_77=new $.a(this._Actions_58,this._LoadingService_76),this._effects_78=[this._GameStateEffects_69,this._CombatEffects_71,this._SpritesEffects_73,this._GameDataEffects_75,this._AppEffects_77],this._EffectsSubscription_79=new L.a(this._Store_57,this.parent.get(L.a,null),this._effects_78),this._EffectsModule_80=new D.a(this._EffectsSubscription_79),this._AppModule_81=new a.a(this._ApplicationRef_7,this._Store_57),this._BREAKPOINTS_104=[{alias:"xs",suffix:"Xs",overlapping:!1,mediaQuery:"screen and (max-width: 599px)"},{alias:"gt-xs",suffix:"GtXs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)"},{alias:"sm",suffix:"Sm",overlapping:!1,mediaQuery:"screen and (min-width: 600px) and (max-width: 959px)"},{alias:"gt-sm",suffix:"GtSm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)"},{alias:"md",suffix:"Md",overlapping:!1,mediaQuery:"screen and (min-width: 960px) and (max-width: 1279px)"},{alias:"gt-md",suffix:"GtMd",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)"},{alias:"lg",suffix:"Lg",overlapping:!1,mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919px)"},{alias:"gt-lg",suffix:"GtLg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)"},{alias:"xl",suffix:"Xl",overlapping:!1,mediaQuery:"screen and (min-width: 1920px) and (max-width: 5000px)"}],this._AppModule_81},e.prototype.getInternal=function(t,e){return t===i.c?this._CommonModule_0:t===o.v?this._ErrorHandler_1:t===o.l?this._NgProbeToken_2:t===r.g?this._g_3:t===o.f?this._APP_INITIALIZER_4:t===o._3?this._ApplicationInitStatus_5:t===o._4?this._f_6:t===o.h?this._ApplicationRef_7:t===o.A?this._ApplicationModule_8:t===l.q?this._BrowserModule_9:t===s.c?this._ba_10:t===s.d?this._FormsModule_11:t===u.a?this._HttpModule_12:t===c.a?this._BehaviorsModule_13:t===p.e?this._BrowserAnimationsModule_14:t===d.a?this._MediaQueriesModule_15:t===h.a?this._FlexLayoutModule_16:t===f.s?this._CompatibilityModule_17:t===f.t?this._PlatformModule_18:t===f.u?this._A11yModule_19:t===f.v?this._PortalModule_20:t===f.w?this._OverlayModule_21:t===f.x?this._MdSidenavModule_22:t===f.y?this._MdIconModule_23:t===f.z?this._MdLineModule_24:t===f.A?this._MdRippleModule_25:t===f.B?this._MdListModule_26:t===f.C?this._MdCardModule_27:t===f.D?this._MdProgressBarModule_28:t===f.E?this._MdToolbarModule_29:t===f.F?this._StyleModule_30:t===f.G?this._MdButtonModule_31:t===m.a?this._AppComponentsModule_32:t===_.a?this._CombatModule_33:t===g.a?this._WorldModule_34:t===y.a?this._PowCoreModule_35:t===s.e?this._ReactiveFormsModule_36:t===r.r?this._a_37:t===r.s?this._UrlSerializer_38:t===r.l?this._RouterOutletMap_39:t===r.t?this._ROUTER_CONFIGURATION_40:t===i.g?this._LocationStrategy_41:t===i.f?this._Location_42:t===o._6?this._Compiler_43:t===o._9?this._NgModuleFactoryLoader_44:t===r.u?this._ROUTES_45:t===r.j?this._Router_46:t===r.q?this._RouterModule_47:t===v.a?this._StoreModule_48:t===b.b?this._RouterStoreModule_49:t===x.a?this._Dispatcher_50:t===v.g?this.__INITIAL_REDUCER_51:t===v.h?this._INITIAL_REDUCER_52:t===rt.a?this._Reducer_53:t===v.i?this.__INITIAL_STATE_54:t===v.j?this._INITIAL_STATE_55:t===lt.a?this._State_56:t===st.a?this._Store_57:t===w.a?this._Actions_58:t===k.a?this._Animate_59:t===M.a?this._NotificationService_60:t===u.b?this._BrowserXhr_61:t===u.h?this._ResponseOptions_62:t===u.i?this._XSRFStrategy_63:t===u.e?this._XHRBackend_64:t===u.j?this._RequestOptions_65:t===u.k?this._Http_66:t===S.a?this._ResourceManager_67:t===C.a?this._GameStateService_68:t===O.a?this._GameStateEffects_69:t===P.a?this._CombatService_70:t===I.a?this._CombatEffects_71:t===E.a?this._SpritesService_72:t===T.a?this._SpritesEffects_73:t===A.a?this._GameDataService_74:t===R.a?this._GameDataEffects_75:t===F.a?this._LoadingService_76:t===$.a?this._AppEffects_77:t===L.b?this._effects_78:t===L.a?this._EffectsSubscription_79:t===D.a?this._EffectsModule_80:t===a.a?this._AppModule_81:t===o.E?this._LOCALE_ID_82:t===i.h?this._NgLocalization_83:t===o.w?this._APP_ID_84:t===o.I?this._IterableDiffers_85:t===o.J?this._KeyValueDiffers_86:t===l.r?this._DomSanitizer_87:t===o.s?this._Sanitizer_88:t===l.s?this._HAMMER_GESTURE_CONFIG_89:t===l.t?this._EVENT_MANAGER_PLUGINS_90:t===l.i?this._EventManager_91:t===l.j?this._DomSharedStylesHost_92:t===l.k?this._DomRendererFactory2_93:t===ut.a?this._AnimationDriver_94:t===ut.b?this._AnimationStyleNormalizer_95:t===ut.c?this._AnimationEngine_96:t===o.y?this._RendererFactory2_97:t===l.u?this._SharedStylesHost_98:t===o.z?this._Testability_99:t===l.l?this._Meta_100:t===l.m?this._Title_101:t===s.a?this._i_102:t===B.a?this._MatchMedia_103:t===ct.a?this._BREAKPOINTS_104:t===j.a?this._BreakPointRegistry_105:t===z.a?this._MediaMonitor_106:t===N.b?this._ObservableMedia_107:t===f.a?this._Platform_108:t===f.b?this._InteractivityChecker_109:t===f.c?this._FocusTrapFactory_110:t===f.e?this._LiveAnnouncer_111:t===f.h?this._OverlayContainer_112:t===f.j?this._ScrollDispatcher_113:t===f.l?this._h_114:t===f.m?this._k_115:t===f.n?this._Overlay_116:t===f.p?this._MdIconRegistry_117:t===f.r?this._FocusOriginMonitor_118:t===s.b?this._FormBuilder_119:t===r.v?this._ROUTER_INITIALIZER_120:t===o._10?this._APP_BOOTSTRAP_LISTENER_121:t===G.a?this._CanActivateWorld_122:t===r.w?this._ActivatedRoute_123:t===r.c?this._NoPreloading_124:t===r.x?this._PreloadingStrategy_125:t===r.d?this._RouterPreloader_126:t===r.e?this._PreloadAllModules_127:t===U.a?this._SpriteRender_128:t===H.a?this._GameWorld_129:t===X.a?this._GameResolver_130:t===W.a?this._RPGGame_131:t===V.a?this._Visibility_132:t===Y.a?this._CanActivateCombat_133:e},e.prototype.destroyInternal=function(){this._f_6.ngOnDestroy(),this._EffectsSubscription_79.ngOnDestroy(),this.__DomSharedStylesHost_92&&this._DomSharedStylesHost_92.ngOnDestroy(),this.__RouterPreloader_126&&this._RouterPreloader_126.ngOnDestroy()},e}(o._11),dt=new o._12(pt,a.a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function o(t){return r._31(0,[(t()(),r._32(0,null,null,1,"rpg-notification",[],null,null,null,l.a,l.b)),r._33(49152,null,0,s.a,[u.a,c.a,r.K],null,null),(t()(),r._34(null,["\n"])),(t()(),r._32(0,null,null,1,"loading",[],null,null,null,p.a,p.b)),r._33(49152,null,0,d.a,[c.a],null,null),(t()(),r._34(null,["\n"])),(t()(),r._32(0,null,null,4,"main",[],null,null,null,null,null)),(t()(),r._34(null,["\n  "])),(t()(),r._32(16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r._33(147456,null,0,h.z,[h.l,r.P,r.O,[8,null]],null,null),(t()(),r._34(null,["\n"])),(t()(),r._34(null,["\n\n"]))],null,null)}function a(t){return r._31(0,[(t()(),r._32(0,null,null,1,"app",[],null,null,null,o,y)),r._33(49152,null,0,f.a,[m.a,_.a,u.a],null,null)],null,null)}var i=n(442),r=n(1),l=n(448),s=n(148),u=n(11),c=n(21),p=n(447),d=n(147),h=n(78),f=n(205),m=n(16),_=n(15);n.d(e,"a",function(){return v});var g=[i.a],y=r._30({encapsulation:2,styles:g,data:{}}),v=r._35("app",f.a,a,{},{},[])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=['.pt-page{width:100%;height:100%;position:absolute;top:0;left:0;visibility:hidden;overflow:hidden;-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);transform:translateZ(0);-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;transform-style:preserve-3d}.no-js body{overflow:auto}.pt-page-ontop,.scale-down.ng-hide-add{z-index:99}.pt-page{visibility:visible;z-index:1}.pt-page-scaleDown{-webkit-animation:scaleDown .7s ease both;-moz-animation:scaleDown .7s ease both;animation:scaleDown .7s ease both}.pt-page-scaleUp,.scale-down.ng-hide-remove{-webkit-animation:scaleUp .7s ease both;-moz-animation:scaleUp .7s ease both;animation:scaleUp .7s ease both}.pt-page-scaleUpDown{-webkit-animation:scaleUpDown .5s ease both;-moz-animation:scaleUpDown .5s ease both;animation:scaleUpDown .5s ease both}.pt-page-scaleDownUp,.scale-down.ng-hide-add{-webkit-animation:scaleDownUp .5s ease both;-moz-animation:scaleDownUp .5s ease both;animation:scaleDownUp .5s ease both}.pt-page-scaleDownCenter{-webkit-animation:scaleDownCenter .4s ease-in both;-moz-animation:scaleDownCenter .4s ease-in both;animation:scaleDownCenter .4s ease-in both}.pt-page-scaleUpCenter{-webkit-animation:scaleUpCenter .4s ease-out both;-moz-animation:scaleUpCenter .4s ease-out both;animation:scaleUpCenter .4s ease-out both}@-webkit-keyframes scaleDown{to{opacity:0;-webkit-transform:scale(.8)}}@-moz-keyframes scaleDown{to{opacity:0;-moz-transform:scale(.8)}}@keyframes scaleDown{to{opacity:0;transform:scale(.8)}}@-webkit-keyframes scaleUp{0%{opacity:0;-webkit-transform:scale(.8)}}@-moz-keyframes scaleUp{0%{opacity:0;-moz-transform:scale(.8)}}@keyframes scaleUp{0%{opacity:0;transform:scale(.8)}}@-webkit-keyframes scaleUpDown{0%{opacity:0;-webkit-transform:scale(1.2)}}@-moz-keyframes scaleUpDown{0%{opacity:0;-moz-transform:scale(1.2)}}@keyframes scaleUpDown{0%{opacity:0;transform:scale(1.2)}}@-webkit-keyframes scaleDownUp{to{opacity:0;-webkit-transform:scale(1.2)}}@-moz-keyframes scaleDownUp{to{opacity:0;-moz-transform:scale(1.2)}}@keyframes scaleDownUp{to{opacity:0;transform:scale(1.2)}}@-webkit-keyframes scaleDownCenter{to{opacity:0;-webkit-transform:scale(.7)}}@-moz-keyframes scaleDownCenter{to{opacity:0;-moz-transform:scale(.7)}}@keyframes scaleDownCenter{to{opacity:0;transform:scale(.7)}}@-webkit-keyframes scaleUpCenter{0%{opacity:0;-webkit-transform:scale(.7)}}@-moz-keyframes scaleUpCenter{0%{opacity:0;-moz-transform:scale(.7)}}@keyframes scaleUpCenter{0%{opacity:0;transform:scale(.7)}}.pt-page-delay100{-webkit-animation-delay:.1s;-moz-animation-delay:.1s;animation-delay:.1s}.pt-page-delay180{-webkit-animation-delay:.18s;-moz-animation-delay:.18s;animation-delay:.18s}.pt-page-delay200{-webkit-animation-delay:.2s;-moz-animation-delay:.2s;animation-delay:.2s}.pt-page-delay300{-webkit-animation-delay:.3s;-moz-animation-delay:.3s;animation-delay:.3s}.pt-page-delay400{-webkit-animation-delay:.4s;-moz-animation-delay:.4s;animation-delay:.4s}.pt-page-delay500,.scale-down.ng-hide-add{-webkit-animation-delay:.5s;-moz-animation-delay:.5s;animation-delay:.5s}.pt-page-delay700{-webkit-animation-delay:.7s;-moz-animation-delay:.7s;animation-delay:.7s}.pt-page-delay1000,.scale-down.ng-hide-remove{-webkit-animation-delay:1s;-moz-animation-delay:1s;animation-delay:1s}.pt-page-moveToLeft{-webkit-animation:moveToLeft .6s ease both;-moz-animation:moveToLeft .6s ease both;animation:moveToLeft .6s ease both}.pt-page-moveFromLeft{-webkit-animation:moveFromLeft .6s ease both;-moz-animation:moveFromLeft .6s ease both;animation:moveFromLeft .6s ease both}.pt-page-moveToRight{-webkit-animation:moveToRight .6s ease both;-moz-animation:moveToRight .6s ease both;animation:moveToRight .6s ease both}.pt-page-moveFromRight{-webkit-animation:moveFromRight .6s ease both;-moz-animation:moveFromRight .6s ease both;animation:moveFromRight .6s ease both}.pt-page-moveToTop{-webkit-animation:moveToTop .6s ease both;-moz-animation:moveToTop .6s ease both;animation:moveToTop .6s ease both}.pt-page-moveFromTop{-webkit-animation:moveFromTop .6s ease both;-moz-animation:moveFromTop .6s ease both;animation:moveFromTop .6s ease both}.pt-page-moveToBottom{-webkit-animation:moveToBottom .6s ease both;-moz-animation:moveToBottom .6s ease both;animation:moveToBottom .6s ease both}.pt-page-moveFromBottom{-webkit-animation:moveFromBottom .6s ease both;-moz-animation:moveFromBottom .6s ease both;animation:moveFromBottom .6s ease both}.pt-page-fade{-webkit-animation:fade .7s ease both;-moz-animation:fade .7s ease both;animation:fade .7s ease both}.pt-page-moveToLeftFade{-webkit-animation:moveToLeftFade .7s ease both;-moz-animation:moveToLeftFade .7s ease both;animation:moveToLeftFade .7s ease both}.pt-page-moveFromLeftFade{-webkit-animation:moveFromLeftFade .7s ease both;-moz-animation:moveFromLeftFade .7s ease both;animation:moveFromLeftFade .7s ease both}.pt-page-moveToRightFade{-webkit-animation:moveToRightFade .7s ease both;-moz-animation:moveToRightFade .7s ease both;animation:moveToRightFade .7s ease both}.pt-page-moveFromRightFade{-webkit-animation:moveFromRightFade .7s ease both;-moz-animation:moveFromRightFade .7s ease both;animation:moveFromRightFade .7s ease both}.pt-page-moveToTopFade{-webkit-animation:moveToTopFade .7s ease both;-moz-animation:moveToTopFade .7s ease both;animation:moveToTopFade .7s ease both}.pt-page-moveFromTopFade{-webkit-animation:moveFromTopFade .7s ease both;-moz-animation:moveFromTopFade .7s ease both;animation:moveFromTopFade .7s ease both}.pt-page-moveToBottomFade{-webkit-animation:moveToBottomFade .7s ease both;-moz-animation:moveToBottomFade .7s ease both;animation:moveToBottomFade .7s ease both}.pt-page-moveFromBottomFade{-webkit-animation:moveFromBottomFade .7s ease both;-moz-animation:moveFromBottomFade .7s ease both;animation:moveFromBottomFade .7s ease both}.pt-page-moveToLeftEasing{-webkit-animation:moveToLeft .7s ease-in-out both;-moz-animation:moveToLeft .7s ease-in-out both;animation:moveToLeft .7s ease-in-out both}.pt-page-moveToRightEasing{-webkit-animation:moveToRight .7s ease-in-out both;-moz-animation:moveToRight .7s ease-in-out both;animation:moveToRight .7s ease-in-out both}.pt-page-moveToTopEasing{-webkit-animation:moveToTop .7s ease-in-out both;-moz-animation:moveToTop .7s ease-in-out both;animation:moveToTop .7s ease-in-out both}.pt-page-moveToBottomEasing{-webkit-animation:moveToBottom .7s ease-in-out both;-moz-animation:moveToBottom .7s ease-in-out both;animation:moveToBottom .7s ease-in-out both}@-webkit-keyframes moveToLeft{to{-webkit-transform:translateX(-100%)}}@-moz-keyframes moveToLeft{to{-moz-transform:translateX(-100%)}}@keyframes moveToLeft{to{transform:translateX(-100%)}}@-webkit-keyframes moveFromLeft{0%{-webkit-transform:translateX(-100%)}}@-moz-keyframes moveFromLeft{0%{-moz-transform:translateX(-100%)}}@keyframes moveFromLeft{0%{transform:translateX(-100%)}}@-webkit-keyframes moveToBottom{to{-webkit-transform:translateY(100%)}}@-moz-keyframes moveToBottom{to{-moz-transform:translateY(100%)}}@keyframes moveToBottom{to{transform:translateY(100%)}}@-webkit-keyframes moveFromBottom{0%{-webkit-transform:translateY(100%)}}@-moz-keyframes moveFromBottom{0%{-moz-transform:translateY(100%)}}@keyframes moveFromBottom{0%{transform:translateY(100%)}}@-webkit-keyframes fade{to{opacity:.3}}@-moz-keyframes fade{to{opacity:.3}}@keyframes fade{to{opacity:.3}}@-webkit-keyframes moveToLeftFade{to{opacity:.3;-webkit-transform:translateX(-100%)}}@-moz-keyframes moveToLeftFade{to{opacity:.3;-moz-transform:translateX(-100%)}}@keyframes moveToLeftFade{to{opacity:.3;transform:translateX(-100%)}}@-webkit-keyframes moveFromLeftFade{0%{opacity:.3;-webkit-transform:translateX(-100%)}}@-moz-keyframes moveFromLeftFade{0%{opacity:.3;-moz-transform:translateX(-100%)}}@keyframes moveFromLeftFade{0%{opacity:.3;transform:translateX(-100%)}}@-webkit-keyframes moveToRightFade{to{opacity:.3;-webkit-transform:translateX(100%)}}@-moz-keyframes moveToRightFade{to{opacity:.3;-moz-transform:translateX(100%)}}@keyframes moveToRightFade{to{opacity:.3;transform:translateX(100%)}}@-webkit-keyframes moveFromRightFade{0%{opacity:.3;-webkit-transform:translateX(100%)}}@-moz-keyframes moveFromRightFade{0%{opacity:.3;-moz-transform:translateX(100%)}}@keyframes moveFromRightFade{0%{opacity:.3;transform:translateX(100%)}}@-webkit-keyframes moveToTopFade{to{opacity:.3;-webkit-transform:translateY(-100%)}}@-moz-keyframes moveToTopFade{to{opacity:.3;-moz-transform:translateY(-100%)}}@keyframes moveToTopFade{to{opacity:.3;transform:translateY(-100%)}}@-webkit-keyframes moveFromTopFade{0%{opacity:.3;-webkit-transform:translateY(-100%)}}@-moz-keyframes moveFromTopFade{0%{opacity:.3;-moz-transform:translateY(-100%)}}@keyframes moveFromTopFade{0%{opacity:.3;transform:translateY(-100%)}}@-webkit-keyframes moveToBottomFade{to{opacity:.3;-webkit-transform:translateY(100%)}}@-moz-keyframes moveToBottomFade{to{opacity:.3;-moz-transform:translateY(100%)}}@keyframes moveToBottomFade{to{opacity:.3;transform:translateY(100%)}}@-webkit-keyframes moveFromBottomFade{0%{opacity:.3;-webkit-transform:translateY(100%)}}@-moz-keyframes moveFromBottomFade{0%{opacity:.3;-moz-transform:translateY(100%)}}@keyframes moveFromBottomFade{0%{opacity:.3;transform:translateY(100%)}}@-webkit-keyframes moveFromRight{0%{-webkit-transform:translateX(100%)}}@-moz-keyframes moveFromRight{0%{-moz-transform:translateX(100%)}}@keyframes moveFromRight{0%{transform:translateX(100%)}}@-webkit-keyframes moveToRight{to{-webkit-transform:translateX(100%)}}@-moz-keyframes moveToRight{to{-moz-transform:translateX(100%)}}@keyframes moveToRight{to{transform:translateX(100%)}}@-webkit-keyframes moveFromTop{0%{opacity:.3;-webkit-transform:translateY(-100%)}to{opacity:1}}@-moz-keyframes moveFromTop{0%{opacity:.3;-moz-transform:translateY(-100%)}to{opacity:1}}@keyframes moveFromTop{0%{opacity:.3;transform:translateY(-100%)}to{opacity:1;transform:translateY(0)}}@-webkit-keyframes moveToTop{to{opacity:.3;-webkit-transform:translateY(100%)}}@-moz-keyframes moveToTop{to{opacity:.3;-moz-transform:translateY(100%)}}@keyframes moveToTop{to{opacity:.3;transform:translateY(100%)}}@-webkit-keyframes fadeOut{to{opacity:0}}@-moz-keyframes fadeOut{to{opacity:0}}@keyframes fadeOut{to{opacity:0}}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@-moz-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.moveFromRight,.slide-from-right.ng-hide-remove{-webkit-animation:moveFromRight .6s ease both;-moz-animation:moveFromRight .6s ease both;animation:moveFromRight .6s ease both}.moveToRight,.slide-from-right.ng-hide-add{-webkit-animation:moveToRight .6s ease both;-moz-animation:moveToRight .6s ease both;animation:moveToRight .6s ease both}.slide-from-right.ng-hide-add,.slide-from-right.ng-hide-remove{display:block!important}.fade.ng-hide-add,.fadeOut,.menu-fade.ng-hide-add{-webkit-animation:fadeOut .3s ease both;-moz-animation:fadeOut .3s ease both;animation:fadeOut .3s ease both}.fade.ng-hide-remove,.fadeIn,.menu-fade.ng-hide-remove{-webkit-animation:fadeIn .3s ease both;-moz-animation:fadeIn .3s ease both;animation:fadeIn .3s ease both}.fade.ng-enter,.menu-fade.ng-hide-add,.menu-fade.ng-hide-remove{display:block!important}.fade.ng-enter{opacity:0}.fade.ng-enter,.fade.ng-enter.ng-enter-active{-webkit-animation:fadeIn .3s ease both;-moz-animation:fadeIn .3s ease both;animation:fadeIn .3s ease both;display:block!important}.fade.ng-leave{opacity:1;display:block!important}.fade.ng-leave,.fade.ng-leave-active{-webkit-animation:fadeOut .3s ease both;-moz-animation:fadeOut .3s ease both;animation:fadeOut .3s ease both;display:block!important}.fade.ng-hide-add,.fade.ng-hide-add-active,.fade.ng-hide-remove,.fade.ng-hide-remove-active{display:block!important}.fade.ng-hide-add{opacity:1}.fade.ng-hide-remove{opacity:0}.scale-down.ng-hide-add,.scale-down.ng-hide-remove{display:block!important}.loading{position:absolute;left:0;right:0;top:0;bottom:0}.loading .loading-wrapper{display:table;width:100%;height:100%;min-height:100%}.loading .loading-wrapper-inner{display:table-cell;vertical-align:middle;text-align:center}.mat-elevation-z0{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-elevation-z1{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.mat-elevation-z2{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-elevation-z3{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.mat-elevation-z4{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mat-elevation-z5{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 5px 8px 0 rgba(0,0,0,.14),0 1px 14px 0 rgba(0,0,0,.12)}.mat-elevation-z6{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-elevation-z7{box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}.mat-elevation-z8{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-elevation-z9{box-shadow:0 5px 6px -3px rgba(0,0,0,.2),0 9px 12px 1px rgba(0,0,0,.14),0 3px 16px 2px rgba(0,0,0,.12)}.mat-elevation-z10{box-shadow:0 6px 6px -3px rgba(0,0,0,.2),0 10px 14px 1px rgba(0,0,0,.14),0 4px 18px 3px rgba(0,0,0,.12)}.mat-elevation-z11{box-shadow:0 6px 7px -4px rgba(0,0,0,.2),0 11px 15px 1px rgba(0,0,0,.14),0 4px 20px 3px rgba(0,0,0,.12)}.mat-elevation-z12{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-elevation-z13{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}.mat-elevation-z14{box-shadow:0 7px 9px -4px rgba(0,0,0,.2),0 14px 21px 2px rgba(0,0,0,.14),0 5px 26px 4px rgba(0,0,0,.12)}.mat-elevation-z15{box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}.mat-elevation-z16{box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.mat-elevation-z17{box-shadow:0 8px 11px -5px rgba(0,0,0,.2),0 17px 26px 2px rgba(0,0,0,.14),0 6px 32px 5px rgba(0,0,0,.12)}.mat-elevation-z18{box-shadow:0 9px 11px -5px rgba(0,0,0,.2),0 18px 28px 2px rgba(0,0,0,.14),0 7px 34px 6px rgba(0,0,0,.12)}.mat-elevation-z19{box-shadow:0 9px 12px -6px rgba(0,0,0,.2),0 19px 29px 2px rgba(0,0,0,.14),0 7px 36px 6px rgba(0,0,0,.12)}.mat-elevation-z20{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 20px 31px 3px rgba(0,0,0,.14),0 8px 38px 7px rgba(0,0,0,.12)}.mat-elevation-z21{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 21px 33px 3px rgba(0,0,0,.14),0 8px 40px 7px rgba(0,0,0,.12)}.mat-elevation-z22{box-shadow:0 10px 14px -6px rgba(0,0,0,.2),0 22px 35px 3px rgba(0,0,0,.14),0 8px 42px 7px rgba(0,0,0,.12)}.mat-elevation-z23{box-shadow:0 11px 14px -7px rgba(0,0,0,.2),0 23px 36px 3px rgba(0,0,0,.14),0 9px 44px 8px rgba(0,0,0,.12)}.mat-elevation-z24{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12)}.mat-ripple{overflow:hidden}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0,0,.2,1);transform:scale(0)}.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;font-size:16px;font-family:Roboto,Helvetica Neue,sans-serif;text-align:left;text-decoration:none;position:relative;cursor:pointer;outline:none}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px}[dir=rtl] .mat-option .mat-icon{margin-left:16px}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-option-ripple{position:absolute;top:0;left:0;bottom:0;right:0}@media screen and (-ms-high-contrast:active){.mat-option-ripple{opacity:.5}}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;text-transform:none;width:1px}.cdk-global-overlay-wrapper,.cdk-overlay-container{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed;z-index:1000}.cdk-global-overlay-wrapper{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane{box-sizing:border-box}.cdk-overlay-backdrop,.cdk-overlay-pane{position:absolute;pointer-events:auto;z-index:1000}.cdk-overlay-backdrop{top:0;bottom:0;left:0;right:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:.48}.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.6)}.cdk-overlay-transparent-backdrop{background:none}.mat-ripple-element{background-color:hsla(0,0%,100%,.1)}.mat-option:focus:not(.mat-option-disabled),.mat-option:hover:not(.mat-option-disabled){background:hsla(0,0%,100%,.04)}.mat-option.mat-selected{color:#004c62}.mat-option.mat-active,.mat-option.mat-selected:not(.mat-option-multiple){background:hsla(0,0%,100%,.04)}.mat-option.mat-active{color:#fff}.mat-option.mat-option-disabled{color:hsla(0,0%,100%,.3)}.mat-pseudo-checkbox{color:hsla(0,0%,100%,.7)}.mat-pseudo-checkbox:after{color:#303030}.mat-pseudo-checkbox-checked.mat-primary,.mat-pseudo-checkbox-indeterminate.mat-primary{background:#0088ad}.mat-pseudo-checkbox-checked.mat-accent,.mat-pseudo-checkbox-indeterminate.mat-accent{background:#ffe261}.mat-pseudo-checkbox-checked.mat-warn,.mat-pseudo-checkbox-indeterminate.mat-warn{background:#f44336}.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background:#686868}.mat-app-background{background-color:#303030}.mat-theme-loaded-marker{display:none}.mat-autocomplete-panel,.mat-autocomplete-panel .mat-option.mat-selected:not(.mat-active){background:#424242;color:#fff}.mat-button.mat-primary .mat-button-focus-overlay,.mat-fab.mat-primary .mat-button-focus-overlay,.mat-icon-button.mat-primary .mat-button-focus-overlay,.mat-mini-fab.mat-primary .mat-button-focus-overlay,.mat-raised-button.mat-primary .mat-button-focus-overlay{background-color:rgba(0,76,98,.12)}.mat-button.mat-accent .mat-button-focus-overlay,.mat-fab.mat-accent .mat-button-focus-overlay,.mat-icon-button.mat-accent .mat-button-focus-overlay,.mat-mini-fab.mat-accent .mat-button-focus-overlay,.mat-raised-button.mat-accent .mat-button-focus-overlay{background-color:rgba(217,177,0,.12)}.mat-button.mat-warn .mat-button-focus-overlay,.mat-fab.mat-warn .mat-button-focus-overlay,.mat-icon-button.mat-warn .mat-button-focus-overlay,.mat-mini-fab.mat-warn .mat-button-focus-overlay,.mat-raised-button.mat-warn .mat-button-focus-overlay{background-color:rgba(244,67,54,.12)}.mat-button[disabled] .mat-button-focus-overlay,.mat-fab[disabled] .mat-button-focus-overlay,.mat-icon-button[disabled] .mat-button-focus-overlay,.mat-mini-fab[disabled] .mat-button-focus-overlay,.mat-raised-button[disabled] .mat-button-focus-overlay{background-color:transparent}.mat-button,.mat-icon-button{background:transparent}.mat-button.mat-primary,.mat-icon-button.mat-primary{color:#004c62}.mat-button.mat-accent,.mat-icon-button.mat-accent{color:#d9b100}.mat-button.mat-warn,.mat-icon-button.mat-warn{color:#f44336}.mat-button.mat-accent[disabled],.mat-button.mat-primary[disabled],.mat-button.mat-warn[disabled],.mat-button[disabled][disabled],.mat-icon-button.mat-accent[disabled],.mat-icon-button.mat-primary[disabled],.mat-icon-button.mat-warn[disabled],.mat-icon-button[disabled][disabled]{color:hsla(0,0%,100%,.3)}.mat-icon-button.mat-primary .mat-ripple-element{background-color:rgba(0,76,98,.26)}.mat-icon-button.mat-accent .mat-ripple-element{background-color:rgba(217,177,0,.26)}.mat-icon-button.mat-warn .mat-ripple-element{background-color:rgba(244,67,54,.26)}.mat-fab,.mat-mini-fab,.mat-raised-button{color:#fff;background-color:#424242}.mat-fab.mat-primary,.mat-mini-fab.mat-primary,.mat-raised-button.mat-primary{color:hsla(0,0%,100%,.87)}.mat-fab.mat-accent,.mat-mini-fab.mat-accent,.mat-raised-button.mat-accent{color:rgba(0,0,0,.87)}.mat-fab.mat-warn,.mat-mini-fab.mat-warn,.mat-raised-button.mat-warn{color:#fff}.mat-fab.mat-accent[disabled],.mat-fab.mat-primary[disabled],.mat-fab.mat-warn[disabled],.mat-fab[disabled][disabled],.mat-mini-fab.mat-accent[disabled],.mat-mini-fab.mat-primary[disabled],.mat-mini-fab.mat-warn[disabled],.mat-mini-fab[disabled][disabled],.mat-raised-button.mat-accent[disabled],.mat-raised-button.mat-primary[disabled],.mat-raised-button.mat-warn[disabled],.mat-raised-button[disabled][disabled]{color:hsla(0,0%,100%,.3)}.mat-fab.mat-primary,.mat-mini-fab.mat-primary,.mat-raised-button.mat-primary{background-color:#004c62}.mat-fab.mat-accent,.mat-mini-fab.mat-accent,.mat-raised-button.mat-accent{background-color:#d9b100}.mat-fab.mat-warn,.mat-mini-fab.mat-warn,.mat-raised-button.mat-warn{background-color:#f44336}.mat-fab.mat-accent[disabled],.mat-fab.mat-primary[disabled],.mat-fab.mat-warn[disabled],.mat-fab[disabled][disabled],.mat-mini-fab.mat-accent[disabled],.mat-mini-fab.mat-primary[disabled],.mat-mini-fab.mat-warn[disabled],.mat-mini-fab[disabled][disabled],.mat-raised-button.mat-accent[disabled],.mat-raised-button.mat-primary[disabled],.mat-raised-button.mat-warn[disabled],.mat-raised-button[disabled][disabled]{background-color:hsla(0,0%,100%,.12)}.mat-fab,.mat-mini-fab{background-color:#d9b100;color:rgba(0,0,0,.87)}.mat-button-toggle{color:hsla(0,0%,100%,.3)}.mat-button-toggle.cdk-focused .mat-button-toggle-focus-overlay{background-color:hsla(0,0%,100%,.06)}.mat-button-toggle-checked{background-color:#212121;color:#fff}.mat-button-toggle-disabled{background-color:#000;color:hsla(0,0%,100%,.3)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:#424242}.mat-card{background:#424242;color:#fff}.mat-card-subtitle{color:hsla(0,0%,100%,.7)}.mat-checkbox-frame{border-color:hsla(0,0%,100%,.7)}.mat-checkbox-checkmark{fill:#303030}.mat-checkbox-checkmark-path{stroke:#303030!important}.mat-checkbox-mixedmark{background-color:#303030}.mat-checkbox-checked.mat-primary .mat-checkbox-background,.mat-checkbox-indeterminate.mat-primary .mat-checkbox-background{background-color:#0088ad}.mat-checkbox-checked.mat-accent .mat-checkbox-background,.mat-checkbox-indeterminate.mat-accent .mat-checkbox-background{background-color:#ffe261}.mat-checkbox-checked.mat-warn .mat-checkbox-background,.mat-checkbox-indeterminate.mat-warn .mat-checkbox-background{background-color:#f44336}.mat-checkbox-disabled.mat-checkbox-checked .mat-checkbox-background,.mat-checkbox-disabled.mat-checkbox-indeterminate .mat-checkbox-background{background-color:#686868}.mat-checkbox-disabled:not(.mat-checkbox-checked) .mat-checkbox-frame{border-color:#686868}.mat-checkbox:not(.mat-checkbox-disabled).mat-primary .mat-checkbox-ripple .mat-ripple-element{background-color:rgba(0,76,98,.26)}.mat-checkbox:not(.mat-checkbox-disabled).mat-accent .mat-checkbox-ripple .mat-ripple-element{background-color:rgba(217,177,0,.26)}.mat-checkbox:not(.mat-checkbox-disabled).mat-warn .mat-checkbox-ripple .mat-ripple-element{background-color:rgba(244,67,54,.26)}.mat-chip:not(.mat-basic-chip){background-color:#424242;color:#fff}.mat-chip.mat-chip-selected:not(.mat-basic-chip){background-color:#212121;color:#fff}.mat-chip.mat-chip-selected:not(.mat-basic-chip).mat-primary{background-color:#0088ad;color:#fff}.mat-chip.mat-chip-selected:not(.mat-basic-chip).mat-accent{background-color:#ffe261;color:rgba(0,0,0,.87)}.mat-chip.mat-chip-selected:not(.mat-basic-chip).mat-warn{background-color:#f44336;color:#fff}.mat-dialog-container{background:#424242}.mat-icon.mat-primary{color:#004c62}.mat-icon.mat-accent{color:#d9b100}.mat-icon.mat-warn{color:#f44336}.mat-input-placeholder{color:hsla(0,0%,100%,.3)}.mat-focused .mat-input-placeholder{color:#004c62}.mat-focused .mat-input-placeholder.mat-accent{color:#d9b100}.mat-focused .mat-input-placeholder.mat-warn{color:#f44336}.mat-input-element:disabled{color:hsla(0,0%,100%,.3)}.mat-focused .mat-input-placeholder.mat-float .mat-placeholder-required,input.mat-input-element:-webkit-autofill+.mat-input-placeholder .mat-placeholder-required{color:#d9b100}.mat-input-underline{border-color:hsla(0,0%,100%,.12)}.mat-input-underline .mat-input-ripple{background-color:#004c62}.mat-input-underline .mat-input-ripple.mat-accent{background-color:#d9b100}.mat-input-underline .mat-input-ripple.mat-warn{background-color:#f44336}.mat-input-invalid .mat-input-placeholder,.mat-input-invalid .mat-placeholder-required{color:#f44336}.mat-input-invalid .mat-input-underline{border-color:#f44336}.mat-input-invalid .mat-input-ripple{background-color:#f44336}.mat-input-error{color:#f44336}.mat-list .mat-list-item,.mat-nav-list .mat-list-item{color:#fff}.mat-list .mat-subheader,.mat-nav-list .mat-subheader{color:hsla(0,0%,100%,.7)}.mat-divider{border-top-color:hsla(0,0%,100%,.12)}.mat-nav-list .mat-list-item-content.mat-list-item-focus,.mat-nav-list .mat-list-item-content:hover{background:hsla(0,0%,100%,.04)}.mat-menu-content{background:#424242}.mat-menu-item{background:transparent;color:#fff}.mat-menu-item[disabled]{color:hsla(0,0%,100%,.3)}.mat-menu-item .mat-icon{color:#fff;vertical-align:middle}.mat-menu-item:focus:not([disabled]),.mat-menu-item:hover:not([disabled]){background:hsla(0,0%,100%,.04)}.mat-progress-bar-background{background:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20version%3D%271.1%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20xmlns%3Axlink%3D%27http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%27%20x%3D%270px%27%20y%3D%270px%27%20enable-background%3D%27new%200%200%205%202%27%20xml%3Aspace%3D%27preserve%27%20viewBox%3D%270%200%205%202%27%20preserveAspectRatio%3D%27none%20slice%27%3E%3Ccircle%20cx%3D%271%27%20cy%3D%271%27%20r%3D%271%27%20fill%3D%27%23ccf5ff%27%2F%3E%3C%2Fsvg%3E")}.mat-progress-bar-buffer{background-color:#ccf5ff}.mat-progress-bar-fill:after{background-color:#007494}.mat-progress-bar.mat-accent .mat-progress-bar-background{background:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20version%3D%271.1%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20xmlns%3Axlink%3D%27http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%27%20x%3D%270px%27%20y%3D%270px%27%20enable-background%3D%27new%200%200%205%202%27%20xml%3Aspace%3D%27preserve%27%20viewBox%3D%270%200%205%202%27%20preserveAspectRatio%3D%27none%20slice%27%3E%3Ccircle%20cx%3D%271%27%20cy%3D%271%27%20r%3D%271%27%20fill%3D%27%23fff5c7%27%2F%3E%3C%2Fsvg%3E")}.mat-progress-bar.mat-accent .mat-progress-bar-buffer{background-color:#fff5c7}.mat-progress-bar.mat-accent .mat-progress-bar-fill:after{background-color:#ffdd45}.mat-progress-bar.mat-warn .mat-progress-bar-background{background:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20version%3D%271.1%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20xmlns%3Axlink%3D%27http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%27%20x%3D%270px%27%20y%3D%270px%27%20enable-background%3D%27new%200%200%205%202%27%20xml%3Aspace%3D%27preserve%27%20viewBox%3D%270%200%205%202%27%20preserveAspectRatio%3D%27none%20slice%27%3E%3Ccircle%20cx%3D%271%27%20cy%3D%271%27%20r%3D%271%27%20fill%3D%27%23ffcdd2%27%2F%3E%3C%2Fsvg%3E")}.mat-progress-bar.mat-warn .mat-progress-bar-buffer{background-color:#ffcdd2}.mat-progress-bar.mat-warn .mat-progress-bar-fill:after{background-color:#e53935}.mat-progress-spinner path,.mat-spinner path{stroke:#007494}.mat-progress-spinner.mat-accent path,.mat-spinner.mat-accent path{stroke:#ffdd45}.mat-progress-spinner.mat-warn path,.mat-spinner.mat-warn path{stroke:#e53935}.mat-radio-outer-circle{border-color:hsla(0,0%,100%,.7)}.mat-radio-checked .mat-radio-outer-circle{border-color:#d9b100}.mat-radio-disabled .mat-radio-outer-circle{border-color:hsla(0,0%,100%,.3)}.mat-radio-inner-circle{background-color:#d9b100}.mat-radio-disabled .mat-radio-inner-circle{background-color:hsla(0,0%,100%,.3)}.mat-radio-ripple .mat-ripple-element{background-color:rgba(217,177,0,.26)}.mat-radio-disabled .mat-radio-ripple .mat-ripple-element{background-color:hsla(0,0%,100%,.3)}.mat-select-trigger{color:hsla(0,0%,100%,.3)}.mat-select:focus:not(.mat-select-disabled) .mat-select-trigger{color:#004c62}.mat-select:not(:focus).ng-invalid.ng-touched:not(.mat-select-disabled) .mat-select-trigger{color:#f44336}.mat-select-underline{background-color:hsla(0,0%,100%,.12)}.mat-select:focus:not(.mat-select-disabled) .mat-select-underline{background-color:#004c62}.mat-select:not(:focus).ng-invalid.ng-touched:not(.mat-select-disabled) .mat-select-underline{background-color:#f44336}.mat-select-arrow{color:hsla(0,0%,100%,.3)}.mat-select:focus:not(.mat-select-disabled) .mat-select-arrow{color:#004c62}.mat-select:not(:focus).ng-invalid.ng-touched:not(.mat-select-disabled) .mat-select-arrow{color:#f44336}.mat-select-content,.mat-select-panel-done-animating{background:#424242}.mat-select-value{color:#fff}.mat-select-disabled .mat-select-value{color:hsla(0,0%,100%,.3)}.mat-sidenav-container{background-color:#303030;color:#fff}.mat-sidenav{color:#fff}.mat-sidenav,.mat-sidenav.mat-sidenav-push{background-color:#424242}.mat-sidenav-backdrop.mat-sidenav-shown{background-color:hsla(0,0%,74%,.6)}.mat-slide-toggle.mat-checked:not(.mat-disabled) .mat-slide-toggle-thumb{background-color:#fff0ad}.mat-slide-toggle.mat-checked:not(.mat-disabled) .mat-slide-toggle-bar{background-color:rgba(255,240,173,.5)}.mat-slide-toggle:not(.mat-checked) .mat-ripple-element{background-color:hsla(0,0%,100%,.12)}.mat-slide-toggle .mat-ripple-element{background-color:rgba(255,240,173,.12)}.mat-slide-toggle.mat-primary.mat-checked:not(.mat-disabled) .mat-slide-toggle-thumb{background-color:#7de1fa}.mat-slide-toggle.mat-primary.mat-checked:not(.mat-disabled) .mat-slide-toggle-bar{background-color:rgba(125,225,250,.5)}.mat-slide-toggle.mat-primary:not(.mat-checked) .mat-ripple-element{background-color:hsla(0,0%,100%,.12)}.mat-slide-toggle.mat-primary .mat-ripple-element{background-color:rgba(125,225,250,.12)}.mat-slide-toggle.mat-warn.mat-checked:not(.mat-disabled) .mat-slide-toggle-thumb{background-color:#ef9a9a}.mat-slide-toggle.mat-warn.mat-checked:not(.mat-disabled) .mat-slide-toggle-bar{background-color:hsla(0,73%,77%,.5)}.mat-slide-toggle.mat-warn:not(.mat-checked) .mat-ripple-element{background-color:hsla(0,0%,100%,.12)}.mat-slide-toggle.mat-warn .mat-ripple-element{background-color:hsla(0,73%,77%,.12)}.mat-disabled .mat-slide-toggle-thumb{background-color:#424242}.mat-disabled .mat-slide-toggle-bar{background-color:hsla(0,0%,100%,.12)}.mat-slide-toggle-thumb{background-color:#bdbdbd}.mat-slide-toggle-bar{background-color:hsla(0,0%,100%,.3)}.mat-slider-track-background{background-color:rgba(0,0,0,.26)}.mat-primary .mat-slider-thumb,.mat-primary .mat-slider-thumb-label,.mat-primary .mat-slider-track-fill{background-color:#004c62}.mat-accent .mat-slider-thumb,.mat-accent .mat-slider-thumb-label,.mat-accent .mat-slider-track-fill{background-color:#d9b100}.mat-warn .mat-slider-thumb,.mat-warn .mat-slider-thumb-label,.mat-warn .mat-slider-track-fill{background-color:#f44336}.mat-slider-focus-ring{background-color:rgba(217,177,0,.2)}.mat-primary .mat-slider-thumb-label-text{color:hsla(0,0%,100%,.87)}.mat-accent .mat-slider-thumb-label-text{color:rgba(0,0,0,.87)}.mat-warn .mat-slider-thumb-label-text{color:#fff}.cdk-focused .mat-slider-track-background,.mat-slider:hover .mat-slider-track-background{background-color:rgba(0,0,0,.38)}.mat-slider-disabled .mat-slider-thumb,.mat-slider-disabled .mat-slider-track-background,.mat-slider-disabled .mat-slider-track-fill,.mat-slider-disabled:hover .mat-slider-track-background{background-color:rgba(0,0,0,.26)}.mat-slider-min-value .mat-slider-focus-ring{background-color:rgba(0,0,0,.12)}.mat-slider-min-value.mat-slider-thumb-label-showing .mat-slider-thumb,.mat-slider-min-value.mat-slider-thumb-label-showing .mat-slider-thumb-label{background-color:#000}.mat-slider-min-value.mat-slider-thumb-label-showing.cdk-focused .mat-slider-thumb,.mat-slider-min-value.mat-slider-thumb-label-showing.cdk-focused .mat-slider-thumb-label{background-color:rgba(0,0,0,.26)}.mat-slider-min-value:not(.mat-slider-thumb-label-showing) .mat-slider-thumb{border-color:rgba(0,0,0,.26);background-color:transparent}.mat-slider-min-value:not(.mat-slider-thumb-label-showing).cdk-focused .mat-slider-thumb,.mat-slider-min-value:not(.mat-slider-thumb-label-showing):hover .mat-slider-thumb{border-color:rgba(0,0,0,.38)}.mat-slider-min-value:not(.mat-slider-thumb-label-showing).cdk-focused.mat-slider-disabled .mat-slider-thumb,.mat-slider-min-value:not(.mat-slider-thumb-label-showing):hover.mat-slider-disabled .mat-slider-thumb{border-color:rgba(0,0,0,.26)}.mat-tab-header,.mat-tab-nav-bar{border-bottom:1px solid #000}.mat-tab-group-inverted-header .mat-tab-header,.mat-tab-group-inverted-header .mat-tab-nav-bar{border-top:1px solid #000;border-bottom:none}.mat-tab-label:focus{background-color:rgba(204,245,255,.3)}.mat-ink-bar{background-color:#0088ad}.mat-tab-label,.mat-tab-link{color:currentColor}.mat-tab-label.mat-tab-disabled,.mat-tab-link.mat-tab-disabled{color:hsla(0,0%,100%,.3)}.mat-toolbar{background:#212121;color:#fff}.mat-toolbar.mat-primary{background:#004c62;color:hsla(0,0%,100%,.87)}.mat-toolbar.mat-accent{background:#d9b100;color:rgba(0,0,0,.87)}.mat-toolbar.mat-warn{background:#f44336;color:#fff}.mat-tooltip{background:rgba(97,97,97,.9)}body,html{background-color:#222;overflow:hidden;color:hsla(0,0%,100%,.9)}canvas{image-rendering:-moz-crisp-edges;image-rendering:-o-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:crisp-edges;-ms-interpolation-mode:nearest-neighbor}.ebp{font-family:GraphicPixel,sans-serif;background-color:#004c62;color:#fff;border:6px solid #fff;border-radius:9px;text-shadow:2px 2px 0 rgba(0,0,0,.7);padding-top:16px;padding-bottom:16px}.select-map{position:absolute;top:10px;right:10px;margin:1rem;padding:.5rem;opacity:.3;pointer-events:none}.select-map:hover{opacity:1}.select-map select{pointer-events:all}'];
},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"animated-behavior",[],null,null,null,o,s)),i._33(49152,null,0,r.a,[],null,null)],null,null)}var i=n(1),r=n(110);n.d(e,"b",function(){return s}),e.a=o;var l=[],s=i._30({encapsulation:2,styles:l,data:{}});i._35("animated-behavior",r.a,a,{},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"collision-behavior",[],null,null,null,o,s)),i._33(49152,null,0,r.a,[],null,null)],null,null)}var i=n(1),r=n(111);n.d(e,"b",function(){return s}),e.a=o;var l=[],s=i._30({encapsulation:2,styles:l,data:{}});i._35("collision-behavior",r.a,a,{},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[(t()(),i._34(null,["\n    "])),i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"sprite-render-behavior",[],null,null,null,o,u)),i._33(4374528,null,0,r.a,[l.a],null,null)],null,null)}var i=n(1),r=n(145),l=n(15);n.d(e,"b",function(){return u}),e.a=o;var s=[],u=i._30({encapsulation:2,styles:s,data:{}});i._35("sprite-render-behavior",r.a,a,{icon:"icon"},{},["*"])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["[_nghost-%COMP%]{display:inline-flex}[_nghost-%COMP%], [_nghost-%COMP%]   div[_ngcontent-%COMP%]{height:inherit}[_nghost-%COMP%]   div.fine[_ngcontent-%COMP%]{background-color:#2e6da6}[_nghost-%COMP%]   div.hurt[_ngcontent-%COMP%]{background-color:#e6c828}[_nghost-%COMP%]   div.critical[_ngcontent-%COMP%]{background-color:rgba(183,0,5,.5)}[_nghost-%COMP%]   div.dead[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.5)}"]},function(t,e,n){"use strict";function o(t){return r._31(0,[(t()(),r._32(0,null,null,18,"div",[["class","loading fade"]],null,null,null,null,null)),(t()(),r._34(null,["\n    "])),(t()(),r._32(0,null,null,15,"div",[["class","loading-wrapper"]],null,null,null,null,null)),(t()(),r._34(null,["\n      "])),(t()(),r._32(0,null,null,12,"div",[["class","loading-wrapper-inner hero-container"]],null,null,null,null,null)),(t()(),r._34(null,["\n        "])),(t()(),r._32(0,null,null,5,"h1",[],null,null,null,null,null)),(t()(),r._34(null,["\n          "])),(t()(),r._32(0,null,null,2,"a",[["href","https://github.com/justindujardin/angular-rpg"],["target","_blank"]],null,null,null,null,null)),(t()(),r._34(null,["",""])),r._36(131072,l.n,[r.X]),(t()(),r._34(null,["\n        "])),(t()(),r._34(null,["\n        "])),(t()(),r._32(0,null,null,2,"p",[],null,null,null,null,null)),(t()(),r._34(null,["",""])),r._36(131072,l.n,[r.X]),(t()(),r._34(null,["\n      "])),(t()(),r._34(null,["\n    "])),(t()(),r._34(null,["\n  "]))],null,function(t,e){var n=e.component,o=r._37(e,9,0,r._38(e,10).transform(n.loadingService.title$));t(e,9,0,o);var a=r._37(e,14,0,r._38(e,15).transform(n.loadingService.message$));t(e,14,0,a)})}function a(t){return r._31(2,[(t()(),r._34(null,["\n  "])),(t()(),r._39(16777216,null,null,2,null,o)),r._33(16384,null,0,l.o,[r.P,r.Q],{ngIf:[0,"ngIf"]},null),r._36(131072,l.n,[r.X])],function(t,e){var n=e.component,o=r._37(e,2,0,r._38(e,3).transform(n.loadingService.loading$));t(e,2,0,o)},null)}function i(t){return r._31(0,[(t()(),r._32(0,null,null,1,"loading",[],null,null,null,a,p)),r._33(49152,null,0,s.a,[u.a],null,null)],null,null)}var r=n(1),l=n(8),s=n(147),u=n(21);n.d(e,"b",function(){return p}),e.a=a;var c=[],p=r._30({encapsulation:2,styles:c,data:{}});r._35("loading",s.a,i,{},{},[])},function(t,e,n){"use strict";function o(t){return r._31(0,[(t()(),r._32(0,null,null,2,"span",[["class","message"]],[[8,"innerText",0],[2,"loading",null]],null,null,null,null)),r._36(131072,l.n,[r.X]),(t()(),r._34(null,["\n"]))],null,function(t,e){var n=e.component,o=n.notify.message,a=r._37(e,0,1,r._38(e,1).transform(n.loadingService.loading$));t(e,0,0,o,a)})}function a(t){return r._31(0,[(t()(),r._32(0,null,null,1,"rpg-notification",[],null,null,null,o,d)),r._33(49152,null,0,s.a,[u.a,c.a,r.K],null,null)],null,null)}var i=n(449),r=n(1),l=n(8),s=n(148),u=n(11),c=n(21);n.d(e,"b",function(){return d}),e.a=o;var p=[i.a],d=r._30({encapsulation:0,styles:p,data:{}});r._35("rpg-notification",s.a,a,{},{},[])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["[_nghost-%COMP%]{padding:0;top:0;left:0;width:100%;min-height:100%;position:fixed;background-color:transparent;z-index:50;text-align:center;font-family:GraphicPixel,AdvoCut,sans-serif;pointer-events:none;-webkit-transform:scaleY(0);-moz-transform:scaleY(0);transform:scaleY(0);-webkit-transition:transform .2s ease-in-out;-moz-transition:transform .2s ease-in-out;transition:transform .2s ease-in-out}.active[_nghost-%COMP%]{-webkit-transform:scaleX(1);-moz-transform:scaleX(1);transform:scaleX(1);pointer-events:auto}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;top:45%;left:0;right:0;background-color:rgba(0,0,0,.8);border:none;box-shadow:none;margin:auto;position:absolute;padding:25px 10px;font-size:2.5em;color:#fff;text-shadow:1px 1px 0 #000,-2px 0 #000,0 0 #000,-1px 1px 0 #000}[_nghost-%COMP%]   .message.loading[_ngcontent-%COMP%]{visibility:hidden}"]},function(t,e,n){"use strict";function o(t){return f._31(0,[(t()(),f._32(0,null,null,7,"li",[["class","weapon"]],null,[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a.doUnequip$.next({slot:"weapon",item:t.parent.context.$implicit.weapon})!==!1;o=i&&o}return o},null,null)),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,1,"span",[["class","desc"]],null,null,null,null,null)),(t()(),f._34(null,["Weapon"])),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,1,"rpg-sprite",[["class","icon"]],null,null,null,m.a,m.b)),f._33(49152,null,0,_.a,[g.r,y.a],{name:[0,"name"]},null),(t()(),f._34(null,["\n    "]))],function(t,e){var n=e.parent.context.$implicit.weapon.icon;t(e,6,0,n)},null)}function a(t){return f._31(0,[(t()(),f._32(0,null,null,7,"li",[["class","jewelry item"]],null,[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a.doUnequip$.next({slot:"accessory",item:t.parent.context.$implicit.accessory})!==!1;o=i&&o}return o},null,null)),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,1,"span",[["class","desc"]],null,null,null,null,null)),(t()(),f._34(null,["Accessory"])),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,1,"rpg-sprite",[["class","icon"]],null,null,null,m.a,m.b)),f._33(49152,null,0,_.a,[g.r,y.a],{name:[0,"name"]},null),(t()(),f._34(null,["\n    "]))],function(t,e){var n=e.parent.context.$implicit.accessory.icon;t(e,6,0,n)},null)}function i(t){return f._31(0,[(t()(),f._32(0,null,null,7,"li",[["class","head item"]],null,[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a.doUnequip$.next({slot:"helm",item:t.parent.context.$implicit.helm})!==!1;o=i&&o}return o},null,null)),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,1,"span",[["class","desc"]],null,null,null,null,null)),(t()(),f._34(null,["Head"])),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,1,"rpg-sprite",[["class","icon"]],null,null,null,m.a,m.b)),f._33(49152,null,0,_.a,[g.r,y.a],{name:[0,"name"]},null),(t()(),f._34(null,["\n    "]))],function(t,e){var n=e.parent.context.$implicit.helm.icon;t(e,6,0,n)},null)}function r(t){return f._31(0,[(t()(),f._32(0,null,null,7,"li",[["class","body item"]],null,[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a.doUnequip$.next({slot:"armor",item:t.parent.context.$implicit.armor})!==!1;o=i&&o}return o},null,null)),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,1,"span",[["class","desc"]],null,null,null,null,null)),(t()(),f._34(null,["Body"])),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,1,"rpg-sprite",[["class","icon"]],null,null,null,m.a,m.b)),f._33(49152,null,0,_.a,[g.r,y.a],{name:[0,"name"]},null),(t()(),f._34(null,["\n    "]))],function(t,e){var n=e.parent.context.$implicit.armor.icon;t(e,6,0,n)},null)}function l(t){return f._31(0,[(t()(),f._32(0,null,null,7,"li",[["class","arms item"]],null,[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a.doUnequip$.next({slot:"shield",item:t.parent.context.$implicit.shield})!==!1;o=i&&o}return o},null,null)),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,1,"span",[["class","desc"]],null,null,null,null,null)),(t()(),f._34(null,["Arms"])),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,1,"rpg-sprite",[["class","icon"]],null,null,null,m.a,m.b)),f._33(49152,null,0,_.a,[g.r,y.a],{name:[0,"name"]},null),(t()(),f._34(null,["\n    "]))],function(t,e){var n=e.parent.context.$implicit.shield.icon;t(e,6,0,n)},null)}function s(t){return f._31(0,[(t()(),f._32(0,null,null,7,"li",[["class","feet item"]],null,[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a.doUnequip$.next({slot:"boots",item:t.parent.context.$implicit.boots})!==!1;o=i&&o}return o},null,null)),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,1,"span",[["class","desc"]],null,null,null,null,null)),(t()(),f._34(null,["Feet"])),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,1,"rpg-sprite",[["class","icon"]],null,null,null,m.a,m.b)),f._33(49152,null,0,_.a,[g.r,y.a],{name:[0,"name"]},null),(t()(),f._34(null,["\n    "]))],function(t,e){var n=e.parent.context.$implicit.boots.icon;t(e,6,0,n)},null)}function u(t){return f._31(0,[(t()(),f._32(0,null,null,7,"li",[["class","item"]],null,[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a.doEquip$.next({slot:t.context.$implicit.type,item:t.context.$implicit})!==!1;o=i&&o}return o},null,null)),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,1,"span",[["class","desc"]],null,null,null,null,null)),(t()(),f._34(null,["",""])),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,1,"rpg-sprite",[["class","icon"]],null,null,null,m.a,m.b)),f._33(49152,null,0,_.a,[g.r,y.a],{name:[0,"name"]},null),(t()(),f._34(null,["\n      "]))],function(t,e){var n=e.context.$implicit.icon;t(e,6,0,n)},function(t,e){var n=e.context.$implicit.name;t(e,3,0,n)})}function c(t){return f._31(0,[(t()(),f._32(0,null,null,101,"div",[["fxLayout","column"]],null,null,null,null,null)),f._33(737280,null,0,v.a,[b.a,f.K,f.L],{layout:[0,"layout"]},null),(t()(),f._34(null,["\n  "])),(t()(),f._32(0,null,null,60,"div",[["fxLayout","row"],["fxLayoutAlign","space-between stretch"]],null,null,null,null,null)),f._33(737280,null,0,v.a,[b.a,f.K,f.L],{layout:[0,"layout"]},null),f._33(737280,null,0,x.a,[b.a,f.K,f.L,[2,v.a]],{align:[0,"align"]},null),(t()(),f._34(null,["\n    "])),(t()(),f._32(0,null,null,9,"button",[["md-icon-button",""]],[[8,"disabled",0],[2,"mat-icon-button",null]],[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a.previousCharacter()!==!1;o=i&&o}return o},w.c,w.d)),f._33(16384,null,0,k.H,[[2,k.I]],null,null),f._33(180224,null,0,k.K,[f.K,f.L,k.r],null,null),f._33(16384,null,0,k._73,[],null,null),(t()(),f._34(0,["\n      "])),(t()(),f._32(0,null,0,3,"md-icon",[["role","img"]],[[2,"mat-icon",null]],null,null,w.g,w.h)),f._33(16384,null,0,k.H,[[2,k.I]],null,null),f._33(9027584,null,0,k.R,[f.K,f.L,k.p],null,null),(t()(),f._34(0,["chevron_left"])),(t()(),f._34(0,["\n    "])),(t()(),f._34(null,["\n\n    "])),(t()(),f._32(0,null,null,33,"section",[["fxFlex",""],["fxLayout","row"],["fxLayoutAlign","space-around center"]],null,null,null,null,null)),f._33(737280,null,0,v.a,[b.a,f.K,f.L],{layout:[0,"layout"]},null),f._33(737280,null,0,x.a,[b.a,f.K,f.L,[2,v.a]],{align:[0,"align"]},null),f._33(737280,null,0,M.a,[b.a,f.K,f.L,[3,v.a],[3,S.a]],{flex:[0,"flex"]},null),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,9,"div",[["flex",""],["fxLayout","column"],["fxLayoutAlign","center center"]],null,null,null,null,null)),f._33(737280,null,0,v.a,[b.a,f.K,f.L],{layout:[0,"layout"]},null),f._33(737280,null,0,x.a,[b.a,f.K,f.L,[2,v.a]],{align:[0,"align"]},null),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,1,"rpg-sprite",[["class","image"],["frame","7"]],null,null,null,m.a,m.b)),f._33(49152,null,0,_.a,[g.r,y.a],{frame:[0,"frame"],name:[1,"name"]},null),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,1,"span",[],null,null,null,null,null)),(t()(),f._34(null,["",""])),(t()(),f._34(null,["\n      "])),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,16,"div",[],null,null,null,null,null)),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,1,"div",[],null,null,null,null,null)),(t()(),f._34(null,["HP "," / ",""])),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,1,"div",[],null,null,null,null,null)),(t()(),f._34(null,["Attack : ",""])),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,1,"div",[],null,null,null,null,null)),(t()(),f._34(null,["Magic : ",""])),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,1,"div",[],null,null,null,null,null)),(t()(),f._34(null,["Defense : ",""])),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,1,"div",[],null,null,null,null,null)),(t()(),f._34(null,["Speed : ",""])),(t()(),f._34(null,["\n      "])),(t()(),f._34(null,["\n    "])),(t()(),f._34(null,["\n\n    "])),(t()(),f._32(0,null,null,9,"button",[["md-icon-button",""]],[[8,"disabled",0],[2,"mat-icon-button",null]],[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a.nextCharacter()!==!1;o=i&&o}return o},w.c,w.d)),f._33(16384,null,0,k.H,[[2,k.I]],null,null),f._33(180224,null,0,k.K,[f.K,f.L,k.r],null,null),f._33(16384,null,0,k._73,[],null,null),(t()(),f._34(0,["\n      "])),(t()(),f._32(0,null,0,3,"md-icon",[["role","img"]],[[2,"mat-icon",null]],null,null,w.g,w.h)),f._33(16384,null,0,k.H,[[2,k.I]],null,null),f._33(9027584,null,0,k.R,[f.K,f.L,k.p],null,null),(t()(),f._34(0,["chevron_right"])),(t()(),f._34(0,["\n    "])),(t()(),f._34(null,["\n  "])),(t()(),f._34(null,["\n\n\n  "])),(t()(),f._32(0,null,null,21,"ul",[["class","equipped"],["fxLayout","row"],["fxLayoutAlign","space-between center"]],null,null,null,null,null)),f._33(737280,null,0,v.a,[b.a,f.K,f.L],{layout:[0,"layout"]},null),f._33(737280,null,0,x.a,[b.a,f.K,f.L,[2,v.a]],{align:[0,"align"]},null),(t()(),f._34(null,["\n    "])),(t()(),f._39(16777216,null,null,1,null,o)),f._33(16384,null,0,C.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),(t()(),f._34(null,["\n    "])),(t()(),f._39(16777216,null,null,1,null,a)),f._33(16384,null,0,C.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),(t()(),f._34(null,["\n    "])),(t()(),f._39(16777216,null,null,1,null,i)),f._33(16384,null,0,C.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),(t()(),f._34(null,["\n    "])),(t()(),f._39(16777216,null,null,1,null,r)),f._33(16384,null,0,C.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),(t()(),f._34(null,["\n    "])),(t()(),f._39(16777216,null,null,1,null,l)),f._33(16384,null,0,C.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),(t()(),f._34(null,["\n    "])),(t()(),f._39(16777216,null,null,1,null,s)),f._33(16384,null,0,C.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),(t()(),f._34(null,["\n  "])),(t()(),f._34(null,["\n\n  "])),(t()(),f._32(0,null,null,12,"div",[["class","container"],["fxLayout","column"]],null,null,null,null,null)),f._33(737280,null,0,v.a,[b.a,f.K,f.L],{layout:[0,"layout"]},null),(t()(),f._34(null,["\n    "])),(t()(),f._32(0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),f._34(null,["Inventory"])),(t()(),f._34(null,["\n    "])),(t()(),f._32(0,null,null,5,"ul",[["class","unequipped"]],null,null,null,null,null)),(t()(),f._34(null,["\n      "])),(t()(),f._39(16777216,null,null,2,null,u)),f._33(802816,null,0,C.p,[f.P,f.Q,f.I],{ngForOf:[0,"ngForOf"]},null),f._36(131072,C.n,[f.X]),(t()(),f._34(null,["\n    "])),(t()(),f._34(null,["\n  "])),(t()(),f._34(null,["\n\n"]))],function(t,e){var n=e.component,o="column";t(e,1,0,o);var a="row";t(e,4,0,a);var i="space-between stretch";t(e,5,0,i),t(e,14,0);var r="row";t(e,19,0,r);var l="space-around center";t(e,20,0,l);var s="";t(e,21,0,s);var u="column";t(e,24,0,u);var c="center center";t(e,25,0,c);var p="7",d=e.context.$implicit.icon;t(e,28,0,p,d),t(e,60,0);var h="row";t(e,66,0,h);var m="space-between center";t(e,67,0,m);var _=e.context.$implicit.weapon;t(e,70,0,_);var g=e.context.$implicit.accessory;t(e,73,0,g);var y=e.context.$implicit.helm;t(e,76,0,y);var v=e.context.$implicit.armor;t(e,79,0,v);var b=e.context.$implicit.shield;t(e,82,0,b);var x=e.context.$implicit.boots;t(e,85,0,x);var w="column";t(e,89,0,w);var k=f._37(e,97,0,f._38(e,98).transform(n.inventory$));t(e,97,0,k)},function(t,e){var n=f._38(e,9).disabled,o=!0;t(e,7,0,n,o);var a=!0;t(e,12,0,a);var i=e.context.$implicit.name;t(e,31,0,i);var r=e.context.$implicit.hp,l=e.context.$implicit.maxhp;t(e,37,0,r,l);var s=e.context.$implicit.attack;t(e,40,0,s);var u=e.context.$implicit.magic;t(e,43,0,u);var c=e.context.$implicit.defense;t(e,46,0,c);var p=e.context.$implicit.speed;t(e,49,0,p);var d=f._38(e,55).disabled,h=!0;t(e,53,0,d,h);var m=!0;t(e,58,0,m)})}function p(t){return f._31(0,[(t()(),f._39(16777216,null,null,3,null,c)),f._33(802816,null,0,C.p,[f.P,f.Q,f.I],{ngForOf:[0,"ngForOf"]},null),f._36(131072,C.n,[f.X]),f._44(1),(t()(),f._34(null,["\n"]))],function(t,e){var n=e.component,o=t(e,3,0,f._37(e,1,0,f._38(e,2).transform(n.currentEntity$)));t(e,1,0,o)},null)}function d(t){return f._31(0,[(t()(),f._32(0,null,null,1,"party-inventory",[],null,null,null,p,A)),f._33(180224,null,0,O.a,[P.a,I.a,E.a],null,null)],null,null)}var h=n(451),f=n(1),m=n(98),_=n(60),g=n(24),y=n(47),v=n(59),b=n(20),x=n(140),w=n(286),k=n(97),M=n(200),S=n(141),C=n(8),O=n(208),P=n(26),I=n(16),E=n(11);n.d(e,"b",function(){return A}),e.a=p;var T=[h.a],A=f._30({encapsulation:0,styles:T,data:{}});f._35("party-inventory",O.a,d,{active:"active"},{},[])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["[_nghost-%COMP%], [_nghost-%COMP%]   ul[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:10px}[_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative;padding-top:36px;height:100px;width:64px}[_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{pointer-events:none}[_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;font-size:.9em;line-height:18px}[_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{left:0;right:0;margin:auto}[_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;height:64px;width:64px}[_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .compare[_ngcontent-%COMP%]{color:#0f0}[_nghost-%COMP%]   .unequipped[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   ul[_ngcontent-%COMP%], [_nghost-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:inline-block;list-style-type:none}[_nghost-%COMP%]   .character-equipment-map[_ngcontent-%COMP%]{padding:10px;margin:0;position:relative}[_nghost-%COMP%]   .character-equipment-map[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:inline-block;font-size:16px}"]},function(t,e,n){"use strict";function o(t){return f._31(0,[(t()(),f._32(0,null,null,38,"md-toolbar",[["class","mat-elevation-z4"],["color","primary"],["role","toolbar"]],[[24,"@toolbar",0],[2,"mat-toolbar",null]],null,null,m.a,m.b)),f._33(16384,null,0,_.H,[[2,_.I]],null,null),f._33(49152,null,0,_.J,[f.K,f.L],{color:[0,"color"]},null),(t()(),f._34(0,["\n  "])),(t()(),f._32(0,null,0,3,"h1",[["fxShow","false"],["fxShow.gt-sm",""]],null,null,null,null,null)),f._33(737280,null,0,g.a,[y.a,[8,null],f.K,f.L],{show:[0,"show"],showGtSm:[1,"showGtSm"]},null),(t()(),f._32(0,null,null,1,"a",[["href","https://github.com/justindujardin/angular-rpg"],["target","_blank"]],null,null,null,null,null)),(t()(),f._34(null,["RPG"])),(t()(),f._34(0,["\n  "])),(t()(),f._32(0,null,0,1,"rpg-sprite",[["name","longSword.png"]],null,null,null,v.a,v.b)),f._33(49152,null,0,b.a,[x.r,w.a],{width:[0,"width"],height:[1,"height"],name:[2,"name"]},null),(t()(),f._34(0,["\n  "])),(t()(),f._32(0,null,0,1,"span",[["fxFlex",""]],null,null,null,null,null)),f._33(737280,null,0,k.a,[y.a,f.K,f.L,[3,M.a],[3,S.a]],{flex:[0,"flex"]},null),(t()(),f._34(0,["\n  "])),(t()(),f._32(0,null,0,6,"button",[["md-button",""]],[[8,"disabled",0],[2,"mat-button",null]],[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=(a.page="party")!==!1;o=i&&o}return o},m.c,m.d)),f._33(278528,null,0,C.m,[f.I,f.J,f.K,f.L],{ngClass:[0,"ngClass"]},null),f._42(["active"]),f._33(16384,null,0,_.H,[[2,_.I]],null,null),f._33(180224,null,0,_.K,[f.K,f.L,_.r],null,null),f._33(16384,null,0,_.L,[],null,null),(t()(),f._34(0,["Party"])),(t()(),f._34(0,["\n  "])),(t()(),f._32(0,null,0,6,"button",[["md-button",""]],[[8,"disabled",0],[2,"mat-button",null]],[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=(a.page="inventory")!==!1;o=i&&o}return o},m.c,m.d)),f._33(278528,null,0,C.m,[f.I,f.J,f.K,f.L],{ngClass:[0,"ngClass"]},null),f._42(["active"]),f._33(16384,null,0,_.H,[[2,_.I]],null,null),f._33(180224,null,0,_.K,[f.K,f.L,_.r],null,null),f._33(16384,null,0,_.L,[],null,null),(t()(),f._34(0,["Inventory"])),(t()(),f._34(0,["\n  "])),(t()(),f._32(0,null,0,6,"button",[["md-button",""]],[[8,"disabled",0],[2,"mat-button",null]],[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=(a.page="settings")!==!1;o=i&&o}return o},m.c,m.d)),f._33(278528,null,0,C.m,[f.I,f.J,f.K,f.L],{ngClass:[0,"ngClass"]},null),f._42(["active"]),f._33(16384,null,0,_.H,[[2,_.I]],null,null),f._33(180224,null,0,_.K,[f.K,f.L,_.r],null,null),f._33(16384,null,0,_.L,[],null,null),(t()(),f._34(0,["Settings"])),(t()(),f._34(0,["\n"]))],function(t,e){var n=e.component,o="primary";t(e,2,0,o);var a="false",i="";t(e,5,0,a,i);var r=32,l=32,s="longSword.png";t(e,10,0,r,l,s);var u="";t(e,13,0,u);var c=t(e,17,0,"party"==n.page);t(e,16,0,c);var p=t(e,25,0,"inventory"==n.page);t(e,24,0,p);var d=t(e,33,0,"settings"==n.page);t(e,32,0,d)},function(t,e){var n=e.component,o=n.open,a=!0;t(e,0,0,o,a);var i=f._38(e,19).disabled,r=!0;t(e,15,0,i,r);var l=f._38(e,27).disabled,s=!0;t(e,23,0,l,s);var u=f._38(e,35).disabled,c=!0;t(e,31,0,u,c)})}function a(t){return f._31(0,[(t()(),f._32(0,null,null,1,"party-inventory",[],null,null,null,O.a,O.b)),f._33(180224,null,0,P.a,[I.a,E.a,T.a],null,null)],null,null)}function i(t){return f._31(0,[(t()(),f._32(0,null,null,4,"md-card-title",[],[[2,"mat-card-title",null]],null,null,null,null)),f._33(16384,null,0,_.H,[[2,_.I]],null,null),f._33(16384,null,0,_.M,[],null,null),(t()(),f._34(null,["Party Gold: ",""])),f._36(131072,C.n,[f.X])],null,function(t,e){var n=e.component,o=!0;t(e,0,0,o);var a=f._37(e,3,0,f._38(e,4).transform(n.partyGold$));t(e,3,0,a)})}function r(t){return f._31(0,[(t()(),f._32(0,null,null,1,"player-card",[],null,null,null,A.a,A.b)),f._33(49152,null,0,R.a,[I.a],{model:[0,"model"]},null)],function(t,e){var n=e.context.$implicit;t(e,1,0,n)},null)}function l(t){return f._31(0,[(t()(),f._32(0,null,null,10,"md-card-content",[["fxLayout","row"],["fxLayoutAlign","space-around center"],["fxLayoutWrap",""]],[[2,"mat-card-content",null]],null,null,null,null)),f._33(737280,null,0,M.a,[y.a,f.K,f.L],{layout:[0,"layout"]},null),f._33(737280,null,0,S.a,[y.a,f.K,f.L,[2,M.a]],{wrap:[0,"wrap"]},null),f._33(737280,null,0,F.a,[y.a,f.K,f.L,[2,M.a]],{align:[0,"align"]},null),f._33(16384,null,0,_.H,[[2,_.I]],null,null),f._33(16384,null,0,_.N,[],null,null),(t()(),f._34(null,["\n    "])),(t()(),f._39(16777216,null,null,2,null,r)),f._33(802816,null,0,C.p,[f.P,f.Q,f.I],{ngForOf:[0,"ngForOf"]},null),f._36(131072,C.n,[f.X]),(t()(),f._34(null,["\n  "]))],function(t,e){var n=e.component,o="row";t(e,1,0,o);var a="";t(e,2,0,a);var i="space-around center";t(e,3,0,i);var r=f._37(e,8,0,f._38(e,9).transform(n.party$));t(e,8,0,r)},function(t,e){var n=!0;t(e,0,0,n)})}function s(t){return f._31(0,[(t()(),f._32(0,null,null,3,"md-card-title",[],[[2,"mat-card-title",null]],null,null,null,null)),f._33(16384,null,0,_.H,[[2,_.I]],null,null),f._33(16384,null,0,_.M,[],null,null),(t()(),f._34(null,["Game Save"]))],null,function(t,e){var n=!0;t(e,0,0,n)})}function u(t){return f._31(0,[(t()(),f._32(0,null,null,15,"md-card-actions",[],[[2,"mat-card-actions",null]],null,null,null,null)),f._33(16384,null,0,_.H,[[2,_.I]],null,null),f._33(16384,null,0,_.O,[],null,null),(t()(),f._34(null,["\n    "])),(t()(),f._32(0,null,null,4,"button",[["color","warn"],["md-button",""]],[[8,"disabled",0],[2,"mat-button",null]],[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a.resetGame()!==!1;o=i&&o}return o},m.c,m.d)),f._33(16384,null,0,_.H,[[2,_.I]],null,null),f._33(180224,null,0,_.K,[f.K,f.L,_.r],{color:[0,"color"]},null),f._33(16384,null,0,_.L,[],null,null),(t()(),f._34(0,["Reset Game"])),(t()(),f._34(null,["\n    "])),(t()(),f._32(0,null,null,4,"button",[["md-button",""]],[[8,"disabled",0],[2,"mat-button",null]],[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a.saveGame()!==!1;o=i&&o}return o},m.c,m.d)),f._33(16384,null,0,_.H,[[2,_.I]],null,null),f._33(180224,null,0,_.K,[f.K,f.L,_.r],null,null),f._33(16384,null,0,_.L,[],null,null),(t()(),f._34(0,["Save Game"])),(t()(),f._34(null,["\n  "]))],function(t,e){var n="warn";t(e,6,0,n)},function(t,e){var n=!0;t(e,0,0,n);var o=f._38(e,6).disabled,a=!0;t(e,4,0,o,a);var i=f._38(e,12).disabled,r=!0;t(e,10,0,i,r)})}function c(t){return f._31(0,[(t()(),f._32(0,null,null,18,"md-card",[["class","mat-elevation-z3"]],[[24,"@card",0],[2,"mat-card",null]],null,null,m.e,m.f)),f._33(16384,null,0,_.H,[[2,_.I]],null,null),f._33(49152,null,0,_.P,[],null,null),(t()(),f._34(0,["\n  "])),(t()(),f._39(16777216,null,0,1,null,a)),f._33(16384,null,0,C.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),(t()(),f._34(0,["\n\n  "])),(t()(),f._39(16777216,null,0,1,null,i)),f._33(16384,null,0,C.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),(t()(),f._34(0,["\n  "])),(t()(),f._39(16777216,null,0,1,null,l)),f._33(16384,null,0,C.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),(t()(),f._34(0,["\n\n  "])),(t()(),f._39(16777216,null,0,1,null,s)),f._33(16384,null,0,C.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),(t()(),f._34(0,["\n  "])),(t()(),f._39(16777216,null,0,1,null,u)),f._33(16384,null,0,C.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),(t()(),f._34(0,["\n"]))],function(t,e){var n=e.component,o="inventory"==n.page;t(e,5,0,o);var a="party"==n.page;t(e,8,0,a);var i="party"==n.page;t(e,11,0,i);var r="settings"==n.page;t(e,14,0,r);var l="settings"==n.page;t(e,17,0,l)},function(t,e){var n=e.component,o=n.open,a=!0;t(e,0,0,o,a)})}function p(t){return f._31(0,[(t()(),f._39(16777216,null,null,1,null,o)),f._33(16384,null,0,C.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),(t()(),f._34(null,["\n\n"])),(t()(),f._39(16777216,null,null,1,null,c)),f._33(16384,null,0,C.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),(t()(),f._34(null,["\n"])),(t()(),f._32(0,null,null,9,"button",[["color","accent"],["md-fab",""]],[[24,"@fab",0],[8,"disabled",0],[2,"mat-fab",null]],[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=(a.open=!a.open)!=!1;o=i&&o}return o},m.c,m.d)),f._33(16384,null,0,_.H,[[2,_.I]],null,null),f._33(180224,null,0,_.K,[f.K,f.L,_.r],{color:[0,"color"]},null),f._33(16384,null,0,_.Q,[],null,null),(t()(),f._34(0,["\n  "])),(t()(),f._32(0,null,0,3,"md-icon",[["role","img"]],[[2,"mat-icon",null]],null,null,m.g,m.h)),f._33(16384,null,0,_.H,[[2,_.I]],null,null),f._33(9027584,null,0,_.R,[f.K,f.L,_.p],null,null),(t()(),f._34(0,["",""])),(t()(),f._34(0,["\n"])),(t()(),f._34(null,["\n"]))],function(t,e){var n=e.component,o=1==n.open;t(e,1,0,o);var a=1==n.open;t(e,4,0,a);var i="accent";t(e,8,0,i),t(e,13,0)},function(t,e){var n=e.component,o=n.open,a=f._38(e,8).disabled,i=!0;t(e,6,0,o,a,i);var r=!0;t(e,11,0,r);var l=n.open?"close":"menu";t(e,14,0,l)})}function d(t){return f._31(0,[(t()(),f._32(0,null,null,1,"party-menu",[],null,null,null,p,B)),f._33(49152,null,0,$.a,[I.a,E.a,L.a,T.a],null,null)],null,null)}var h=n(453),f=n(1),m=n(286),_=n(97),g=n(281),y=n(20),v=n(98),b=n(60),x=n(24),w=n(47),k=n(200),M=n(59),S=n(141),C=n(8),O=n(450),P=n(208),I=n(26),E=n(16),T=n(11),A=n(454),R=n(209),F=n(140),$=n(149),L=n(53);n.d(e,"b",function(){return B}),e.a=p;var D=[h.a],B=f._30({encapsulation:0,styles:D,data:{animation:[{name:"card",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{transform:"translateY(100%)"}},{type:4,styles:{type:6,styles:{transform:"translateY(0)"}},timings:"110ms"}]},{type:1,expr:":leave",animation:[{type:6,styles:{transform:"translateY(0)"}},{type:4,styles:{type:6,styles:{transform:"translateY(100%)"}},timings:"110ms"}]}]},{name:"toolbar",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{transform:"translateY(-100%)"}},{type:4,styles:{type:6,styles:{transform:"translateY(0)"}},timings:"110ms"}]},{type:1,expr:":leave",animation:[{type:6,styles:{transform:"translateY(0)"}},{type:4,styles:{type:6,styles:{transform:"translateY(-100%)"}},timings:"110ms"}]}]},{name:"fab",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{transform:"translateY(100%)"}},{type:4,styles:{type:6,styles:{transform:"translateY(0)"}},timings:"110ms"}]},{type:1,expr:":leave",animation:[{type:6,styles:{transform:"translateY(0)"}},{type:4,styles:{type:6,styles:{transform:"translateY(100%)"}},timings:"110ms"}]}]}]}});f._35("party-menu",$.a,d,{page:"page",open:"open"},{},[])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["[_nghost-%COMP%]{background-color:rgba(0,0,0,.54);color:#fff}[_nghost-%COMP%]   [_ngcontent-%COMP%]:not(md-icon):not([md-icon-button]):not([md-fab]){font-family:GraphicPixel,AdvoCut,sans-serif;text-shadow:1px 1px 0 #000,-2px 0 #000,0 0 #000,-1px 1px 0 #000}[_nghost-%COMP%]   md-toolbar[_ngcontent-%COMP%]{position:fixed;border-bottom:6px solid #fff}[_nghost-%COMP%]   md-toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{line-height:28px;height:32px;margin:0}[_nghost-%COMP%]   md-toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}[_nghost-%COMP%]   md-toolbar[_ngcontent-%COMP%]   rpg-sprite[_ngcontent-%COMP%]{height:32px;margin-left:6px}[_nghost-%COMP%]   md-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:20px}[_nghost-%COMP%]   md-toolbar[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#e6c828}[_nghost-%COMP%]   button[md-fab][_ngcontent-%COMP%]{position:fixed;bottom:12px;right:12px}[_nghost-%COMP%]   md-card[_ngcontent-%COMP%]{background-color:#004c62;color:#fff;border:6px solid #fff;border-radius:9px;text-shadow:2px 2px 0 rgba(0,0,0,.7);padding-top:16px;padding-bottom:16px;position:fixed;margin:auto;right:24px;bottom:-12px;top:88px;padding-bottom:36px;left:24px;max-width:600px;overflow-y:auto}"]},function(t,e,n){"use strict";function o(t){return r._31(0,[(t()(),r._32(0,null,null,34,"section",[["class","hero-card"],["fxLayout","column"],["fxLayoutAlign","space-between center"]],[[8,"className",0]],null,null,null,null)),r._33(737280,null,0,l.a,[s.a,r.K,r.L],{layout:[0,"layout"]},null),r._33(737280,null,0,u.a,[s.a,r.K,r.L,[2,l.a]],{align:[0,"align"]},null),(t()(),r._34(null,["\n  "])),(t()(),r._32(0,null,null,0,"h3",[["class","name"]],[[8,"innerText",0]],null,null,null,null)),(t()(),r._34(null,["\n  "])),(t()(),r._32(0,null,null,1,"rpg-sprite",[["class","image"],["frame","7"],["height","72"],["width","64"]],null,null,null,c.a,c.b)),r._33(49152,null,0,p.a,[d.r,h.a],{width:[0,"width"],height:[1,"height"],frame:[2,"frame"],name:[3,"name"]},null),(t()(),r._34(null,["\n  "])),(t()(),r._32(0,null,null,1,"div",[],null,null,null,null,null)),(t()(),r._34(null,["Level ",""])),(t()(),r._34(null,["\n  "])),(t()(),r._32(0,null,null,1,"div",[],null,null,null,null,null)),(t()(),
r._34(null,["HP "," / ",""])),(t()(),r._34(null,["\n  "])),(t()(),r._32(0,null,null,1,"rpg-health-bar",[],null,null,null,f.a,f.b)),r._33(49152,null,0,m.a,[],{model:[0,"model"]},null),(t()(),r._34(null,["\n  "])),(t()(),r._32(0,null,null,1,"div",[],null,null,null,null,null)),(t()(),r._34(null,["EXP "," / ",""])),(t()(),r._34(null,["\n\n  "])),(t()(),r._32(0,null,null,0,"div",[],[[8,"innerText",0]],null,null,null,null)),(t()(),r._34(null,["\n  "])),(t()(),r._32(0,null,null,1,"div",[["class","hero-stat"]],null,null,null,null,null)),(t()(),r._34(null,["Attack : ",""])),(t()(),r._34(null,["\n  "])),(t()(),r._32(0,null,null,1,"div",[["class","hero-stat"]],null,null,null,null,null)),(t()(),r._34(null,["Speed : ",""])),(t()(),r._34(null,["\n  "])),(t()(),r._32(0,null,null,1,"div",[["class","hero-stat"]],null,null,null,null,null)),(t()(),r._34(null,["Defense : ",""])),(t()(),r._34(null,["\n  "])),(t()(),r._32(0,null,null,1,"div",[["class","hero-stat"]],null,null,null,null,null)),(t()(),r._34(null,["Magic : ",""])),(t()(),r._34(null,["\n"])),(t()(),r._34(null,["\n"]))],function(t,e){var n=e.component,o="column";t(e,1,0,o);var a="space-between center";t(e,2,0,a);var i="64",r="72",l="7",s=n.model.icon;t(e,7,0,i,r,l,s);var u=n.model;t(e,16,0,u)},function(t,e){var n=e.component,o=n.getPlayerCSSClassMap();t(e,0,0,o);var a=n.model.name;t(e,4,0,a);var i=n.model.level;t(e,10,0,i);var r=n.model.hp,l=n.model.maxhp;t(e,13,0,r,l);var s=n.model.exp,u=n.model.nextLevelExp||1;t(e,19,0,s,u);var c=n.getCSSProgressWidth();t(e,21,0,c);var p=n.model.attack;t(e,24,0,p);var d=n.model.speed;t(e,27,0,d);var h=n.model.defense;t(e,30,0,h);var f=n.model.magic;t(e,33,0,f)})}function a(t){return r._31(0,[(t()(),r._32(0,null,null,1,"player-card",[],null,null,null,o,v)),r._33(49152,null,0,_.a,[g.a],null,null)],null,null)}var i=n(455),r=n(1),l=n(59),s=n(20),u=n(140),c=n(98),p=n(60),d=n(24),h=n(47),f=n(204),m=n(99),_=n(209),g=n(26);n.d(e,"b",function(){return v}),e.a=o;var y=[i.a],v=r._30({encapsulation:0,styles:y,data:{}});r._35("player-card",_.a,a,{model:"model"},{},[])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["[_nghost-%COMP%]   .hero-card[_ngcontent-%COMP%]{padding:0 15px}[_nghost-%COMP%]   .hero-card.dead[_ngcontent-%COMP%]{color:#aaa}[_nghost-%COMP%]   .hero-card[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-bottom:5px;margin-top:5px}[_nghost-%COMP%]   .hero-card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], [_nghost-%COMP%]   .hero-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:5px;text-align:center}[_nghost-%COMP%]   .hero-card[_ngcontent-%COMP%]   health-bar[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .hero-card[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{border-radius:0;margin-bottom:5px;height:10px}[_nghost-%COMP%]   .hero-card[_ngcontent-%COMP%]   .hero-stat[_ngcontent-%COMP%]{text-align:right}[_nghost-%COMP%]   .hero-card[_ngcontent-%COMP%]   .hero-stat[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{float:left}"]},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["rpg-sprite[_ngcontent-%COMP%]{font-size:0}"]},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"combat-camera-behavior",[],null,null,null,o,s)),i._33(49152,null,0,r.a,[],null,null)],null,null)}var i=n(1),r=n(218);n.d(e,"b",function(){return s}),e.a=o;var l=[],s=i._30({encapsulation:2,styles:l,data:{}});i._35("combat-camera-behavior",r.a,a,{},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"combat-player-render-behavior",[],null,null,null,o,u)),i._33(49152,null,0,r.a,[l.a],null,null)],null,null)}var i=n(1),r=n(153),l=n(25);n.d(e,"b",function(){return u}),e.a=o;var s=[],u=i._30({encapsulation:2,styles:s,data:{}});i._35("combat-player-render-behavior",r.a,a,{},{},["*"])},function(t,e,n){"use strict";function o(t){return r._31(0,[r._40(402653184,1,{damageValue:0}),(t()(),r._34(null,["\n    "])),(t()(),r._32(0,[[1,0],["damageValue",1]],null,2,"span",[["class","damage-value"]],[[8,"innerText",0],[4,"top",null],[4,"left",null]],null,null,null,null)),r._33(278528,null,0,l.m,[r.I,r.J,r.K,r.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),r._34(null,["\n    "])),(t()(),r._34(null,["\n  "]))],function(t,e){var n=e.component,o="damage-value",a=n.classes;t(e,3,0,o,a)},function(t,e){var n=e.component,o=n.value,a=(null==n.position?null:n.position.y)+"px",i=(null==n.position?null:n.position.x)+"px";t(e,2,0,o,a,i)})}function a(t){return r._31(0,[(t()(),r._32(0,null,null,1,"combat-damage",[],null,null,null,o,p)),r._33(4243456,null,0,s.a,[u.a],null,null)],null,null)}var i=n(460),r=n(1),l=n(8),s=n(154),u=n(105);n.d(e,"b",function(){return p}),e.a=o;var c=[i.a],p=r._30({encapsulation:0,styles:c,data:{}});r._35("combat-damage",s.a,a,{classes:"classes",value:"value",position:"position"},{},[])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .damage-value[_ngcontent-%COMP%]{background:none;pointer-events:none;position:absolute;opacity:0;z-index:20;font-family:GraphicPixel,sans-serif;font-size:3em;color:red;transition:opacity 1s ease-out,transform 1s cubic-bezier(.19,1,.22,1);transform:translateY(0);text-shadow:2px 2px 0 hsla(0,0%,100%,.9),-4px 0 hsla(0,0%,100%,.9),0 0 hsla(0,0%,100%,.9),-2px 2px 0 hsla(0,0%,100%,.9)}[_nghost-%COMP%]   .damage-value.miss[_ngcontent-%COMP%]{color:#ccc}[_nghost-%COMP%]   .damage-value.heal[_ngcontent-%COMP%], [_nghost-%COMP%]   .damage-value.miss[_ngcontent-%COMP%]{text-shadow:1px 1px 0 #222,-2px 0 #222,0 0 #222,-1px 1px 0 #222}[_nghost-%COMP%]   .damage-value.heal[_ngcontent-%COMP%]{color:#0e0}[_nghost-%COMP%]   .damage-value.active[_ngcontent-%COMP%]{opacity:1;transform:translateY(-25%)}[_nghost-%COMP%]   .damage-value.remove[_ngcontent-%COMP%]{display:none}"]},function(t,e,n){"use strict";function o(t){return i._31(0,[i._40(402653184,1,{attack:0}),i._40(402653184,2,{render:0}),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,2,"sprite-render-behavior",[],null,null,null,r.a,r.b)),i._33(4374528,[[2,4]],0,l.a,[s.a],{icon:[0,"icon"]},null),i._36(131072,u.n,[i.X]),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"combat-attack-behavior",[],null,null,null,c.a,c.b)),i._33(49152,[[1,4],["attack",4]],0,p.a,[d.a,h.a,s.a],{combat:[0,"combat"]},null),(t()(),i._34(null,["\n    "])),i._41(null,0),(t()(),i._34(null,["\n  "]))],function(t,e){var n=e.component,o=null,a=null==(o=i._37(e,4,0,i._38(e,5).transform(n.model$)))?null:o.icon;t(e,4,0,a);var r=n.combat;t(e,8,0,r)},null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"combat-enemy",[],null,null,null,o,g)),i._33(4374528,null,0,f.b,[m.a],null,null)],null,null)}var i=n(1),r=n(445),l=n(145),s=n(15),u=n(8),c=n(287),p=n(101),d=n(16),h=n(25),f=n(155),m=n(39);n.d(e,"b",function(){return g}),e.a=o;var _=[],g=i._30({encapsulation:2,styles:_,data:{}});i._35("combat-enemy",f.b,a,{icon:"icon",model:"model"},{},["*"])},function(t,e,n){"use strict";function o(t){return l._31(0,[(t()(),l._32(0,null,null,15,"div",[["class","status"]],null,null,null,null,null)),l._33(278528,null,0,s.m,[l.I,l.J,l.K,l.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),l._34(null,["\n  "])),(t()(),l._32(0,null,null,2,"rpg-health-bar",[],null,null,null,u.a,u.b)),l._33(49152,null,0,c.a,[],{model:[0,"model"]},null),(t()(),l._34(0,["\n  "])),(t()(),l._34(null,["\n  "])),(t()(),l._32(0,null,null,7,"div",[["class","text"]],null,null,null,null,null)),(t()(),l._34(null,["\n    "])),(t()(),l._32(0,null,null,1,"span",[["class","name"]],null,null,null,null,null)),(t()(),l._34(null,["",""])),(t()(),l._34(null,["\n    "])),(t()(),l._32(0,null,null,1,"span",[["class","hp"]],null,null,null,null,null)),(t()(),l._34(null,["HP "," / ",""])),(t()(),l._34(null,["\n  "])),(t()(),l._34(null,["\n"]))],function(t,e){var n=e.component,o="status",a=n.getMemberClass(e.context.$implicit,null==n.combat?null:n.combat.focus);t(e,1,0,o,a);var i=e.context.$implicit;t(e,4,0,i)},function(t,e){var n=e.context.$implicit.name;t(e,10,0,n);var o=e.context.$implicit.hp,a=e.context.$implicit.maxhp;t(e,13,0,o,a)})}function a(t){return l._31(2,[(t()(),l._39(16777216,null,null,2,null,o)),l._33(802816,null,0,s.p,[l.P,l.Q,l.I],{ngForOf:[0,"ngForOf"]},null),l._36(131072,s.n,[l.X]),(t()(),l._34(null,["\n"]))],function(t,e){var n=e.component,o=l._37(e,1,0,l._38(e,2).transform(n.party$));t(e,1,0,o)},null)}function i(t){return l._31(0,[(t()(),l._32(0,null,null,1,"combat-hud",[],null,null,null,a,_)),l._33(49152,null,0,p.a,[d.a,h.a,f.a],null,null)],null,null)}var r=n(463),l=n(1),s=n(8),u=n(204),c=n(99),p=n(219),d=n(16),h=n(21),f=n(27);n.d(e,"b",function(){return _}),e.a=a;var m=[r.a],_=l._30({encapsulation:0,styles:m,data:{}});l._35("combat-hud",p.a,i,{scene:"scene"},{},[])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=['[data-icon][_ngcontent-%COMP%]:before{content:attr(data-icon)}[class*=" pow2-"][_ngcontent-%COMP%]:before, [class^=pow2-][_ngcontent-%COMP%]:before, [data-icon][_ngcontent-%COMP%]:before{font-family:pow2!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;speak:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.pow2-aura[_ngcontent-%COMP%]:before{content:"a"}.pow2-back-forth[_ngcontent-%COMP%]:before{content:"b"}.pow2-barbute[_ngcontent-%COMP%]:before{content:"c"}.pow2-barefoot[_ngcontent-%COMP%]:before{content:"d"}.pow2-battle-gear[_ngcontent-%COMP%]:before{content:"e"}.pow2-black-flag[_ngcontent-%COMP%]:before{content:"f"}.pow2-bolt-shield[_ngcontent-%COMP%]:before{content:"g"}.pow2-bone-knife[_ngcontent-%COMP%]:before{content:"h"}.pow2-bookmark[_ngcontent-%COMP%]:before{content:"i"}.pow2-bookmarklet[_ngcontent-%COMP%]:before{content:"j"}.pow2-boot-prints[_ngcontent-%COMP%]:before{content:"k"}.pow2-boots[_ngcontent-%COMP%]:before{content:"l"}.pow2-bottle-vapors[_ngcontent-%COMP%]:before{content:"m"}.pow2-breastplate[_ngcontent-%COMP%]:before{content:"n"}.pow2-broadsword[_ngcontent-%COMP%]:before{content:"o"}.pow2-bubbling-flask[_ngcontent-%COMP%]:before{content:"p"}.pow2-burning-dot[_ngcontent-%COMP%]:before{content:"q"}.pow2-cash[_ngcontent-%COMP%]:before{content:"r"}.pow2-castle[_ngcontent-%COMP%]:before{content:"s"}.pow2-checked-shield[_ngcontent-%COMP%]:before{content:"t"}.pow2-cheese-wedge[_ngcontent-%COMP%]:before{content:"u"}.pow2-chemical-drop[_ngcontent-%COMP%]:before{content:"v"}.pow2-chicken-leg[_ngcontent-%COMP%]:before{content:"w"}.pow2-cog[_ngcontent-%COMP%]:before{content:"x"}.pow2-conversation[_ngcontent-%COMP%]:before{content:"y"}.pow2-death-note[_ngcontent-%COMP%]:before{content:"z"}.pow2-drink-me[_ngcontent-%COMP%]:before{content:"A"}.pow2-emerald[_ngcontent-%COMP%]:before{content:"B"}.pow2-envelope[_ngcontent-%COMP%]:before{content:"C"}.pow2-ice-bolt[_ngcontent-%COMP%]:before{content:"D"}.pow2-list[_ngcontent-%COMP%]:before{content:"E"}.pow2-social-github[_ngcontent-%COMP%]:before{content:"F"}.pow2-tablet-landscape[_ngcontent-%COMP%]:before{content:"G"}.pow2-tablet-portrait[_ngcontent-%COMP%]:before{content:"H"}.pow2-comment[_ngcontent-%COMP%]:before{content:"I"}.pow2-arrow-right[_ngcontent-%COMP%]:before{content:"J"}[_nghost-%COMP%]{font-family:GraphicPixel,AdvoCut,sans-serif;position:fixed;bottom:0;left:0;right:0;background-color:rgba(0,0,0,.8);font-size:20px;margin-left:auto;margin-right:auto;width:100%;z-index:20;display:block}[_nghost-%COMP%]   .progress[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   .status[_ngcontent-%COMP%]{border-radius:0;text-align:right;color:#fff;position:relative;min-height:32px}@media (min-width:600px){[_nghost-%COMP%]   .status[_ngcontent-%COMP%]{min-height:64px}}[_nghost-%COMP%]   .status[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%], [_nghost-%COMP%]   .status[_ngcontent-%COMP%]   rpg-health-bar[_ngcontent-%COMP%]{height:100%;position:absolute;top:0;bottom:0;left:0;right:0}[_nghost-%COMP%]   .status[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{padding:0 15px;z-index:70}[_nghost-%COMP%]   .status.focused[_ngcontent-%COMP%]{color:#e8c627}[_nghost-%COMP%]   .status.choosing[_ngcontent-%COMP%]{background-color:#004c62}[_nghost-%COMP%]   .status[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{float:left;text-align:left;width:25%}[_nghost-%COMP%]   .status[_ngcontent-%COMP%]   .hp[_ngcontent-%COMP%], [_nghost-%COMP%]   .status[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-shadow:1px 1px 0 #000,-2px 0 #000,0 0 #000,-1px 1px 0 #000}[_nghost-%COMP%]   .status[_ngcontent-%COMP%]   .hp[_ngcontent-%COMP%]{text-align:right}[_nghost-%COMP%]   .status[_ngcontent-%COMP%]   rpg-health-bar[_ngcontent-%COMP%]{opacity:.5;min-width:25%}@media (min-width:600px){[_nghost-%COMP%]   .status[_ngcontent-%COMP%]{font-size:2.2em}}']},function(t,e,n){"use strict";function o(t){return l._31(0,[(t()(),l._32(0,null,null,1,"combat-player",[],null,null,null,s.a,s.b)),l._33(4374528,[[2,4]],0,u.b,[c.a],{model:[0,"model"],icon:[1,"icon"]},null)],function(t,e){var n=e.context.$implicit,o=e.context.$implicit.icon;t(e,1,0,n,o)},null)}function a(t){return l._31(0,[(t()(),l._32(0,null,null,1,"combat-enemy",[],null,null,null,p.a,p.b)),l._33(4374528,[[3,4]],0,d.b,[c.a],{icon:[0,"icon"],model:[1,"model"]},null)],function(t,e){var n=e.context.$implicit.icon,o=e.context.$implicit;t(e,1,0,n,o)},null)}function i(t){return l._31(2,[l._40(402653184,1,{camera:0}),l._40(671088640,2,{party:1}),l._40(671088640,3,{enemies:1}),(t()(),l._32(0,null,null,1,"combat-camera-behavior",[],null,null,null,h.a,h.b)),l._33(49152,[[1,4]],0,f.a,[],null,null),(t()(),l._34(null,["\n"])),(t()(),l._39(16777216,null,null,2,null,o)),l._33(802816,null,0,m.p,[l.P,l.Q,l.I],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),l._36(131072,m.n,[l.X]),(t()(),l._34(null,["\n"])),(t()(),l._39(16777216,null,null,2,null,a)),l._33(802816,null,0,m.p,[l.P,l.Q,l.I],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),l._36(131072,m.n,[l.X]),(t()(),l._34(null,["\n"])),l._41(null,0),(t()(),l._34(null,["\n"]))],function(t,e){var n=e.component,o=l._37(e,7,0,l._38(e,8).transform(n.party$)),a=n.combatTrackBy;t(e,7,0,o,a);var i=l._37(e,11,0,l._38(e,12).transform(n.enemies$)),r=n.combatTrackBy;t(e,11,0,i,r)},null)}function r(t){return l._31(0,[(t()(),l._32(0,null,null,1,"combat-map",[],null,null,null,i,w)),l._33(4374528,null,0,_.b,[g.a,y.a,v.a,b.a],null,null)],null,null)}var l=n(1),s=n(465),u=n(157),c=n(39),p=n(461),d=n(155),h=n(457),f=n(218),m=n(8),_=n(156),g=n(25),y=n(16),v=n(21),b=n(27);n.d(e,"b",function(){return w}),e.a=i;var x=[],w=l._30({encapsulation:2,styles:x,data:{}});l._35("combat-map",_.b,r,{scene:"scene"},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[i._40(671088640,1,{behaviors:1}),i._40(402653184,2,{render:0}),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"combat-player-render-behavior",[],null,null,null,r.a,r.b)),i._33(49152,[[2,4],[1,4],["render",4]],0,l.a,[s.a],null,null),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"animated-behavior",[],null,null,null,u.a,u.b)),i._33(49152,[[1,4],["animation",4]],0,c.a,[],null,null),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"combat-attack-behavior",[],null,null,null,p.a,p.b)),i._33(49152,[[1,4],["attack",4]],0,d.a,[h.a,s.a,f.a],{combat:[0,"combat"]},null),(t()(),i._34(null,["\n    "])),(t()(),i._34(null,["\n    "])),(t()(),i._34(null,["\n    "])),(t()(),i._34(null,["\n    "])),(t()(),i._34(null,["\n    "])),i._41(null,0),(t()(),i._34(null,["\n  "]))],function(t,e){var n=e.component,o=n.combat;t(e,10,0,o)},null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"combat-player",[],null,null,null,o,y)),i._33(4374528,null,0,m.b,[_.a],null,null)],null,null)}var i=n(1),r=n(458),l=n(153),s=n(25),u=n(443),c=n(110),p=n(287),d=n(101),h=n(16),f=n(15),m=n(157),_=n(39);n.d(e,"b",function(){return y}),e.a=o;var g=[],y=i._30({encapsulation:2,styles:g,data:{}});i._35("combat-player",m.b,a,{model:"model",icon:"icon"},{},["*"])},function(t,e,n){"use strict";function o(t){return l._31(0,[(t()(),l._32(0,null,null,1,"combat-damage",[],null,null,null,s.a,s.b)),l._33(4243456,null,0,u.a,[c.a],{classes:[0,"classes"],value:[1,"value"],position:[2,"position"]},null)],function(t,e){var n=e.context.$implicit.classes,o=e.context.$implicit.value,a=e.context.$implicit.position;t(e,1,0,n,o,a)},null)}function a(t){return l._31(0,[l._40(402653184,1,{machine:0}),l._40(402653184,2,{canvasElementRef:0}),l._40(402653184,3,{map:0}),(t()(),l._32(0,[[2,0],["combatCanvas",1]],null,1,"canvas",[],null,null,null,null,null)),(t()(),l._34(null,["\n  Your browser doesn't support this.\n"])),(t()(),l._34(null,["\n\n"])),(t()(),l._39(16777216,null,null,1,null,o)),l._33(802816,null,0,p.p,[l.P,l.Q,l.I],{ngForOf:[0,"ngForOf"]},null),(t()(),l._34(null,["\n\n"])),(t()(),l._32(0,null,null,6,"combat-map",[],null,null,null,d.a,d.b)),l._33(4374528,[[3,4],["map",4]],0,h.b,[f.a,m.a,_.a,g.a],{scene:[0,"scene"]},null),(t()(),l._34(0,["\n  "])),(t()(),l._32(0,null,0,2,"combat-state-machine",[],null,null,null,y.a,y.b)),l._33(4243456,[[1,4]],0,v.a,[f.a],{scene:[0,"scene"],encounter:[1,"encounter"],party:[2,"party"],enemies:[3,"enemies"]},null),l._36(131072,p.n,[l.X]),(t()(),l._34(0,["\n\n"])),(t()(),l._34(null,["\n"])),(t()(),l._32(0,null,null,1,"combat-hud",[],null,null,null,b.a,b.b)),l._33(49152,null,0,x.a,[m.a,_.a,g.a],{scene:[0,"scene"]},null),(t()(),l._34(null,["\n"]))],function(t,e){var n=e.component,o=n.damages;t(e,7,0,o);var a=n.scene;t(e,10,0,a);var i=n.scene,r=l._37(e,13,1,l._38(e,14).transform(l._38(e,10).encounter$)),s=l._38(e,10).party,u=l._38(e,10).enemies;t(e,13,0,i,r,s,u);var c=n.scene;t(e,18,0,c)},null)}function i(t){return l._31(0,[(t()(),l._32(0,null,null,1,"rpg-combat",[],null,[["window","resize"],[null,"click"]],function(t,e,n){var o=!0;if("window:resize"===e){var a=l._38(t,1)._onResize(n)!==!1;o=a&&o}if("click"===e){var i=l._38(t,1)._onClick(n)!==!1;o=i&&o}return o},a,O)),l._33(4374528,null,0,w.a,[k.a,M.a,_.a,m.a,S.a],null,null)],null,null)}var r=n(467),l=n(1),s=n(459),u=n(154),c=n(105),p=n(8),d=n(464),h=n(156),f=n(25),m=n(16),_=n(21),g=n(27),y=n(476),v=n(117),b=n(462),x=n(219),w=n(39),k=n(26),M=n(11),S=n(15);n.d(e,"a",function(){return P});var C=[r.a],O=l._30({encapsulation:0,styles:C,data:{}}),P=l._35("rpg-combat",w.a,i,{scene:"scene",items:"items",damages:"damages"},{},[])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=['[data-icon][_ngcontent-%COMP%]:before{content:attr(data-icon)}[class*=" pow2-"][_ngcontent-%COMP%]:before, [class^=pow2-][_ngcontent-%COMP%]:before, [data-icon][_ngcontent-%COMP%]:before{font-family:pow2!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;speak:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.pow2-aura[_ngcontent-%COMP%]:before{content:"a"}.pow2-back-forth[_ngcontent-%COMP%]:before{content:"b"}.pow2-barbute[_ngcontent-%COMP%]:before{content:"c"}.pow2-barefoot[_ngcontent-%COMP%]:before{content:"d"}.pow2-battle-gear[_ngcontent-%COMP%]:before{content:"e"}.pow2-black-flag[_ngcontent-%COMP%]:before{content:"f"}.pow2-bolt-shield[_ngcontent-%COMP%]:before{content:"g"}.pow2-bone-knife[_ngcontent-%COMP%]:before{content:"h"}.pow2-bookmark[_ngcontent-%COMP%]:before{content:"i"}.pow2-bookmarklet[_ngcontent-%COMP%]:before{content:"j"}.pow2-boot-prints[_ngcontent-%COMP%]:before{content:"k"}.pow2-boots[_ngcontent-%COMP%]:before{content:"l"}.pow2-bottle-vapors[_ngcontent-%COMP%]:before{content:"m"}.pow2-breastplate[_ngcontent-%COMP%]:before{content:"n"}.pow2-broadsword[_ngcontent-%COMP%]:before{content:"o"}.pow2-bubbling-flask[_ngcontent-%COMP%]:before{content:"p"}.pow2-burning-dot[_ngcontent-%COMP%]:before{content:"q"}.pow2-cash[_ngcontent-%COMP%]:before{content:"r"}.pow2-castle[_ngcontent-%COMP%]:before{content:"s"}.pow2-checked-shield[_ngcontent-%COMP%]:before{content:"t"}.pow2-cheese-wedge[_ngcontent-%COMP%]:before{content:"u"}.pow2-chemical-drop[_ngcontent-%COMP%]:before{content:"v"}.pow2-chicken-leg[_ngcontent-%COMP%]:before{content:"w"}.pow2-cog[_ngcontent-%COMP%]:before{content:"x"}.pow2-conversation[_ngcontent-%COMP%]:before{content:"y"}.pow2-death-note[_ngcontent-%COMP%]:before{content:"z"}.pow2-drink-me[_ngcontent-%COMP%]:before{content:"A"}.pow2-emerald[_ngcontent-%COMP%]:before{content:"B"}.pow2-envelope[_ngcontent-%COMP%]:before{content:"C"}.pow2-ice-bolt[_ngcontent-%COMP%]:before{content:"D"}.pow2-list[_ngcontent-%COMP%]:before{content:"E"}.pow2-social-github[_ngcontent-%COMP%]:before{content:"F"}.pow2-tablet-landscape[_ngcontent-%COMP%]:before{content:"G"}.pow2-tablet-portrait[_ngcontent-%COMP%]:before{content:"H"}.pow2-comment[_ngcontent-%COMP%]:before{content:"I"}.pow2-arrow-right[_ngcontent-%COMP%]:before{content:"J"}[_nghost-%COMP%]   *[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%]   rpg-health-bar[_ngcontent-%COMP%]{width:100%;display:-webkit-inline-flex;display:-moz-inline-flex;display:inline-flex}']},function(t,e,n){"use strict";function o(t){return i._31(0,[(t()(),i._34(null,["\n    "])),i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"combat-begin-turn-state",[],null,null,null,o,u)),i._33(49152,null,0,r.a,[l.a],null,null)],null,null)}var i=n(1),r=n(102),l=n(25);n.d(e,"b",function(){return u}),e.a=o;var s=[],u=i._30({encapsulation:2,styles:s,data:{}});i._35("combat-begin-turn-state",r.a,a,{},{},["*"])},function(t,e,n){"use strict";function o(t){return s._31(0,[(t()(),s._32(0,null,null,0,"li",[],[[8,"innerText",0]],[[null,"click"]],function(t,e,n){var o=!0;if("click"===e){var a=t.context.$implicit.select()!==!1;o=a&&o}return o},null,null))],null,function(t,e){var n=e.context.$implicit.label;t(e,0,0,n)})}function a(t){return s._31(0,[(t()(),s._32(0,null,null,4,"ul",[["class","ebp action-menu"]],null,null,null,null,null)),(t()(),s._34(null,["\n  "])),(t()(),s._39(16777216,null,null,1,null,o)),s._33(802816,null,0,u.p,[s.P,s.Q,s.I],{ngForOf:[0,"ngForOf"]},null),(t()(),s._34(null,["\n"]))],function(t,e){var n=e.component,o=n.items;t(e,3,0,o)},null)}function i(t){return s._31(0,[s._40(402653184,1,{pointerElementRef:0}),(t()(),s._39(16777216,null,null,1,null,a)),s._33(16384,null,0,u.o,[s.P,s.Q],{ngIf:[0,"ngIf"]},null),(t()(),s._34(null,["\n"])),(t()(),s._32(0,[[1,0],["combatPointer",1]],null,2,"span",[["class","point-to-player"]],[[2,"hidden",null],[4,"left",null],[4,"top",null]],null,null,null,null)),s._36(131072,u.n,[s.X]),s._36(131072,u.n,[s.X]),(t()(),s._34(null,["\n"])),s._41(null,0)],function(t,e){var n=e.component,o=n.items.length>0;t(e,2,0,o)},function(t,e){var n=e.component,o=!n.pointAt,a=null,i=(null==(a=s._37(e,4,1,s._38(e,5).transform(n.pointerPosition$)))?null:a.x)+"px",r=null,l=(null==(r=s._37(e,4,2,s._38(e,6).transform(n.pointerPosition$)))?null:r.y)+"px";t(e,4,0,o,i,l)})}function r(t){return s._31(0,[(t()(),s._32(0,null,null,1,"combat-choose-action-state",[],null,null,null,i,h)),s._33(4374528,null,0,c.a,[s.L,p.a],null,null)],null,null)}var l=n(470),s=n(1),u=n(8),c=n(103),p=n(39);n.d(e,"b",function(){return h}),e.a=i;var d=[l.a],h=s._30({encapsulation:0,styles:d,data:{}});s._35("combat-choose-action-state",c.a,r,{items:"items",pointAt:"pointAt"},{},["*"])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=['[data-icon][_ngcontent-%COMP%]:before{content:attr(data-icon)}[class*=" pow2-"][_ngcontent-%COMP%]:before, [class^=pow2-][_ngcontent-%COMP%]:before, [data-icon][_ngcontent-%COMP%]:before{font-family:pow2!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;speak:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.pow2-aura[_ngcontent-%COMP%]:before{content:"a"}.pow2-back-forth[_ngcontent-%COMP%]:before{content:"b"}.pow2-barbute[_ngcontent-%COMP%]:before{content:"c"}.pow2-barefoot[_ngcontent-%COMP%]:before{content:"d"}.pow2-battle-gear[_ngcontent-%COMP%]:before{content:"e"}.pow2-black-flag[_ngcontent-%COMP%]:before{content:"f"}.pow2-bolt-shield[_ngcontent-%COMP%]:before{content:"g"}.pow2-bone-knife[_ngcontent-%COMP%]:before{content:"h"}.pow2-bookmark[_ngcontent-%COMP%]:before{content:"i"}.pow2-bookmarklet[_ngcontent-%COMP%]:before{content:"j"}.pow2-boot-prints[_ngcontent-%COMP%]:before{content:"k"}.pow2-boots[_ngcontent-%COMP%]:before{content:"l"}.pow2-bottle-vapors[_ngcontent-%COMP%]:before{content:"m"}.pow2-breastplate[_ngcontent-%COMP%]:before{content:"n"}.pow2-broadsword[_ngcontent-%COMP%]:before{content:"o"}.pow2-bubbling-flask[_ngcontent-%COMP%]:before{content:"p"}.pow2-burning-dot[_ngcontent-%COMP%]:before{content:"q"}.pow2-cash[_ngcontent-%COMP%]:before{content:"r"}.pow2-castle[_ngcontent-%COMP%]:before{content:"s"}.pow2-checked-shield[_ngcontent-%COMP%]:before{content:"t"}.pow2-cheese-wedge[_ngcontent-%COMP%]:before{content:"u"}.pow2-chemical-drop[_ngcontent-%COMP%]:before{content:"v"}.pow2-chicken-leg[_ngcontent-%COMP%]:before{content:"w"}.pow2-cog[_ngcontent-%COMP%]:before{content:"x"}.pow2-conversation[_ngcontent-%COMP%]:before{content:"y"}.pow2-death-note[_ngcontent-%COMP%]:before{content:"z"}.pow2-drink-me[_ngcontent-%COMP%]:before{content:"A"}.pow2-emerald[_ngcontent-%COMP%]:before{content:"B"}.pow2-envelope[_ngcontent-%COMP%]:before{content:"C"}.pow2-ice-bolt[_ngcontent-%COMP%]:before{content:"D"}.pow2-list[_ngcontent-%COMP%]:before{content:"E"}.pow2-social-github[_ngcontent-%COMP%]:before{content:"F"}.pow2-tablet-landscape[_ngcontent-%COMP%]:before{content:"G"}.pow2-tablet-portrait[_ngcontent-%COMP%]:before{content:"H"}.pow2-comment[_ngcontent-%COMP%]:before{content:"I"}.pow2-arrow-right[_ngcontent-%COMP%]:before{content:"J"}[_nghost-%COMP%]   .action-menu[_ngcontent-%COMP%], [_nghost-%COMP%]   .spells-menu[_ngcontent-%COMP%], [_nghost-%COMP%]   .targets-menu[_ngcontent-%COMP%]{position:absolute;bottom:100%;width:100%;margin:0;text-align:center;list-style-type:none;padding:0}[_nghost-%COMP%]   .action-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], [_nghost-%COMP%]   .spells-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], [_nghost-%COMP%]   .targets-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-transform:capitalize;display:-webkit-inline-flex;display:-moz-inline-flex;display:inline-flex;cursor:pointer;padding:10px 15px}[_nghost-%COMP%]   .action-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .spells-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .targets-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#e8c627}[_nghost-%COMP%]   .point-to-player[_ngcontent-%COMP%]{font-size:1em;-webkit-transition:all .1s;-moz-transition:all .1s;transition:all .1s;color:#fff;text-shadow:2px 2px 1px rgba(0,0,0,.8);pointer-events:none;position:relative;top:1px;display:inline-block;font-family:Glyphicons;font-style:normal;font-weight:400;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;z-index:20;position:absolute}[_nghost-%COMP%]   .point-to-player.hidden[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .point-to-player.left[_ngcontent-%COMP%]{content:\'<\'}[_nghost-%COMP%]   .point-to-player.left[_ngcontent-%COMP%]:before{content:"\\E079"}[_nghost-%COMP%]   .point-to-player.right[_ngcontent-%COMP%]{content:\'>\'}[_nghost-%COMP%]   .point-to-player.right[_ngcontent-%COMP%]:before{content:"\\E080"}[_nghost-%COMP%]   .point-to-player.attack[_ngcontent-%COMP%], [_nghost-%COMP%]   .point-to-player.magic[_ngcontent-%COMP%]{content:\'X\';color:red}[_nghost-%COMP%]   .point-to-player.attack[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .point-to-player.magic[_ngcontent-%COMP%]:before{content:"\\E087"}@media (min-width:600px){[_nghost-%COMP%]   .point-to-player[_ngcontent-%COMP%]{font-size:2em}[_nghost-%COMP%]   .combat-view[_ngcontent-%COMP%]   .action-menu[_ngcontent-%COMP%], [_nghost-%COMP%]   .combat-view[_ngcontent-%COMP%]   .spells-menu[_ngcontent-%COMP%], [_nghost-%COMP%]   .combat-view[_ngcontent-%COMP%]   .targets-menu[_ngcontent-%COMP%]{margin:20px;width:auto;padding:5px 25px}}@media (max-width:599px){[_nghost-%COMP%]   .combat-view[_ngcontent-%COMP%]   .action-menu[_ngcontent-%COMP%], [_nghost-%COMP%]   .combat-view[_ngcontent-%COMP%]   .spells-menu[_ngcontent-%COMP%], [_nghost-%COMP%]   .combat-view[_ngcontent-%COMP%]   .targets-menu[_ngcontent-%COMP%]{border-radius:0;border-left:none;border-right:none}}']},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"combat-defeat-state",[],null,null,null,o,s)),i._33(49152,null,0,r.a,[],null,null)],null,null)}var i=n(1),r=n(113);n.d(e,"b",function(){return s}),e.a=o;var l=[],s=i._30({encapsulation:2,styles:l,data:{}});i._35("combat-defeat-state",r.a,a,{},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[(t()(),i._34(null,["\n    "])),i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"combat-end-turn-state",[],null,null,null,o,u)),i._33(49152,null,0,r.a,[l.a],null,null)],null,null)}var i=n(1),r=n(114),l=n(25);n.d(e,"b",function(){return u}),e.a=o;var s=[],u=i._30({encapsulation:2,styles:s,data:{}});i._35("combat-end-turn-state",r.a,a,{},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"combat-escape-state",[],null,null,null,o,s)),i._33(49152,null,0,r.a,[],null,null)],null,null)}var i=n(1),r=n(159);n.d(e,"b",function(){return s}),e.a=o;var l=[],s=i._30({encapsulation:2,styles:l,data:{}});i._35("combat-escape-state",r.a,a,{},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"combat-start-state",[],null,null,null,o,u)),i._33(49152,null,0,r.a,[l.a],null,null)],null,null)}var i=n(1),r=n(115),l=n(11);n.d(e,"b",function(){return u}),e.a=o;var s=[],u=i._30({encapsulation:2,styles:s,data:{}});i._35("combat-start-state",r.a,a,{},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[(t()(),i._34(null,["\n    "])),i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"combat-victory-state",[],null,null,null,o,u)),i._33(49152,null,0,r.a,[l.a],null,null)],null,null)}var i=n(1),r=n(116),l=n(16);n.d(e,"b",function(){return u}),e.a=o;var s=[],u=i._30({encapsulation:2,styles:s,data:{}});i._35("combat-victory-state",r.a,a,{},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[i._40(671088640,1,{childStates:1}),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"combat-start-state",[],null,null,null,r.a,r.b)),i._33(49152,[[1,4],["start",4]],0,l.a,[s.a],null,null),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"combat-begin-turn-state",[],null,null,null,u.a,u.b)),i._33(49152,[[1,4],["beginTurn",4]],0,c.a,[p.a],null,null),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"combat-choose-action-state",[],null,null,null,d.a,d.b)),i._33(4374528,[[1,4],["chooseAction",4]],0,h.a,[i.L,f.a],{pointAt:[0,"pointAt"]},null),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"combat-end-turn-state",[],null,null,null,m.a,m.b)),i._33(49152,[[1,4],["endTurn",4]],0,_.a,[p.a],null,null),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"combat-defeat-state",[],null,null,null,g.a,g.b)),i._33(49152,[[1,4],["defeat",4]],0,y.a,[],null,null),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"combat-victory-state",[],null,null,null,v.a,v.b)),i._33(49152,[[1,4],["victory",4]],0,b.a,[x.a],null,null),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"combat-escape-state",[],null,null,null,w.a,w.b)),i._33(49152,[[1,4],["escape",4]],0,k.a,[],null,null),(t()(),
i._34(null,["\n  "]))],function(t,e){var n=e.component,o=n.current;t(e,9,0,o)},null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"combat-state-machine",[],null,null,null,o,C)),i._33(4243456,null,0,M.a,[p.a],null,null)],null,null)}var i=n(1),r=n(474),l=n(115),s=n(11),u=n(468),c=n(102),p=n(25),d=n(469),h=n(103),f=n(39),m=n(472),_=n(114),g=n(471),y=n(113),v=n(475),b=n(116),x=n(16),w=n(473),k=n(159),M=n(117);n.d(e,"b",function(){return C}),e.a=o;var S=[],C=i._30({encapsulation:2,styles:S,data:{}});i._35("combat-state-machine",M.a,a,{scene:"scene",encounter:"encounter",party:"party",enemies:"enemies",view:"view"},{},[])},function(t,e,n){"use strict";function o(t){return r._31(0,[(t()(),r._34(null,["\n"]))],null,null)}function a(t){return r._31(0,[(t()(),r._32(0,null,null,1,"game",[],null,null,null,o,d)),r._33(114688,null,0,l.a,[s.a,u.a,c.a],null,null)],function(t,e){t(e,1,0)},null)}var i=n(478),r=n(1),l=n(160),s=n(26),u=n(11),c=n(15);n.d(e,"a",function(){return h});var p=[i.a],d=r._30({encapsulation:2,styles:p,data:{}}),h=r._35("game",l.a,a,{},{},[])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[""]},function(t,e,n){"use strict";function o(t){return i._31(0,[(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,4,"div",[],null,null,null,null,null)),(t()(),i._34(null,["\n      "])),(t()(),i._32(0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),i._34(null,["404: page missing"])),(t()(),i._34(null,["\n    "])),(t()(),i._34(null,["\n  "]))],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"no-content",[],null,null,null,o,s)),i._33(49152,null,0,r.a,[],null,null)],null,null)}var i=n(1),r=n(161);n.d(e,"a",function(){return u});var l=[],s=i._30({encapsulation:2,styles:l,data:{}}),u=i._35("no-content",r.a,a,{},{},[])},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"combat-encounter-behavior",[],null,null,null,o,s)),i._33(49152,null,0,r.a,[],null,null)],null,null)}var i=n(1),r=n(222);n.d(e,"b",function(){return s}),e.a=o;var l=[],s=i._30({encapsulation:2,styles:l,data:{}});i._35("combat-encounter-behavior",r.a,a,{scene:"scene"},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"map-feature-input-behavior",[],null,null,null,o,s)),i._33(49152,null,0,r.a,[],null,null)],null,null)}var i=n(1),r=n(223);n.d(e,"b",function(){return s}),e.a=o;var l=[],s=i._30({encapsulation:2,styles:l,data:{}});i._35("map-feature-input-behavior",r.a,a,{scene:"scene"},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"player-behavior",[],null,null,null,o,s)),i._33(49152,null,0,r.a,[],null,null)],null,null)}var i=n(1),r=n(69);n.d(e,"b",function(){return s}),e.a=o;var l=[],s=i._30({encapsulation:2,styles:l,data:{}});i._35("player-behavior",r.a,a,{},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"player-camera-behavior",[],null,null,null,o,s)),i._33(49152,null,0,r.a,[],null,null)],null,null)}var i=n(1),r=n(224);n.d(e,"b",function(){return s}),e.a=o;var l=[],s=i._30({encapsulation:2,styles:l,data:{}});i._35("player-camera-behavior",r.a,a,{},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"player-look-behavior",[],null,null,null,o,s)),i._33(49152,null,0,r.a,[],null,null)],null,null)}var i=n(1),r=n(225);n.d(e,"b",function(){return s}),e.a=o;var l=[],s=i._30({encapsulation:2,styles:l,data:{}});i._35("player-look-behavior",r.a,a,{},{onLook:"onLook",onLookAway:"onLookAway"},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"player-map-path-behavior",[],null,null,null,o,s)),i._33(49152,null,0,r.a,[],null,null)],null,null)}var i=n(1),r=n(226);n.d(e,"b",function(){return s}),e.a=o;var l=[],s=i._30({encapsulation:2,styles:l,data:{}});i._35("player-map-path-behavior",r.a,a,{tileMap:"tileMap"},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"player-render-behavior",[],null,null,null,o,s)),i._33(49152,null,0,r.b,[],null,null)],null,null)}var i=n(1),r=n(118);n.d(e,"b",function(){return s}),e.a=o;var l=[],s=i._30({encapsulation:2,styles:l,data:{}});i._35("player-render-behavior",r.b,a,{},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[(t()(),i._34(null,["\n    "])),i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"combat-feature",[],null,null,null,o,u)),i._33(49152,null,0,r.a,[l.a],null,null)],null,null)}var i=n(1),r=n(162),l=n(16);n.d(e,"b",function(){return u}),e.a=o;var s=[],u=i._30({encapsulation:2,styles:s,data:{}});i._35("combat-feature",r.a,a,{active:"active",feature:"feature"},{},["*"])},function(t,e,n){"use strict";function o(t){return l._31(0,[(t()(),l._32(0,null,null,17,"div",[["class","dialog"],["layout","row"],["layout-padding",""]],null,null,null,null,null)),(t()(),l._34(null,["\n  "])),(t()(),l._32(0,null,null,2,"rpg-sprite",[["class","character"]],null,null,null,s.a,s.b)),l._33(49152,null,0,u.a,[c.r,p.a],{name:[0,"name"]},null),l._36(131072,d.n,[l.X]),(t()(),l._34(null,["\n  "])),(t()(),l._32(0,null,null,7,"div",[["class","body-text"],["flex",""]],null,null,null,null,null)),(t()(),l._34(null,["\n    "])),(t()(),l._32(0,null,null,1,"p",[],[[8,"innerText",0]],null,null,null,null)),l._36(131072,d.n,[l.X]),(t()(),l._34(null,["\n    "])),(t()(),l._32(0,null,null,1,"span",[["class","text"]],[[8,"innerText",0]],null,null,null,null)),l._36(131072,d.n,[l.X]),(t()(),l._34(null,["\n  "])),(t()(),l._34(null,["\n  "])),(t()(),l._32(0,null,null,1,"button",[["class","btn-close"]],null,[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a.onClose.next(n)!==!1;o=i&&o}return o},null,null)),(t()(),l._34(null,["x"])),(t()(),l._34(null,["\n"]))],function(t,e){var n=e.component,o=l._37(e,3,0,l._38(e,4).transform(n.icon$));t(e,3,0,o)},function(t,e){var n=e.component,o=l._37(e,8,0,l._38(e,9).transform(n.title$));t(e,8,0,o);var a=l._37(e,11,0,l._38(e,12).transform(n.text$));t(e,11,0,a)})}function a(t){return l._31(2,[(t()(),l._39(16777216,null,null,2,null,o)),l._33(16384,null,0,d.o,[l.P,l.Q],{ngIf:[0,"ngIf"]},null),l._36(131072,d.n,[l.X]),(t()(),l._34(null,["\n"]))],function(t,e){var n=e.component,o=l._37(e,1,0,l._38(e,2).transform(n.active$));t(e,1,0,o)},null)}function i(t){return l._31(0,[(t()(),l._32(0,null,null,1,"dialog-feature",[],null,null,null,a,m)),l._33(49152,null,0,h.a,[],null,null)],null,null)}var r=n(489),l=n(1),s=n(98),u=n(60),c=n(24),p=n(47),d=n(8),h=n(163);n.d(e,"b",function(){return m}),e.a=a;var f=[r.a],m=l._30({encapsulation:2,styles:f,data:{}});l._35("dialog-feature",h.a,i,{active:"active",feature:"feature",scene:"scene"},{onClose:"onClose"},[])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["dialog-feature .dialog{position:fixed;top:0;left:0;right:0;margin:auto;font-family:GraphicPixel,AdvoCut,sans-serif;font-size:20px;background-color:#004c62;color:#fff;border:6px solid #fff;border-radius:9px;text-shadow:2px 2px 0 rgba(0,0,0,.7);padding-top:16px;padding-bottom:16px;max-height:90%;z-index:20;max-width:800px;text-align:center}dialog-feature .dialog h1{margin:0}@media (min-width:600px){dialog-feature .dialog{max-height:80%}dialog-feature .dialog h1{margin:auto}}dialog-feature .dialog .body-text{pointer-events:none}dialog-feature .dialog button{border:none;font-family:inherit;font-size:inherit;color:inherit;background:none;cursor:pointer;padding:10px 30px;display:inline-block;text-transform:uppercase;letter-spacing:1px;font-weight:700;outline:none;position:relative;-webkit-transition:all .3s;-moz-transition:all .3s;transition:all .3s;background:#cb4e4e;color:#fff;box-shadow:0 6px #ab3c3c;-webkit-transition:none;-moz-transition:none;transition:none;border-radius:0 0 5px 5px;position:absolute;font-size:1.5em;padding:10px 20px 5px;right:.5em;top:0}dialog-feature .dialog button:after{content:'';position:absolute;z-index:-1;-webkit-transition:all .3s;-moz-transition:all .3s;transition:all .3s}dialog-feature .dialog button:before{speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;position:relative;-webkit-font-smoothing:antialiased}dialog-feature .dialog button:hover{box-shadow:0 4px #ab3c3c;top:2px}dialog-feature .dialog button.ng-click-active,dialog-feature .dialog button:active{box-shadow:0 0 #ab3c3c;top:6px}dialog-feature .dialog button>i{pointer-events:none}dialog-feature .dialog button:hover{top:0;padding-top:12px;outline:none}dialog-feature .dialog button:active{top:0;padding-top:16px;outline:none}dialog-feature .dialog .character{padding:0}dialog-feature .dialog .character p{margin:0}dialog-feature .dialog .text{text-align:center;vertical-align:middle;line-height:normal;color:#fff;text-shadow:1px 1px 0 #000,-2px 0 #000,0 0 #000,-1px 1px 0 #000}"]},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"portal-feature",[],null,null,null,o,u)),i._33(49152,null,0,r.a,[l.a],null,null)],null,null)}var i=n(1),r=n(164),l=n(16);n.d(e,"b",function(){return u}),e.a=o;var s=[],u=i._30({encapsulation:2,styles:s,data:{}});i._35("portal-feature",r.a,a,{active:"active",feature:"feature"},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(0,[i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"ship-feature",[],null,null,null,o,s)),i._33(49152,null,0,r.a,[],null,null)],null,null)}var i=n(1),r=n(165);n.d(e,"b",function(){return s}),e.a=o;var l=[],s=i._30({encapsulation:2,styles:l,data:{}});i._35("ship-feature",r.a,a,{active:"active",feature:"feature"},{},["*"])},function(t,e,n){"use strict";function o(t){return f._31(0,[(t()(),f._32(0,null,null,8,"li",[["class","item"],["layout","row"]],null,[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a._selected$.next(t.context.$implicit)!==!1;o=i&&o}return o},null,null)),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,1,"rpg-sprite",[["class","icon"],["height","32"],["width","32"]],null,null,null,m.a,m.b)),f._33(49152,null,0,_.a,[g.r,y.a],{width:[0,"width"],height:[1,"height"],name:[2,"name"]},null),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,0,"span",[["class","item-name"],["flex",""]],[[8,"innerText",0]],null,null,null,null)),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,0,"span",[["class","item-price"]],[[8,"innerText",0]],null,null,null,null)),(t()(),f._34(null,["\n      "]))],function(t,e){var n="32",o="32",a=e.context.$implicit.icon;t(e,3,0,n,o,a)},function(t,e){var n=e.context.$implicit.name;t(e,5,0,n);var o=e.context.$implicit.value;t(e,7,0,o)})}function a(t){return f._31(0,[(t()(),f._32(0,null,null,5,"ul",[],null,null,null,null,null)),(t()(),f._34(null,["\n      "])),(t()(),f._39(16777216,null,null,2,null,o)),f._33(802816,null,0,v.p,[f.P,f.Q,f.I],{ngForOf:[0,"ngForOf"]},null),f._36(131072,v.n,[f.X]),(t()(),f._34(null,["\n    "]))],function(t,e){var n=e.component,o=f._37(e,3,0,f._38(e,4).transform(n.inventory$));t(e,3,0,o)},null)}function i(t){return f._31(0,[(t()(),f._32(0,null,null,8,"li",[["class","item"],["layout","row"]],null,[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a._selected$.next(t.context.$implicit)!==!1;o=i&&o}return o},null,null)),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,1,"rpg-sprite",[["class","icon"],["height","32"],["width","32"]],null,null,null,m.a,m.b)),f._33(49152,null,0,_.a,[g.r,y.a],{width:[0,"width"],height:[1,"height"],name:[2,"name"]},null),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,0,"span",[["class","item-name"],["flex",""]],[[8,"innerText",0]],null,null,null,null)),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,0,"span",[["class","item-price"]],[[8,"innerText",0]],null,null,null,null)),(t()(),f._34(null,["\n      "]))],function(t,e){var n="32",o="32",a=e.context.$implicit.icon;t(e,3,0,n,o,a)},function(t,e){var n=e.context.$implicit.name;t(e,5,0,n);var o=e.context.$implicit.value;t(e,7,0,o)})}function r(t){return f._31(0,[(t()(),f._32(0,null,null,5,"ul",[],null,null,null,null,null)),(t()(),f._34(null,["\n      "])),(t()(),f._39(16777216,null,null,2,null,i)),f._33(802816,null,0,v.p,[f.P,f.Q,f.I],{ngForOf:[0,"ngForOf"]},null),f._36(131072,v.n,[f.X]),(t()(),f._34(null,["\n    "]))],function(t,e){var n=e.component,o=f._37(e,3,0,f._38(e,4).transform(n.partyInventory$));t(e,3,0,o)},null)}function l(t){return f._31(0,[(t()(),f._32(0,null,null,14,"ul",[],null,null,null,null,null)),(t()(),f._34(null,["\n      "])),(t()(),f._32(0,null,null,11,"li",[["class","item selected"],["layout","row"]],null,null,null,null,null)),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,2,"rpg-sprite",[["class","icon"],["height","32"],["width","32"]],null,null,null,m.a,m.b)),f._33(49152,null,0,_.a,[g.r,y.a],{width:[0,"width"],height:[1,"height"],name:[2,"name"]},null),f._36(131072,v.n,[f.X]),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,1,"span",[["class","item-name"],["flex",""]],[[8,"innerText",0]],null,null,null,null)),f._36(131072,v.n,[f.X]),(t()(),f._34(null,["\n        "])),(t()(),f._32(0,null,null,1,"span",[["class","item-price"]],[[8,"innerText",0]],null,null,null,null)),f._36(131072,v.n,[f.X]),(t()(),f._34(null,["\n      "])),(t()(),f._34(null,["\n    "]))],function(t,e){var n=e.component,o="32",a="32",i=null,r=null==(i=f._37(e,5,2,f._38(e,6).transform(n.selected$)))?null:i.icon;t(e,5,0,o,a,r)},function(t,e){var n=e.component,o=null,a=null==(o=f._37(e,8,0,f._38(e,9).transform(n.selected$)))?null:o.name;t(e,8,0,a);var i=null,r=null==(i=f._37(e,11,0,f._38(e,12).transform(n.selected$)))?null:i.value;t(e,11,0,r)})}function s(t){return f._31(0,[(t()(),f._32(0,null,null,7,"div",[["class","prompt btn-group"]],null,null,null,null,null)),(t()(),f._34(null,["\n    "])),(t()(),f._32(0,null,null,1,"button",[],null,[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a._selected$.next(null)!==!1;o=i&&o}return o},null,null)),(t()(),f._34(null,["Back"])),(t()(),f._34(null,["\n    "])),(t()(),f._32(0,null,null,1,"button",[],[[8,"innerText",0]],[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a._onAction$.next()!==!1;o=i&&o}return o},null,null)),f._36(131072,v.n,[f.X]),(t()(),f._34(null,["\n  "]))],null,function(t,e){var n=e.component,o=f._37(e,5,0,f._38(e,6).transform(n.selling$))?"Sell":"Buy";t(e,5,0,o)})}function u(t){return f._31(0,[(t()(),f._32(0,null,null,7,"div",[["class","prompt btn-group"]],null,null,null,null,null)),(t()(),f._34(null,["\n    "])),(t()(),f._32(0,null,null,1,"button",[],null,[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a.onClose.next(n)!==!1;o=i&&o}return o},null,null)),(t()(),f._34(null,["Done"])),(t()(),f._34(null,["\n    "])),(t()(),f._32(0,null,null,1,"button",[],[[8,"innerText",0]],[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a._onToggleAction$.next()!==!1;o=i&&o}return o},null,null)),f._36(131072,v.n,[f.X]),(t()(),f._34(null,["\n  "]))],null,function(t,e){var n=e.component,o=f._37(e,5,0,f._38(e,6).transform(n.selling$))?"Back":"Sell";t(e,5,0,o)})}function c(t){return f._31(0,[(t()(),f._32(0,null,null,33,"div",[["class","store"],["layout","column"],["layout-padding",""]],null,null,null,null,null)),(t()(),f._34(null,["\n  "])),(t()(),f._32(0,null,null,3,"h1",[],null,null,null,null,null)),(t()(),f._34(null,[""," ",""])),f._36(131072,v.n,[f.X]),f._36(131072,v.n,[f.X]),(t()(),f._34(null,[" "])),(t()(),f._32(0,null,null,2,"span",[],null,null,null,null,null)),(t()(),f._34(null,["Gold: ",""])),f._36(131072,v.n,[f.X]),(t()(),f._34(null,["\n\n  "])),(t()(),f._32(0,null,null,13,"div",[["class","inventory"],["flex",""],["layout-padding",""]],null,null,null,null,null)),(t()(),f._34(null,["\n    "])),(t()(),f._39(16777216,null,null,2,null,a)),f._33(16384,null,0,v.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),f._36(131072,v.n,[f.X]),(t()(),f._34(null,["\n\n    "])),(t()(),f._39(16777216,null,null,2,null,r)),f._33(16384,null,0,v.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),f._36(131072,v.n,[f.X]),(t()(),f._34(null,["\n    "])),(t()(),f._39(16777216,null,null,2,null,l)),f._33(16384,null,0,v.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),f._36(131072,v.n,[f.X]),(t()(),f._34(null,["\n\n  "])),(t()(),f._34(null,["\n\n\n  "])),(t()(),f._39(16777216,null,null,2,null,s)),f._33(16384,null,0,v.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),f._36(131072,v.n,[f.X]),(t()(),f._34(null,["\n  "])),(t()(),f._39(16777216,null,null,2,null,u)),f._33(16384,null,0,v.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),f._36(131072,v.n,[f.X]),(t()(),f._34(null,["\n\n"]))],function(t,e){var n=e.component,o=f._37(e,14,0,f._38(e,15).transform(n.isBuying$));t(e,14,0,o);var a=f._37(e,18,0,f._38(e,19).transform(n.isSelling$));t(e,18,0,a);var i=f._37(e,22,0,f._38(e,23).transform(n.selected$));t(e,22,0,i);var r=f._37(e,27,0,f._38(e,28).transform(n.selected$));t(e,27,0,r);var l=!f._37(e,31,0,f._38(e,32).transform(n.selected$));t(e,31,0,l)},function(t,e){var n=e.component,o=f._37(e,3,0,f._38(e,4).transform(n.actionVerb$)),a=f._37(e,3,1,f._38(e,5).transform(n.name$));t(e,3,0,o,a);var i=f._37(e,8,0,f._38(e,9).transform(n.partyGold$));t(e,8,0,i)})}function p(t){return f._31(2,[(t()(),f._39(16777216,null,null,2,null,c)),f._33(16384,null,0,v.o,[f.P,f.Q],{ngIf:[0,"ngIf"]},null),f._36(131072,v.n,[f.X]),(t()(),f._34(null,["\n"]))],function(t,e){var n=e.component,o=f._37(e,1,0,f._38(e,2).transform(n.active$));t(e,1,0,o)},null)}function d(t){return f._31(0,[(t()(),f._32(0,null,null,1,"store-feature",[],null,null,null,p,S)),f._33(180224,null,0,b.a,[x.a,w.a,k.a],null,null)],null,null)}var h=n(493),f=n(1),m=n(98),_=n(60),g=n(24),y=n(47),v=n(8),b=n(166),x=n(26),w=n(11),k=n(16);n.d(e,"b",function(){return S}),e.a=p;var M=[h.a],S=f._30({encapsulation:2,styles:M,data:{}});f._35("store-feature",b.a,d,{active:"active",feature:"feature",scene:"scene"},{onClose:"onClose"},[])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["store-feature .store{max-width:600px;min-width:320px;z-index:20;position:fixed;top:0;left:0;right:0;margin:auto;font-family:GraphicPixel,AdvoCut,sans-serif;font-size:20px;background-color:#004c62;border:6px solid #fff;border-radius:9px;text-shadow:2px 2px 0 rgba(0,0,0,.7);padding-top:16px;padding-bottom:16px;max-height:90%;text-align:center;color:#fff;display:block}store-feature .store h1{margin:0}@media (min-width:600px){store-feature .store{max-height:80%}store-feature .store h1{margin:auto}}store-feature .store .inventory{min-height:200px;overflow-y:auto;text-align:center}store-feature .store .inventory .item-price{color:#e8c627}store-feature .store .btn-group{text-align:center}store-feature .store .btn-group button{border:none;font-family:inherit;font-size:inherit;color:inherit;background:none;cursor:pointer;padding:10px 30px;display:inline-block;text-transform:uppercase;letter-spacing:1px;font-weight:700;outline:none;position:relative;-webkit-transition:all .3s;-moz-transition:all .3s;transition:all .3s;border:3px solid #fff;color:#fff}store-feature .store .btn-group button:after{content:'';position:absolute;z-index:-1;-webkit-transition:all .3s;-moz-transition:all .3s;transition:all .3s}store-feature .store .btn-group button:before{speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;position:relative;-webkit-font-smoothing:antialiased}store-feature .store .btn-group button.ng-click-active,store-feature .store .btn-group button:active,store-feature .store .btn-group button:hover{color:#0e83cd;background:#fff}store-feature .store ul{padding:0;margin:0;text-align:center;list-style-type:none;max-width:100%}store-feature .store ul li.item{margin:10px;cursor:pointer;border:1px solid transparent}store-feature .store ul li.item *{pointer-events:none}store-feature .store ul li.item .item-name{white-space:nowrap;text-overflow:ellipsis}store-feature .store ul li.item:hover *{color:#0ff!important}"]},function(t,e,n){"use strict";function o(t){return s._31(0,[(t()(),s._32(0,null,null,7,"li",[],null,null,null,null,null)),(t()(),s._34(null,["\n      "])),(t()(),s._32(0,null,null,1,"rpg-sprite",[["class","image"],["frame","7"],["height","96"],["width","96"]],null,null,null,u.a,u.b)),s._33(49152,null,0,c.a,[p.r,d.a],{width:[0,"width"],height:[1,"height"],frame:[2,"frame"],name:[3,"name"]},null),(t()(),s._34(null,["\n      "])),(t()(),s._32(0,null,null,1,"rpg-health-bar",[],null,null,null,h.a,h.b)),s._33(49152,null,0,f.a,[],{model:[0,"model"]},null),(t()(),s._34(null,["\n    "]))],function(t,e){var n="96",o="96",a="7",i=e.context.$implicit.icon;t(e,3,0,n,o,a,i);var r=e.context.$implicit;t(e,6,0,r)},null)}function a(t){return s._31(0,[(t()(),s._32(0,null,null,39,"div",[["class","temple-view"],["layout","column"],["layout-padding",""]],null,null,null,null,null)),(t()(),s._34(null,["\n  "])),(t()(),s._32(0,null,null,9,"div",[["class","header"],["layout","row"],["layout-align","center center"]],null,null,null,null,null)),(t()(),s._34(null,["\n    "])),(t()(),s._32(0,null,null,2,"rpg-sprite",[],null,null,null,u.a,u.b)),s._33(49152,null,0,c.a,[p.r,d.a],{name:[0,"name"]},null),s._36(131072,m.n,[s.X]),(t()(),s._34(null,["\n    "])),(t()(),s._32(0,null,null,2,"h1",[],null,null,null,null,null)),(t()(),s._34(null,["",""])),s._36(131072,m.n,[s.X]),(t()(),s._34(null,["\n  "])),(t()(),s._34(null,["\n\n  "])),(t()(),s._32(0,null,null,9,"div",[["class","prompt"],["flex",""]],null,null,null,null,null)),(t()(),s._34(null,["\n    "])),(t()(),s._32(0,null,null,3,"h2",[],null,null,null,null,null)),(t()(),s._34(null,["It will cost you "," of your "," gold to recover here."])),s._36(131072,m.n,[s.X]),s._36(131072,m.n,[s.X]),(t()(),s._34(null,["\n\n    "])),(t()(),s._32(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),s._34(null,["Would you like to heal your party members?"])),(t()(),s._34(null,["\n  "])),(t()(),s._34(null,["\n  "])),(t()(),s._32(0,null,null,7,"div",[["layout","row"],["layout-padding",""]],null,null,null,null,null)),(t()(),s._34(null,["\n    "])),(t()(),s._32(0,null,null,1,"button",[["flex","50"]],null,[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a._onRest$.next()!==!1;o=i&&o}return o},null,null)),(t()(),s._34(null,["Yes"])),(t()(),s._34(null,["\n    "])),(t()(),s._32(0,null,null,1,"button",[["flex","50"]],null,[[null,"click"]],function(t,e,n){var o=!0,a=t.component;if("click"===e){var i=a.onClose.next(n)!==!1;o=i&&o}return o},null,null)),(t()(),s._34(null,["No"])),(t()(),s._34(null,["\n  "])),(t()(),s._34(null,["\n\n  "])),(t()(),s._32(0,null,null,5,"ul",[["class","party"]],null,null,null,null,null)),(t()(),s._34(null,["\n    "])),(t()(),s._39(16777216,null,null,2,null,o)),s._33(802816,null,0,m.p,[s.P,s.Q,s.I],{ngForOf:[0,"ngForOf"]},null),s._36(131072,m.n,[s.X]),(t()(),s._34(null,["\n  "])),(t()(),s._34(null,["\n"]))],function(t,e){var n=e.component,o=s._37(e,5,0,s._38(e,6).transform(n.icon$));t(e,5,0,o);var a=s._37(e,36,0,s._38(e,37).transform(n.party$));t(e,36,0,a)},function(t,e){var n=e.component,o=s._37(e,9,0,s._38(e,10).transform(n.name$));t(e,9,0,o);var a=s._37(e,16,0,s._38(e,17).transform(n.cost$)),i=s._37(e,16,1,s._38(e,18).transform(n.partyGold$));t(e,16,0,a,i)})}function i(t){return s._31(2,[(t()(),s._39(16777216,null,null,2,null,a)),s._33(16384,null,0,m.o,[s.P,s.Q],{ngIf:[0,"ngIf"]},null),s._36(131072,m.n,[s.X]),(t()(),s._34(null,["\n"]))],function(t,e){var n=e.component,o=s._37(e,1,0,s._38(e,2).transform(n.active$));t(e,1,0,o)},null)}function r(t){return s._31(0,[(t()(),s._32(0,null,null,1,"temple-feature",[],null,null,null,i,x)),s._33(245760,null,0,_.a,[g.a,y.a,v.a],null,null)],function(t,e){t(e,1,0)},null)}var l=n(495),s=n(1),u=n(98),c=n(60),p=n(24),d=n(47),h=n(204),f=n(99),m=n(8),_=n(167),g=n(26),y=n(16),v=n(11);n.d(e,"b",function(){return x}),e.a=i;var b=[l.a],x=s._30({encapsulation:2,styles:b,data:{}});s._35("temple-feature",_.a,r,{active:"active",scene:"scene",party:"party",feature:"feature"},{onClose:"onClose"},[])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["temple-feature .temple-view{position:fixed;top:0;left:0;right:0;font-family:GraphicPixel,AdvoCut,sans-serif;font-size:20px;background-color:#004c62;color:#fff;border:6px solid #fff;border-radius:9px;text-shadow:2px 2px 0 rgba(0,0,0,.7);padding-top:16px;padding-bottom:16px;max-height:90%;z-index:20;text-align:center;margin:auto;max-width:800px}temple-feature .temple-view h1{margin:0}@media (min-width:600px){temple-feature .temple-view{max-height:80%}temple-feature .temple-view h1{margin:auto}}temple-feature .temple-view button{border:none;font-family:inherit;font-size:inherit;color:inherit;background:none;cursor:pointer;padding:10px 30px;display:inline-block;text-transform:uppercase;letter-spacing:1px;font-weight:700;outline:none;position:relative;-webkit-transition:all .3s;-moz-transition:all .3s;transition:all .3s;border:3px solid #fff;color:#fff}temple-feature .temple-view button:after{content:'';position:absolute;z-index:-1;-webkit-transition:all .3s;-moz-transition:all .3s;transition:all .3s}temple-feature .temple-view button:before{speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;position:relative;-webkit-font-smoothing:antialiased}temple-feature .temple-view button.ng-click-active,temple-feature .temple-view button:active,temple-feature .temple-view button:hover{color:#0e83cd;background:#fff}temple-feature .temple-view .header h1{margin:0}temple-feature .temple-view ul.party{list-style:none}temple-feature .temple-view ul.party li{display:inline-block}"]},function(t,e,n){"use strict";function o(t){return i._31(0,[(t()(),i._34(null,["\n    "])),i._41(null,0)],null,null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"treasure-feature",[],null,null,null,o,c)),i._33(49152,null,0,r.a,[l.a,s.a],null,null)],null,null)}var i=n(1),r=n(168),l=n(16),s=n(11);n.d(e,"b",function(){return c}),e.a=o;var u=[],c=i._30({encapsulation:2,styles:u,data:{}});i._35("treasure-feature",r.a,a,{active:"active",feature:"feature"},{},["*"])},function(t,e,n){"use strict";function o(t){return d._31(0,[(t()(),d._32(0,null,null,2,"portal-feature",[],null,null,null,h.a,h.b)),d._33(49152,[[1,4],["comp",4]],0,f.a,[m.a],{feature:[0,"feature"]},null),d._36(131072,_.n,[d.X])],function(t,e){var n=e.component,o=d._37(e,1,0,d._38(e,2).transform(n.feature$));t(e,1,0,o)},null)}function a(t){return d._31(0,[(t()(),d._32(0,null,null,2,"dialog-feature",[],null,[[null,"onClose"]],function(t,e,n){var o=!0,a=t.component;if("onClose"===e){var i=a.onClose.emit(a.featureQuery.first)!==!1;o=i&&o}return o},g.a,g.b)),d._33(49152,[[1,4],["comp",4]],0,y.a,[],{feature:[0,"feature"]},{onClose:"onClose"}),d._36(131072,_.n,[d.X])],function(t,e){var n=e.component,o=d._37(e,1,0,d._38(e,2).transform(n.feature$));t(e,1,0,o)},null)}function i(t){return d._31(0,[(t()(),d._32(0,null,null,2,"temple-feature",[],null,[[null,"onClose"]],function(t,e,n){var o=!0,a=t.component;if("onClose"===e){var i=a.onClose.emit(a.featureQuery.first)!==!1;o=i&&o}return o},v.a,v.b)),d._33(245760,[[1,4],["comp",4]],0,b.a,[x.a,m.a,w.a],{feature:[0,"feature"]},{onClose:"onClose"}),d._36(131072,_.n,[d.X])],function(t,e){var n=e.component,o=d._37(e,1,0,d._38(e,2).transform(n.feature$));t(e,1,0,o)},null)}function r(t){return d._31(0,[(t()(),d._32(0,null,null,2,"store-feature",[],null,[[null,"onClose"]],function(t,e,n){var o=!0,a=t.component;if("onClose"===e){var i=a.onClose.emit(a.featureQuery.first)!==!1;o=i&&o}return o},k.a,k.b)),d._33(180224,[[1,4],["comp",4]],0,M.a,[x.a,w.a,m.a],{feature:[0,"feature"]},{onClose:"onClose"}),d._36(131072,_.n,[d.X])],function(t,e){var n=e.component,o=d._37(e,1,0,d._38(e,2).transform(n.feature$));t(e,1,0,o)},null)}function l(t){return d._31(0,[(t()(),d._32(0,null,null,2,"ship-feature",[],null,null,null,S.a,S.b)),d._33(49152,[[1,4],["comp",4]],0,C.a,[],{feature:[0,"feature"]},null),d._36(131072,_.n,[d.X])],function(t,e){var n=e.component,o=d._37(e,1,0,d._38(e,2).transform(n.feature$));t(e,1,0,o)},null)}function s(t){return d._31(0,[(t()(),d._32(0,null,null,2,"treasure-feature",[],null,null,null,O.a,O.b)),d._33(49152,[[1,4],["comp",4]],0,P.a,[m.a,w.a],{feature:[0,"feature"]},null),d._36(131072,_.n,[d.X])],function(t,e){var n=e.component,o=d._37(e,1,0,d._38(e,2).transform(n.feature$));t(e,1,0,o)},null)}function u(t){return d._31(0,[(t()(),d._32(0,null,null,2,"combat-feature",[],null,null,null,I.a,I.b)),d._33(49152,[[1,4],["comp",4]],0,E.a,[m.a],{feature:[0,"feature"]},null),d._36(131072,_.n,[d.X])],function(t,e){var n=e.component,o=d._37(e,1,0,d._38(e,2).transform(n.feature$));t(e,1,0,o)},null)}function c(t){return d._31(2,[d._40(671088640,1,{featureQuery:1}),(t()(),d._34(null,["\n"])),(t()(),d._39(16777216,null,null,2,null,o)),d._33(16384,null,0,_.o,[d.P,d.Q],{ngIf:[0,"ngIf"]},null),d._36(131072,_.n,[d.X]),(t()(),d._34(null,["\n"])),(t()(),d._39(16777216,null,null,2,null,a)),d._33(16384,null,0,_.o,[d.P,d.Q],{ngIf:[0,"ngIf"]},null),d._36(131072,_.n,[d.X]),(t()(),d._34(null,["\n"])),(t()(),d._39(16777216,null,null,2,null,i)),d._33(16384,null,0,_.o,[d.P,d.Q],{ngIf:[0,"ngIf"]},null),d._36(131072,_.n,[d.X]),(t()(),d._34(null,["\n"])),(t()(),d._39(16777216,null,null,2,null,r)),d._33(16384,null,0,_.o,[d.P,d.Q],{ngIf:[0,"ngIf"]},null),d._36(131072,_.n,[d.X]),(t()(),d._34(null,["\n"])),(t()(),d._39(16777216,null,null,2,null,l)),d._33(16384,null,0,_.o,[d.P,d.Q],{ngIf:[0,"ngIf"]},null),d._36(131072,_.n,[d.X]),(t()(),d._34(null,["\n"])),(t()(),d._39(16777216,null,null,2,null,s)),d._33(16384,null,0,_.o,[d.P,d.Q],{ngIf:[0,"ngIf"]},null),d._36(131072,_.n,[d.X]),(t()(),d._34(null,["\n"])),(t()(),d._39(16777216,null,null,2,null,u)),d._33(16384,null,0,_.o,[d.P,d.Q],{ngIf:[0,"ngIf"]},null),d._36(131072,_.n,[d.X]),(t()(),d._34(null,["\n"]))],function(t,e){var n=e.component,o="PortalFeatureComponent"===d._37(e,3,0,d._38(e,4).transform(n.type$));t(e,3,0,o);var a="DialogFeatureComponent"===d._37(e,7,0,d._38(e,8).transform(n.type$));t(e,7,0,a);var i="TempleFeatureComponent"===d._37(e,11,0,d._38(e,12).transform(n.type$));t(e,11,0,i);var r="StoreFeatureComponent"===d._37(e,15,0,d._38(e,16).transform(n.type$));t(e,15,0,r);var l="ShipFeatureComponent"===d._37(e,19,0,d._38(e,20).transform(n.type$));t(e,19,0,l);var s="TreasureFeatureComponent"===d._37(e,23,0,d._38(e,24).transform(n.type$));t(e,23,0,s);var u="CombatFeatureComponent"===d._37(e,27,0,d._38(e,28).transform(n.type$));t(e,27,0,u)},null)}function p(t){return d._31(0,[(t()(),d._32(0,null,null,1,"map-feature",[],null,null,null,c,R)),d._33(4374528,null,0,T.a,[],null,null)],null,null)}var d=n(1),h=n(490),f=n(164),m=n(16),_=n(8),g=n(488),y=n(163),v=n(494),b=n(167),x=n(26),w=n(11),k=n(492),M=n(166),S=n(491),C=n(165),O=n(496),P=n(168),I=n(487),E=n(162),T=n(44);n.d(e,"b",function(){return R}),e.a=c;var A=[],R=d._30({encapsulation:2,styles:A,data:{}});d._35("map-feature",T.a,p,{feature:"feature",tiledMap:"tiledMap",scene:"scene"},{onClose:"onClose"},[])},function(t,e,n){"use strict";function o(t){return l._31(0,[(t()(),l._32(0,null,null,2,"map-feature",[],null,[[null,"onClose"]],function(t,e,n){var o=!0,a=t.component;if("onClose"===e){var i=a.player.escapeFeature()!==!1;o=i&&o}return o},s.a,s.b)),l._33(4374528,[[3,4]],0,u.a,[],{feature:[0,"feature"],tiledMap:[1,"tiledMap"],scene:[2,"scene"]},{onClose:"onClose"}),l._36(131072,c.n,[l.X])],function(t,e){var n=e.component,o=e.context.$implicit,a=l._37(e,1,1,l._38(e,2).transform(n.resource$)),i=n.scene;
t(e,1,0,o,a,i)},null)}function a(t){return l._31(0,[(t()(),l._32(0,null,null,3,"world-player",[],null,null,null,p.a,p.b)),l._33(4374528,[[1,4],["player",4]],0,d.b,[],{model:[0,"model"],scene:[1,"scene"],map:[2,"map"],point:[3,"point"]},null),l._36(131072,c.n,[l.X]),l._36(131072,c.n,[l.X])],function(t,e){var n=e.component,o=l._37(e,1,0,l._38(e,2).transform(n.partyLeader$)),a=n.scene,i=n.self,r=l._37(e,1,3,l._38(e,3).transform(n.renderPoint$));t(e,1,0,o,a,i,r)},null)}function i(t){return l._31(2,[l._40(671088640,1,{player:0}),l._40(671088640,2,{behaviors:1}),l._40(671088640,3,{mapFeatures:1}),(t()(),l._32(0,null,null,1,"map-feature-input-behavior",[],null,null,null,h.a,h.b)),l._33(49152,[[2,4],["input",4]],0,f.a,[],{scene:[0,"scene"]},null),(t()(),l._34(null,["\n"])),(t()(),l._32(0,null,null,1,"combat-encounter-behavior",[],null,null,null,m.a,m.b)),l._33(49152,[[2,4],["encounter",4]],0,_.a,[],{scene:[0,"scene"]},null),(t()(),l._34(null,["\n"])),(t()(),l._32(0,null,null,5,"section",[["name","features"]],null,null,null,null,null)),(t()(),l._34(null,["\n  "])),(t()(),l._39(16777216,null,null,2,null,o)),l._33(802816,null,0,c.p,[l.P,l.Q,l.I],{ngForOf:[0,"ngForOf"]},null),l._36(131072,c.n,[l.X]),(t()(),l._34(null,["\n"])),(t()(),l._34(null,["\n"])),(t()(),l._39(16777216,null,null,2,null,a)),l._33(16384,null,0,c.o,[l.P,l.Q],{ngIf:[0,"ngIf"]},null),l._36(131072,c.n,[l.X]),(t()(),l._34(null,["\n"])),l._41(null,0),(t()(),l._34(null,["\n"]))],function(t,e){var n=e.component,o=n.scene;t(e,4,0,o);var a=n.scene;t(e,7,0,a);var i=l._37(e,12,0,l._38(e,13).transform(n.features$));t(e,12,0,i);var r=l._37(e,17,0,l._38(e,18).transform(n.notTraveling$));t(e,17,0,r)},null)}function r(t){return l._31(0,[(t()(),l._32(0,null,null,1,"world-map",[],null,null,null,i,k)),l._33(4374528,null,0,g.b,[y.a,v.a,b.a,x.a],null,null)],null,null)}var l=n(1),s=n(497),u=n(44),c=n(8),p=n(499),d=n(170),h=n(481),f=n(223),m=n(480),_=n(222),g=n(169),y=n(53),v=n(16),b=n(21),x=n(27);n.d(e,"b",function(){return k}),e.a=i;var w=[],k=l._30({encapsulation:2,styles:w,data:{}});l._35("world-map",g.b,r,{scene:"scene"},{},["*"])},function(t,e,n){"use strict";function o(t){return i._31(2,[i._40(671088640,1,{behaviors:1}),i._40(402653184,2,{movable:0}),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"player-render-behavior",[],null,null,null,r.a,r.b)),i._33(49152,[[1,4],["render",4]],0,l.b,[],null,null),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"collision-behavior",[],null,null,null,s.a,s.b)),i._33(49152,[[1,4],["collision",4]],0,u.a,[],null,null),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"player-map-path-behavior",[],null,null,null,c.a,c.b)),i._33(49152,[[1,4],["path",4]],0,p.a,[],{tileMap:[0,"tileMap"]},null),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"player-behavior",[],null,null,null,d.a,d.b)),i._33(49152,[[2,4],[1,4],["player",4]],0,h.a,[],null,null),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"player-camera-behavior",[],null,null,null,f.a,f.b)),i._33(49152,[[1,4],["camera",4]],0,m.a,[],null,null),(t()(),i._34(null,["\n    "])),(t()(),i._32(0,null,null,1,"player-look-behavior",[],null,[[null,"onLook"],[null,"onLookAway"]],function(t,e,n){var o=!0,a=t.component;if("onLook"===e){var i=a.onFeatureLook(n)!==!1;o=i&&o}if("onLookAway"===e){var r=a.onFeatureLookAway(n)!==!1;o=r&&o}return o},g.a,g.b)),i._33(49152,[[1,4],["trigger",4]],0,y.a,[],null,{onLook:"onLook",onLookAway:"onLookAway"}),(t()(),i._34(null,["\n    "])),i._41(null,0),(t()(),i._34(null,["\n  "]))],function(t,e){var n=e.component,o=n.map;t(e,10,0,o)},null)}function a(t){return i._31(0,[(t()(),i._32(0,null,null,1,"world-player",[],null,null,null,o,b)),i._33(4374528,null,0,_.b,[],null,null)],null,null)}var i=n(1),r=n(486),l=n(118),s=n(444),u=n(111),c=n(485),p=n(226),d=n(482),h=n(69),f=n(483),m=n(224),_=n(170),g=n(484),y=n(225);n.d(e,"b",function(){return b}),e.a=o;var v=[],b=i._30({encapsulation:2,styles:v,data:{}});i._35("world-player",_.b,a,{icon:"icon",model:"model",scene:"scene",map:"map",point:"point"},{},["*"])},function(t,e,n){"use strict";function o(t){return r._31(2,[r._40(402653184,1,{canvasElementRef:0}),r._40(402653184,2,{partyMenu:0}),r._40(402653184,3,{map:0}),(t()(),r._32(0,null,null,1,"party-menu",[],null,null,null,l.a,l.b)),r._33(49152,[[2,4]],0,s.a,[u.a,c.a,p.a,d.a],null,null),(t()(),r._34(null,["\n\n"])),(t()(),r._32(0,null,null,1,"world-map",[],null,null,null,h.a,h.b)),r._33(4374528,[[3,4],["map",4]],0,f.b,[p.a,c.a,m.a,_.a],{scene:[0,"scene"]},null),(t()(),r._34(null,["\n\n"])),(t()(),r._32(0,[[1,0],["worldCanvas",1]],null,2,"canvas",[],[[8,"hidden",0]],null,null,null,null)),r._36(131072,g.n,[r.X]),(t()(),r._34(null,["\n  Your browser doesn't support this.\n"])),(t()(),r._34(null,["\n"]))],function(t,e){var n=e.component,o=n.scene;t(e,7,0,o)},function(t,e){var n=e.component,o=r._37(e,9,0,r._38(e,10).transform(n.loadingService.loading$));t(e,9,0,o)})}function a(t){return r._31(0,[(t()(),r._32(0,null,null,1,"world",[],[[4,"color",null]],[["window","resize"],[null,"click"],["document","keyup"]],function(t,e,n){var o=!0;if("window:resize"===e){var a=r._38(t,1)._onResize(n)!==!1;o=a&&o}if("click"===e){var i=r._38(t,1)._onClick(n)!==!1;o=i&&o}if("document:keyup"===e){var l=r._38(t,1).handleKeyboardEvent(n)!==!1;o=l&&o}return o},o,x)),r._33(4374528,null,0,y.a,[u.a,d.a,m.a,c.a,v.a],null,null)],null,function(t,e){var n=r._38(e,1).styleBackground;t(e,0,0,n)})}var i=n(501),r=n(1),l=n(452),s=n(149),u=n(26),c=n(16),p=n(53),d=n(11),h=n(498),f=n(169),m=n(21),_=n(27),g=n(8),y=n(171),v=n(15);n.d(e,"a",function(){return w});var b=[i.a],x=r._30({encapsulation:2,styles:b,data:{}}),w=r._35("world",y.a,a,{},{},[])},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[""]},function(t,e,n){"use strict";var o=n(160),a=n(161),i=n(205);n.d(e,"a",function(){return r});var r=[i.a,a.a,o.a]},function(t,e,n){"use strict";var o=n(143),a=n(78),i=n(175),r=n(9),l=n(8),s=n(24),u=n(96),c=n(122),p=n(507),d=n(215),h=n(158),f=n(298),m=n(83),_=n(206),g=n(227),y=n(144),v=n(296),b=n(146),x=n(297),w=n(299);n.d(e,"a",function(){return k});var k=[s.q,l.c,o.d,u.a,y.a.forRoot(),b.a.forRoot(),h.a.forRoot(),g.a.forRoot(),c.a.forRoot(),o.e,a.q.forRoot(p.a,{useHash:!0}),r.b.provideStore(d.a),i.b.connectRouter(),m.a.run(f.a),m.a.run(v.a),m.a.run(w.a),m.a.run(x.a),m.a.run(_.a)]},function(t,e,n){"use strict";var o=n(1),a=n(521),i=(n.n(a),n(277)),r=n(205),l=n(505),s=n(503),u=n(502),c=n(9);n.d(e,"a",function(){return p});var p=function(){function t(t,e){this.appRef=t,this._store=e}return t.prototype.hmrOnInit=function(t){t&&t.rootState&&(t.rootState&&this._store.dispatch({type:"SET_ROOT_STATE",payload:t.rootState}),"restoreInputValues"in t&&t.restoreInputValues(),this.appRef.tick(),Object.keys(t).forEach(function(e){return delete t[e]}))},t.prototype.hmrOnDestroy=function(t){var e=this.appRef.components.map(function(t){return t.location.nativeElement});this._store.take(1).subscribe(function(e){return t.rootState=e}),t.disposeOldHosts=n.i(a.createNewHosts)(e),t.restoreInputValues=n.i(a.createInputTransfer)(),n.i(a.removeNgStyles)()},t.prototype.hmrAfterDestroy=function(t){t.disposeOldHosts(),delete t.disposeOldHosts},t}();p=__decorate([n.i(o.x)({bootstrap:[r.a],declarations:u.a,imports:s.a,providers:[i.b,l.a]}),__metadata("design:paramtypes",[o.h,c.a])],p)},function(t,e,n){"use strict";var o=n(506),a=n(121),i=n(215),r=n(227),l=n(206),s=n(158);n.d(e,"a",function(){return u});var u=o.a.concat(a.a,i.b,r.b,s.b,[l.a])},function(t,e,n){"use strict";var o=n(221);n.d(e,"a",function(){return a});var a=[o.a]},function(t,e,n){"use strict";var o=n(515),a=n(160),i=n(221),r=n(171),l=n(228),s=n(158),u=n(220);n.d(e,"a",function(){return c});var c=[{path:"",component:a.a,resolve:{gameState:i.a}},{path:"combat/:id",component:s.c,canActivate:[u.a]},{path:"world/:id",component:r.a,canActivate:[l.a]},{path:"**",component:o.a}]},function(t,e,n){"use strict";var o=n(49),a=n(314),i=n(124),r=n(312);n.d(e,"a",function(){return l});var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.started=!1,e}return __extends(e,t),e.prototype.syncBehavior=function(){var e=this;if(!t.prototype.syncBehavior.call(this))return!1;this.animation=this.host.findBehavior(a.a),this.sprite=this.host.findBehavior(i.a),this.sound=this.host.findBehavior(r.a);var n=!(!this.animation||!this.sprite);return!this.started&&n&&(this.started=!0,this.animation.once("animation:done",function(){e.trigger("damage:done",e)})),n},e}(o.a)},function(t,e,n){"use strict";(function(t){var o=n(4),a=(n.n(o),n(79));n.d(e,"a",function(){return i});var i=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.fetch=function(e){var n=this;return new Promise(function(o,a){t.init({key:e,callback:function(t,e){t=n.data=n.transformTypes(t),o(n)}})})},n.prototype.transformTypes=function(t){var e={};return o.each(t,function(t,o){for(var a=t.elements.slice(0),i=a.length,r=0;r<i;r++){var l=a[r];for(var s in l)if(l.hasOwnProperty(s)&&"string"==typeof l[s]){var u=l[s];if(u.match(n.NUMBER_MATCHER))l[s]=parseInt(u,10);else if("benefit"===s)switch(u.toLowerCase()){case"true":case"yes":case"1":l[s]=!0;break;case"false":case"no":case"0":case null:l[s]=!1;break;default:l[s]=Boolean(u)}else"usedby"!==s&&"groups"!==s&&"message"!==s&&"zones"!==s&&"enemies"!==s||(/^\s*$/.test(u)?l[s]=null:l[s]=u.split("|"))}}e[o.toLowerCase()]=a}),e},n}(a.a);i.NUMBER_MATCHER=/^-?\d+$/}).call(e,n(939))},function(t,e,n){"use strict";function o(t){return u[0===t?t:t-1]}function a(t,e){return Math.floor(e.defense*Math.pow(t,1.1))+2*e.basedefense}function i(t,e){return Math.floor(e.baseattack*Math.pow(t,.65))}function r(t,e){return Math.floor(e.basespeed*Math.pow(t,.95))}function l(t,e){return Math.floor(e.basedefense*Math.pow(t,.95))}function s(t,e){return Math.floor(e.basemagic*Math.pow(t,.95))}e.a=o,e.b=a,e.c=i,e.d=r,e.e=l,e.f=s;var u=[0,32,96,208,400,672,1056,1552,2184,2976]},function(t,e,n){"use strict";var o=n(58),a=(n.n(o),n(676));n.n(a);n.d(e,"a",function(){return r});var i=function(){function t(t){if(!o.Map.isMap(t)||o.List.isList(t)){var e;this._lazy=function(){return e||(e=t.toJS())}}else this._lazy=function(){return t}}return Object.defineProperty(t.prototype,"value",{get:function(){return this._lazy()},enumerable:!0,configurable:!0}),t}(),r=n.i(a.storeLogger)({collapsed:!0,stateTransformer:function(t){if(t.action&&t.nextState)return t;var e={};return Object.keys(t).forEach(function(n){e[n]=new i(t[n])}),e}})},function(t,e,n){"use strict";var o=n(35);n.d(e,"a",function(){return a});var a=n.i(o.d)({x:0,y:0});n.i(o.d)({eid:"improperly-initialized-entity-"+(new Date).getTime(),type:"npc",name:"unknown npc",icon:"improperly-initialized-entity.png",level:0,exp:0,attack:0,defense:0,speed:0,magic:0,baseattack:0,basespeed:0,basemagic:0,basedefense:0,hp:0,mp:0,maxhp:0,maxmp:0,weapon:null,armor:null,helm:null,shield:null,boots:null,accessory:null})},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(13)),i=n(309),r=n(300),l=n(15),s=n(310);n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c});var u=function(t){function e(e,n,o,a){var i=t.call(this)||this;return i.parent=e,i.scene=n,i.data=o,i.current=null,i.target=null,i.player=null,i.action=null,i.spell=null,i.item=null,i.world=l.a.get(),i.states=[new h,new c,new d,new p,new f(a)],i}return __extends(e,t),e}(i.a),c=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.name=e.NAME,n}return __extends(e,t),e.prototype.enter=function(t){var e=this,n=function(e,o){t.scene.off("click",n),t.target=o[0],t.parent.items[0].select()};if(!t.current)throw new Error("Requires Current Player");var i=t.current;if(t.player=i.render,!t.player)throw new Error("Requires player render component for combat animations.");var l=new a.a(-1,-.25);t.action=t.target=t.spell=t.item=null;var s=function(e){t.action=e,t.scene.off("click",n),t.action.canTarget()?t.setCurrentState(h.NAME):t.setCurrentState(f.NAME)},u=o.filter(i.findBehaviors(r.a),function(t){return t.canBeUsedBy(i)});return t.parent.items=o.map(u,function(t){return{select:s.bind(e,t),label:t.getActionName()}}),i?void t.player.moveForward(function(){t.parent.setPointerTarget(i,"right",l),t.parent.showPointer(),t.scene.on("click",n)}):void t.parent.hidePointer()},e.prototype.exit=function(t){t.parent.items=[]},e}(s.a);c.NAME="choose-type";var p=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.name=e.NAME,n}return __extends(e,t),e.prototype.enter=function(t){var e=this;if(!t.current)throw new Error("Requires Current Player");var n=function(e,o){t.scene.off("click",n),t.target=o[0],t.parent.items[0].select()},a=function(e){switch(t.scene.off("click",n),t.spell=e,e.benefit&&(t.target=t.current),e.type){case"target":t.setCurrentState(h.NAME);break;default:console.info("Unknown spell type, submitting without target: "+e.type),t.setCurrentState(f.NAME)}},i=t.current.getSpells();t.parent.items=o.map(i,function(t){return{select:a.bind(e,t),label:t.name}}),t.scene.on("click",n)},e.prototype.exit=function(t){t.parent.items=[]},e}(s.a);p.NAME="choose-spell";var d=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.name=e.NAME,n}return __extends(e,t),e.prototype.enter=function(t){if(!t.current)throw new Error("Requires Current Player");console.warn("todo: combat items")},e.prototype.exit=function(t){t.parent.items=[]},e}(s.a);d.NAME="choose-item";var h=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.name=e.NAME,n}return __extends(e,t),e.prototype.enter=function(t){var e=this,n=t.data.enemies,i=t.target||n[0];if(t.parent.addPointerClass(t.action.getActionName()),!i)return void t.parent.hidePointer();var r,l=new a.a(.5,-.25),s=function(e){return t.target&&t.target._uid===e._uid?(t.target=e,t.scene.off("click",r),void t.setCurrentState(f.NAME)):(t.target=e,void t.parent.setPointerTarget(e,"left",l))};r=function(t,e){s(e[0])};var u=!(!t||!(t.spell&&t.spell.benefit||t.item)),c=u?t.data.players:t.data.enemies;t.parent.items=o.map(c,function(t){return{select:s.bind(e,t),label:t.model.name}}),t.parent.setPointerTarget(i,"left",l),t.scene.on("click",r)},e.prototype.exit=function(t){t.parent.items=[]},e}(s.a);h.NAME="choose-target";var f=function(t){function e(n){var o=t.call(this)||this;return o.submit=n,o.name=e.NAME,o}return __extends(e,t),e.prototype.enter=function(t){var e=this;if(!t.current||!t.action||!this.submit)throw new Error("Invalid state");if(t.action.canTarget()&&!t.target)throw new Error("Invalid target");t.player.moveBackward(function(){t.parent.hidePointer(),t.action.from=t.current,t.action.to=t.target,t.action.spell=t.spell,t.action.item=t.item,t.action.select(),t.parent.removePointerClass(t.action.getActionName()),e.submit(t.action)})},e}(s.a);f.NAME="choose-submit"},function(t,e,n){"use strict";var o=n(102),a=n(103),i=n(113),r=n(114),l=n(159),s=n(115),u=n(116),c=n(117);n(68);n.d(e,"a",function(){return p});var p=[c.a,o.a,a.a,i.a,r.a,l.a,s.a,u.a]},function(t,e,n){"use strict";var o=n(161);n.d(e,"a",function(){return o.a})},function(t,e,n){"use strict";var o=n(80);n.d(e,"a",function(){return a});var a=function(){function t(){this.interpFrame=0,this.animElapsed=0,this.animDuration=0,this.frames=[0],this.sourceMeta=null,this.sourceAnims=null}return t.prototype.setAnimationSource=function(t){console.log("Sprite is "+t),this.sourceMeta=n.i(o.b)(t),this.sourceMeta&&(this.sourceAnims=this.sourceMeta.animations,this.setAnimation("down"))},t.prototype.setAnimation=function(t){if(!this.sourceAnims)throw new Error("Invalid source animations");var e=this.sourceAnims[t];if(!e)throw new Error("Invalid animation name - "+t);this.frames=e.frames,this.animDuration=e.duration},t.prototype.updateTime=function(t){this.animElapsed+=t;var e=this.animElapsed/this.animDuration,n=Math.round(this.interpolate(0,this.frames.length-1,e));this.interpFrame=this.frames[n],this.animElapsed>this.animDuration&&(this.animElapsed=0)},t.prototype.interpolate=function(t,e,n){return n=Math.min(Math.max(n,0),1),t*(1-n)+e*n},t.prototype.getFrame=function(){return this.interpFrame},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t.prototype.render=function(t,e,n){},t}()},function(t,e,n){"use strict";var o=n(4),a=(n.n(o),n(48)),i=n(13);n.d(e,"a",function(){return r});var r=function(){function t(){this._pointRect=new a.a(0,0,1,1),this._objects=[]}return t.prototype.addSpatialObject=function(t){t&&t.point instanceof i.a&&this._objects.push(t)},t.prototype.removeSpatialObject=function(t){this._objects=o.reject(this._objects,function(e){return e._uid===t._uid})},t.prototype.queryPoint=function(t,e,n){return this._pointRect.point.set(t),this.queryRect(this._pointRect,e,n)},t.prototype.queryRect=function(t,e,n){var o;if(!n)throw new Error("Results array must be provided to query scene spatial database");o=!1;var a,i,r,l=this._objects;for(a=0,i=l.length;a<i;a++)r=l[a],(!e||r instanceof e)&&r.enabled!==!1&&r.point&&t.pointInRect(r.point)&&(n.push(r),o=!0);return o},t}()},function(t,e,n){"use strict";var o=n(49);n.d(e,"a",function(){return a});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.beforeFrame=function(t,e){},e.prototype.renderFrame=function(t,e){},e.prototype.afterFrame=function(t,e){},e}(o.a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){t.exports=""},function(t,e){t.exports=""},function(t,e){t.exports=""},function(t,e){t.exports=""},function(t,e){t.exports=""},function(t,e){t.exports=""},function(t,e){t.exports=""},function(t,e){t.exports=""},function(t,e){t.exports=""},function(t,e){t.exports=""},function(t,e){t.exports=""},function(t,e){t.exports=""},function(t,e){t.exports=""},function(t,e){t.exports=""},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=938},,function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},function(t,e,n){var o=n(32);"string"==typeof o?t.exports=o:t.exports=o.toString()},,,function(t,e,n){"use strict";function o(){return n.i(i.a)().bootstrapModuleFactory(l.a).then(r.a).catch(function(t){return console.error(t)})}function a(){document.addEventListener("DOMContentLoaded",o)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(24),r=n(277),l=n(408);e.main=o,e.bootstrapDomReady=a,a()}],[958]);